// @braintree/sanitize-url@3.1.0 with extra code to check for legal hosts
(function() {
  var parser;
  var legalHosts = {"paypal.com": 1, "braintreepayments.com": 1, "braintreegateway.com":1, "braintree-api.com": 1};

	// @braintree/sanitize-url@3.1.0
var invalidPrototcolRegex = /^(%20|s)*(javascript|data)/im;
var ctrlCharactersRegex = /[^ -~]/gmi;
var urlSchemeRegex = /^([^:]+):/gm;
var relativeFirstCharacters = ['.', '/']

function isRelativeUrl(url) {
  return relativeFirstCharacters.indexOf(url[0]) > -1;
}

function sanitizeUrl(url) {
  if (!url) {
    return 'about:blank';
  }

  var urlScheme, urlSchemeParseResults;
  var sanitizedUrl = url.replace(ctrlCharactersRegex, '').trim();

  if (isRelativeUrl(sanitizedUrl)) {
    return sanitizedUrl;
  }

  urlSchemeParseResults = sanitizedUrl.match(urlSchemeRegex);

  if (!urlSchemeParseResults) {
    return 'about:blank';
  }

  urlScheme = urlSchemeParseResults[0];

  if (invalidPrototcolRegex.test(urlScheme)) {
    return 'about:blank';
  }

  return sanitizedUrl;
}
// end @braintree/sanitze-url@3.1.0


  var _sanitizeUrl = sanitizeUrl;

  window.sanitizeUrl = function (url) {
    var sanitizedUrl = _sanitizeUrl(url);

    if (sanitizedUrl === 'about:blank') {
      return sanitizedUrl;
    }
    parser = parser || document.createElement("a");
    parser.href = sanitizedUrl.toLowerCase();

    return /^https:/i.test(sanitizedUrl) && legalHosts.hasOwnProperty(parser.hostname.split(".").slice(-2).join(".")) ? sanitizedUrl : "about:blank";
  };
})();
// end @braintree/sanitze-url@3.1.0 with extra code to check for legal hosts

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}(g.braintree||(g.braintree={})).dropin=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){(function(root,factory){if(typeof define==="function"&&define.amd){define(["underscore","jquery","exports"],function(_,$,exports){root.Backbone=factory(root,exports,_,$)})}else if(typeof exports!=="undefined"){var _=require(120);factory(root,exports,_)}else{root.Backbone=factory(root,{},root._,root.jQuery||root.Zepto||root.ender||root.$)}})(this,function(root,Backbone,_,$){var previousBackbone=root.Backbone;var array=[];var push=array.push;var slice=array.slice;var splice=array.splice;Backbone.VERSION="1.1.2";Backbone.$=$;Backbone.noConflict=function(){root.Backbone=previousBackbone;return this};Backbone.emulateHTTP=false;Backbone.emulateJSON=false;var Events=Backbone.Events={on:function(name,callback,context){if(!eventsApi(this,"on",name,[callback,context])||!callback)return this;this._events||(this._events={});var events=this._events[name]||(this._events[name]=[]);events.push({callback:callback,context:context,ctx:context||this});return this},once:function(name,callback,context){if(!eventsApi(this,"once",name,[callback,context])||!callback)return this;var self=this;var once=_.once(function(){self.off(name,once);callback.apply(this,arguments)});once._callback=callback;return this.on(name,once,context)},off:function(name,callback,context){var retain,ev,events,names,i,l,j,k;if(!this._events||!eventsApi(this,"off",name,[callback,context]))return this;if(!name&&!callback&&!context){this._events=void 0;return this}names=name?[name]:_.keys(this._events);for(i=0,l=names.length;i<l;i++){name=names[i];if(events=this._events[name]){this._events[name]=retain=[];if(callback||context){for(j=0,k=events.length;j<k;j++){ev=events[j];if(callback&&callback!==ev.callback&&callback!==ev.callback._callback||context&&context!==ev.context){retain.push(ev)}}}if(!retain.length)delete this._events[name]}}return this},trigger:function(name){if(!this._events)return this;var args=slice.call(arguments,1);if(!eventsApi(this,"trigger",name,args))return this;var events=this._events[name];var allEvents=this._events.all;if(events)triggerEvents(events,args);if(allEvents)triggerEvents(allEvents,arguments);return this},stopListening:function(obj,name,callback){var listeningTo=this._listeningTo;if(!listeningTo)return this;var remove=!name&&!callback;if(!callback&&typeof name==="object")callback=this;if(obj)(listeningTo={})[obj._listenId]=obj;for(var id in listeningTo){obj=listeningTo[id];obj.off(name,callback,this);if(remove||_.isEmpty(obj._events))delete this._listeningTo[id]}return this}};var eventSplitter=/\s+/;var eventsApi=function(obj,action,name,rest){if(!name)return true;if(typeof name==="object"){for(var key in name){obj[action].apply(obj,[key,name[key]].concat(rest))}return false}if(eventSplitter.test(name)){var names=name.split(eventSplitter);for(var i=0,l=names.length;i<l;i++){obj[action].apply(obj,[names[i]].concat(rest))}return false}return true};var triggerEvents=function(events,args){var ev,i=-1,l=events.length,a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:while(++i<l)(ev=events[i]).callback.call(ev.ctx);return;case 1:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1);return;case 2:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1,a2);return;case 3:while(++i<l)(ev=events[i]).callback.call(ev.ctx,a1,a2,a3);return;default:while(++i<l)(ev=events[i]).callback.apply(ev.ctx,args);return}};var listenMethods={listenTo:"on",listenToOnce:"once"};_.each(listenMethods,function(implementation,method){Events[method]=function(obj,name,callback){var listeningTo=this._listeningTo||(this._listeningTo={});var id=obj._listenId||(obj._listenId=_.uniqueId("l"));listeningTo[id]=obj;if(!callback&&typeof name==="object")callback=this;obj[implementation](name,callback,this);return this}});Events.bind=Events.on;Events.unbind=Events.off;_.extend(Backbone,Events);var Model=Backbone.Model=function(attributes,options){var attrs=attributes||{};options||(options={});this.cid=_.uniqueId("c");this.attributes={};if(options.collection)this.collection=options.collection;if(options.parse)attrs=this.parse(attrs,options)||{};attrs=_.defaults({},attrs,_.result(this,"defaults"));this.set(attrs,options);this.changed={};this.initialize.apply(this,arguments)};_.extend(Model.prototype,Events,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(options){return _.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(attr){return this.attributes[attr]},escape:function(attr){return _.escape(this.get(attr))},has:function(attr){return this.get(attr)!=null},set:function(key,val,options){var attr,attrs,unset,changes,silent,changing,prev,current;if(key==null)return this;if(typeof key==="object"){attrs=key;options=val}else{(attrs={})[key]=val}options||(options={});if(!this._validate(attrs,options))return false;unset=options.unset;silent=options.silent;changes=[];changing=this._changing;this._changing=true;if(!changing){this._previousAttributes=_.clone(this.attributes);this.changed={}}current=this.attributes,prev=this._previousAttributes;if(this.idAttribute in attrs)this.id=attrs[this.idAttribute];for(attr in attrs){val=attrs[attr];if(!_.isEqual(current[attr],val))changes.push(attr);if(!_.isEqual(prev[attr],val)){this.changed[attr]=val}else{delete this.changed[attr]}unset?delete current[attr]:current[attr]=val}if(!silent){if(changes.length)this._pending=options;for(var i=0,l=changes.length;i<l;i++){this.trigger("change:"+changes[i],this,current[changes[i]],options)}}if(changing)return this;if(!silent){while(this._pending){options=this._pending;this._pending=false;this.trigger("change",this,options)}}this._pending=false;this._changing=false;return this},unset:function(attr,options){return this.set(attr,void 0,_.extend({},options,{unset:true}))},clear:function(options){var attrs={};for(var key in this.attributes)attrs[key]=void 0;return this.set(attrs,_.extend({},options,{unset:true}))},hasChanged:function(attr){if(attr==null)return!_.isEmpty(this.changed);return _.has(this.changed,attr)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?_.clone(this.changed):false;var val,changed=false;var old=this._changing?this._previousAttributes:this.attributes;for(var attr in diff){if(_.isEqual(old[attr],val=diff[attr]))continue;(changed||(changed={}))[attr]=val}return changed},previous:function(attr){if(attr==null||!this._previousAttributes)return null;return this._previousAttributes[attr]},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(options){options=options?_.clone(options):{};if(options.parse===void 0)options.parse=true;var model=this;var success=options.success;options.success=function(resp){if(!model.set(model.parse(resp,options),options))return false;if(success)success(model,resp,options);model.trigger("sync",model,resp,options)};wrapError(this,options);return this.sync("read",this,options)},save:function(key,val,options){var attrs,method,xhr,attributes=this.attributes;if(key==null||typeof key==="object"){attrs=key;options=val}else{(attrs={})[key]=val}options=_.extend({validate:true},options);if(attrs&&!options.wait){if(!this.set(attrs,options))return false}else{if(!this._validate(attrs,options))return false}if(attrs&&options.wait){this.attributes=_.extend({},attributes,attrs)}if(options.parse===void 0)options.parse=true;var model=this;var success=options.success;options.success=function(resp){model.attributes=attributes;var serverAttrs=model.parse(resp,options);if(options.wait)serverAttrs=_.extend(attrs||{},serverAttrs);if(_.isObject(serverAttrs)&&!model.set(serverAttrs,options)){return false}if(success)success(model,resp,options);model.trigger("sync",model,resp,options)};wrapError(this,options);method=this.isNew()?"create":options.patch?"patch":"update";if(method==="patch")options.attrs=attrs;xhr=this.sync(method,this,options);if(attrs&&options.wait)this.attributes=attributes;return xhr},destroy:function(options){options=options?_.clone(options):{};var model=this;var success=options.success;var destroy=function(){model.trigger("destroy",model,model.collection,options)};options.success=function(resp){if(options.wait||model.isNew())destroy();if(success)success(model,resp,options);if(!model.isNew())model.trigger("sync",model,resp,options)};if(this.isNew()){options.success();return false}wrapError(this,options);var xhr=this.sync("delete",this,options);if(!options.wait)destroy();return xhr},url:function(){var base=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();if(this.isNew())return base;return base.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(options){return this._validate({},_.extend(options||{},{validate:true}))},_validate:function(attrs,options){if(!options.validate||!this.validate)return true;attrs=_.extend({},this.attributes,attrs);var error=this.validationError=this.validate(attrs,options)||null;if(!error)return true;this.trigger("invalid",this,error,_.extend(options,{validationError:error}));return false}});var modelMethods=["keys","values","pairs","invert","pick","omit"];_.each(modelMethods,function(method){Model.prototype[method]=function(){var args=slice.call(arguments);args.unshift(this.attributes);return _[method].apply(_,args)}});var Collection=Backbone.Collection=function(models,options){options||(options={});if(options.model)this.model=options.model;if(options.comparator!==void 0)this.comparator=options.comparator;this._reset();this.initialize.apply(this,arguments);if(models)this.reset(models,_.extend({silent:true},options))};var setOptions={add:true,remove:true,merge:true};var addOptions={add:true,remove:false};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(models,options){return this.set(models,_.extend({merge:false},options,addOptions))},remove:function(models,options){var singular=!_.isArray(models);models=singular?[models]:_.clone(models);options||(options={});var i,l,index,model;for(i=0,l=models.length;i<l;i++){model=models[i]=this.get(models[i]);if(!model)continue;delete this._byId[model.id];delete this._byId[model.cid];index=this.indexOf(model);this.models.splice(index,1);this.length--;if(!options.silent){options.index=index;model.trigger("remove",model,this,options)}this._removeReference(model,options)}return singular?models[0]:models},set:function(models,options){options=_.defaults({},options,setOptions);if(options.parse)models=this.parse(models,options);var singular=!_.isArray(models);models=singular?models?[models]:[]:_.clone(models);var i,l,id,model,attrs,existing,sort;var at=options.at;var targetModel=this.model;var sortable=this.comparator&&at==null&&options.sort!==false;var sortAttr=_.isString(this.comparator)?this.comparator:null;var toAdd=[],toRemove=[],modelMap={};var add=options.add,merge=options.merge,remove=options.remove;var order=!sortable&&add&&remove?[]:false;for(i=0,l=models.length;i<l;i++){attrs=models[i]||{};if(attrs instanceof Model){id=model=attrs}else{id=attrs[targetModel.prototype.idAttribute||"id"]}if(existing=this.get(id)){if(remove)modelMap[existing.cid]=true;if(merge){attrs=attrs===model?model.attributes:attrs;if(options.parse)attrs=existing.parse(attrs,options);existing.set(attrs,options);if(sortable&&!sort&&existing.hasChanged(sortAttr))sort=true}models[i]=existing}else if(add){model=models[i]=this._prepareModel(attrs,options);if(!model)continue;toAdd.push(model);this._addReference(model,options)}model=existing||model;if(order&&(model.isNew()||!modelMap[model.id]))order.push(model);modelMap[model.id]=true}if(remove){for(i=0,l=this.length;i<l;++i){if(!modelMap[(model=this.models[i]).cid])toRemove.push(model)}if(toRemove.length)this.remove(toRemove,options)}if(toAdd.length||order&&order.length){if(sortable)sort=true;this.length+=toAdd.length;if(at!=null){for(i=0,l=toAdd.length;i<l;i++){this.models.splice(at+i,0,toAdd[i])}}else{if(order)this.models.length=0;var orderedModels=order||toAdd;for(i=0,l=orderedModels.length;i<l;i++){this.models.push(orderedModels[i])}}}if(sort)this.sort({silent:true});if(!options.silent){for(i=0,l=toAdd.length;i<l;i++){(model=toAdd[i]).trigger("add",model,this,options)}if(sort||order&&order.length)this.trigger("sort",this,options)}return singular?models[0]:models},reset:function(models,options){options||(options={});for(var i=0,l=this.models.length;i<l;i++){this._removeReference(this.models[i],options)}options.previousModels=this.models;this._reset();models=this.add(models,_.extend({silent:true},options));if(!options.silent)this.trigger("reset",this,options);return models},push:function(model,options){return this.add(model,_.extend({at:this.length},options))},pop:function(options){var model=this.at(this.length-1);this.remove(model,options);return model},unshift:function(model,options){return this.add(model,_.extend({at:0},options))},shift:function(options){var model=this.at(0);this.remove(model,options);return model},slice:function(){return slice.apply(this.models,arguments)},get:function(obj){if(obj==null)return void 0;return this._byId[obj]||this._byId[obj.id]||this._byId[obj.cid]},at:function(index){return this.models[index]},where:function(attrs,first){if(_.isEmpty(attrs))return first?void 0:[];return this[first?"find":"filter"](function(model){for(var key in attrs){if(attrs[key]!==model.get(key))return false}return true})},findWhere:function(attrs){return this.where(attrs,true)},sort:function(options){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");options||(options={});if(_.isString(this.comparator)||this.comparator.length===1){this.models=this.sortBy(this.comparator,this)}else{this.models.sort(_.bind(this.comparator,this))}if(!options.silent)this.trigger("sort",this,options);return this},pluck:function(attr){return _.invoke(this.models,"get",attr)},fetch:function(options){options=options?_.clone(options):{};if(options.parse===void 0)options.parse=true;var success=options.success;var collection=this;options.success=function(resp){var method=options.reset?"reset":"set";collection[method](resp,options);if(success)success(collection,resp,options);collection.trigger("sync",collection,resp,options)};wrapError(this,options);return this.sync("read",this,options)},create:function(model,options){options=options?_.clone(options):{};if(!(model=this._prepareModel(model,options)))return false;if(!options.wait)this.add(model,options);var collection=this;var success=options.success;options.success=function(model,resp){if(options.wait)collection.add(model,options);if(success)success(model,resp,options)};model.save(null,options);return model},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(attrs,options){if(attrs instanceof Model)return attrs;options=options?_.clone(options):{};options.collection=this;var model=new this.model(attrs,options);if(!model.validationError)return model;this.trigger("invalid",this,model.validationError,options);return false},_addReference:function(model,options){this._byId[model.cid]=model;if(model.id!=null)this._byId[model.id]=model;if(!model.collection)model.collection=this;model.on("all",this._onModelEvent,this)},_removeReference:function(model,options){if(this===model.collection)delete model.collection;model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){if((event==="add"||event==="remove")&&collection!==this)return;if(event==="destroy")this.remove(model,options);if(model&&event==="change:"+model.idAttribute){delete this._byId[model.previous(model.idAttribute)];if(model.id!=null)this._byId[model.id]=model}this.trigger.apply(this,arguments)}});var methods=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];_.each(methods,function(method){Collection.prototype[method]=function(){var args=slice.call(arguments);args.unshift(this.models);return _[method].apply(_,args)}});var attributeMethods=["groupBy","countBy","sortBy","indexBy"];_.each(attributeMethods,function(method){Collection.prototype[method]=function(value,context){var iterator=_.isFunction(value)?value:function(model){return model.get(value)};return _[method](this.models,iterator,context)}});var View=Backbone.View=function(options){this.cid=_.uniqueId("view");options||(options={});_.extend(this,_.pick(options,viewOptions));this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var delegateEventSplitter=/^(\S+)\s*(.*)$/;var viewOptions=["model","collection","el","id","attributes","className","tagName","events"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(element,delegate){if(this.$el)this.undelegateEvents();this.$el=element instanceof Backbone.$?element:Backbone.$(element);this.el=this.$el[0];if(delegate!==false)this.delegateEvents();return this},delegateEvents:function(events){if(!(events||(events=_.result(this,"events"))))return this;this.undelegateEvents();for(var key in events){var method=events[key];if(!_.isFunction(method))method=this[events[key]];if(!method)continue;var match=key.match(delegateEventSplitter);var eventName=match[1],selector=match[2];method=_.bind(method,this);eventName+=".delegateEvents"+this.cid;if(selector===""){this.$el.on(eventName,method)}else{this.$el.on(eventName,selector,method)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_ensureElement:function(){if(!this.el){var attrs=_.extend({},_.result(this,"attributes"));if(this.id)attrs.id=_.result(this,"id");if(this.className)attrs["class"]=_.result(this,"className");var $el=Backbone.$("<"+_.result(this,"tagName")+">").attr(attrs);this.setElement($el,false)}else{this.setElement(_.result(this,"el"),false)}}});Backbone.sync=function(method,model,options){var type=methodMap[method];_.defaults(options||(options={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var params={type:type,dataType:"json"};if(!options.url){params.url=_.result(model,"url")||urlError()}if(options.data==null&&model&&(method==="create"||method==="update"||method==="patch")){params.contentType="application/json";params.data=JSON.stringify(options.attrs||model.toJSON(options))}if(options.emulateJSON){params.contentType="application/x-www-form-urlencoded";params.data=params.data?{model:params.data}:{}}if(options.emulateHTTP&&(type==="PUT"||type==="DELETE"||type==="PATCH")){params.type="POST";if(options.emulateJSON)params.data._method=type;var beforeSend=options.beforeSend;options.beforeSend=function(xhr){xhr.setRequestHeader("X-HTTP-Method-Override",type);if(beforeSend)return beforeSend.apply(this,arguments)}}if(params.type!=="GET"&&!options.emulateJSON){params.processData=false}if(params.type==="PATCH"&&noXhrPatch){params.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var xhr=options.xhr=Backbone.ajax(_.extend(params,options));model.trigger("request",model,xhr,options);return xhr};var noXhrPatch=typeof window!=="undefined"&&!!window.ActiveXObject&&!(window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent);var methodMap={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var Router=Backbone.Router=function(options){options||(options={});if(options.routes)this.routes=options.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var optionalParam=/\((.*?)\)/g;var namedParam=/(\(\?)?:\w+/g;var splatParam=/\*\w+/g;var escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){if(!_.isRegExp(route))route=this._routeToRegExp(route);if(_.isFunction(name)){callback=name;name=""}if(!callback)callback=this[name];var router=this;Backbone.history.route(route,function(fragment){var args=router._extractParameters(route,fragment);router.execute(callback,args);router.trigger.apply(router,["route:"+name].concat(args));router.trigger("route",name,args);Backbone.history.trigger("route",router,name,args)});return this},execute:function(callback,args){if(callback)callback.apply(this,args)},navigate:function(fragment,options){Backbone.history.navigate(fragment,options);return this},_bindRoutes:function(){if(!this.routes)return;this.routes=_.result(this,"routes");var route,routes=_.keys(this.routes);while((route=routes.pop())!=null){this.route(route,this.routes[route])}},_routeToRegExp:function(route){route=route.replace(escapeRegExp,"\\$&").replace(optionalParam,"(?:$1)?").replace(namedParam,function(match,optional){return optional?match:"([^/?]+)"}).replace(splatParam,"([^?]*?)");return new RegExp("^"+route+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1);return _.map(params,function(param,i){if(i===params.length-1)return param||null;return param?decodeURIComponent(param):null})}});var History=Backbone.History=function(){this.handlers=[];_.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var routeStripper=/^[#\/]|\s+$/g;var rootStripper=/^\/+|\/+$/g;var isExplorer=/msie [\w.]+/;var trailingSlash=/\/$/;var pathStripper=/#.*$/;History.started=false;_.extend(History.prototype,Events,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(window){var match=(window||this).location.href.match(/#(.*)$/);return match?match[1]:""},getFragment:function(fragment,forcePushState){if(fragment==null){if(this._hasPushState||!this._wantsHashChange||forcePushState){fragment=decodeURI(this.location.pathname+this.location.search);var root=this.root.replace(trailingSlash,"");if(!fragment.indexOf(root))fragment=fragment.slice(root.length)}else{fragment=this.getHash()}}return fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=true;this.options=_.extend({root:"/"},this.options,options);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var fragment=this.getFragment();var docMode=document.documentMode;var oldIE=isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||docMode<=7);this.root=("/"+this.root+"/").replace(rootStripper,"/");if(oldIE&&this._wantsHashChange){var frame=Backbone.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=frame.hide().appendTo("body")[0].contentWindow;this.navigate(fragment)}if(this._hasPushState){Backbone.$(window).on("popstate",this.checkUrl)}else if(this._wantsHashChange&&"onhashchange"in window&&!oldIE){Backbone.$(window).on("hashchange",this.checkUrl)}else if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)}this.fragment=fragment;var loc=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){this.fragment=this.getFragment(null,true);this.location.replace(this.root+"#"+this.fragment);return true}else if(this._hasPushState&&this.atRoot()&&loc.hash){this.fragment=this.getHash().replace(routeStripper,"");this.history.replaceState({},document.title,this.root+this.fragment)}}if(!this.options.silent)return this.loadUrl()},stop:function(){Backbone.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);if(this._checkUrlInterval)clearInterval(this._checkUrlInterval);History.started=false},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(e){var current=this.getFragment();if(current===this.fragment&&this.iframe){current=this.getFragment(this.getHash(this.iframe))}if(current===this.fragment)return false;if(this.iframe)this.navigate(current);this.loadUrl()},loadUrl:function(fragment){fragment=this.fragment=this.getFragment(fragment);return _.any(this.handlers,function(handler){if(handler.route.test(fragment)){handler.callback(fragment);return true}})},navigate:function(fragment,options){if(!History.started)return false;if(!options||options===true)options={trigger:!!options};var url=this.root+(fragment=this.getFragment(fragment||""));fragment=fragment.replace(pathStripper,"");if(this.fragment===fragment)return;this.fragment=fragment;if(fragment===""&&url!=="/")url=url.slice(0,-1);if(this._hasPushState){this.history[options.replace?"replaceState":"pushState"]({},document.title,url)}else if(this._wantsHashChange){this._updateHash(this.location,fragment,options.replace);if(this.iframe&&fragment!==this.getFragment(this.getHash(this.iframe))){if(!options.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,fragment,options.replace)}}else{return this.location.assign(url)}if(options.trigger)return this.loadUrl(fragment)},_updateHash:function(location,fragment,replace){if(replace){var href=location.href.replace(/(javascript:|#).*$/,"");location.replace(href+"#"+fragment)}else{location.hash="#"+fragment}}});Backbone.history=new History;var extend=function(protoProps,staticProps){var parent=this;var child;if(protoProps&&_.has(protoProps,"constructor")){child=protoProps.constructor}else{child=function(){return parent.apply(this,arguments)}}_.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};Surrogate.prototype=parent.prototype;child.prototype=new Surrogate;if(protoProps)_.extend(child.prototype,protoProps);child.__super__=parent.prototype;return child};Model.extend=Collection.extend=Router.extend=View.extend=History.extend=extend;var urlError=function(){throw new Error('A "url" property or function must be specified')};var wrapError=function(model,options){var error=options.error;options.error=function(resp){if(error)error(model,resp,options);model.trigger("error",model,resp,options)}};return Backbone})},{120:120}],2:[function(require,module,exports){(function(global){"use strict";var bind=require(117);var braintree3ds=require(27);var parseClientToken=require(9);var util=require(14);var SEPAMandate=require(12);var EuropeBankAccount=require(6);var CreditCard=require(5);var CoinbaseAccount=require(3);var PayPalAccount=require(10);var normalizeCreditCardFields=require(8).normalizeCreditCardFields;var chooseRequestDriver=require(41).chooseDriver;var shouldEnableCORS=require(13);var constants=require(4);function getAnalyticsConfiguration(options){var analyticsConfiguration=options.analyticsConfiguration||{};var globalBraintreeVersion=global.braintree?global.braintree.VERSION:null;var defaultSdkVersion=globalBraintreeVersion?"braintree/web/"+globalBraintreeVersion:"";return{sdkVersion:analyticsConfiguration.sdkVersion||defaultSdkVersion,merchantAppId:analyticsConfiguration.merchantAppId||global.location.host}}function Client(options){var parsedClientToken,secure3d,analyticsConfiguration;this.attrs={};if(options.hasOwnProperty("sharedCustomerIdentifier")){this.attrs.sharedCustomerIdentifier=options.sharedCustomerIdentifier}parsedClientToken=parseClientToken(options.clientToken);analyticsConfiguration=getAnalyticsConfiguration(options);this.driver=options.driver||chooseRequestDriver({enableCORS:shouldEnableCORS(options)});this.analyticsUrl=parsedClientToken.analytics?parsedClientToken.analytics.url:null;this.clientApiUrl=parsedClientToken.clientApiUrl;this.analyticsUrl=sanitizeUrl(this.analyticsUrl);this.clientApiUrl=sanitizeUrl(this.clientApiUrl);this.customerId=options.customerId;this.challenges=parsedClientToken.challenges;this.integration=options.integration||"";this.sdkVersion=analyticsConfiguration.sdkVersion;this.merchantAppId=analyticsConfiguration.merchantAppId;secure3d=braintree3ds.create(this,{container:options.container,clientToken:parsedClientToken});this.verify3DS=bind(secure3d.verify,secure3d);this.attrs.sharedCustomerIdentifierType=options.sharedCustomerIdentifierType;this.attrs.braintreeLibraryVersion=this.sdkVersion;if(parsedClientToken.merchantAccountId){this.attrs.merchantAccountId=parsedClientToken.merchantAccountId}if(options.clientKey){this.attrs.clientKey=options.clientKey}else if(parsedClientToken.authorizationFingerprint){this.attrs.authorizationFingerprint=parsedClientToken.authorizationFingerprint}if(options.hasOwnProperty("timeout")){this.requestTimeout=options.timeout}else{this.requestTimeout=6e4}}Client.prototype.getCreditCards=function(callback){this.driver.get(util.joinUrlFragments([this.clientApiUrl,"v1","payment_methods"]),this.attrs,function(d){var i=0;var len=d.paymentMethods.length;var creditCards=[];for(i;i<len;i++){creditCards.push(new CreditCard(d.paymentMethods[i]))}return creditCards},callback,this.requestTimeout)};Client.prototype.tokenizeCoinbase=function(attrs,callback){attrs.options={validate:false};this.addCoinbase(attrs,function(err,result){if(err){callback(err,null)}else if(result&&result.nonce){callback(err,result)}else{callback("Unable to tokenize coinbase account.",null)}})};Client.prototype.tokenizePayPalAccount=function(attrs,callback){attrs.options={validate:false};this.addPayPalAccount(attrs,function(err,result){if(err){callback(err,null)}else if(result&&result.nonce){callback(null,result)}else{callback("Unable to tokenize paypal account.",null)}})};Client.prototype.tokenizeCard=function(attrs,callback){attrs.options={validate:false};this.addCreditCard(attrs,function(err,result){if(result&&result.nonce){callback(err,result.nonce,{type:result.type,details:result.details})}else{callback("Unable to tokenize card.",null)}})};Client.prototype.lookup3DS=function(attrs,callback){var url=util.joinUrlFragments([this.clientApiUrl,"v1/payment_methods",attrs.nonce,"three_d_secure/lookup"]);var mergedAttrs=util.mergeOptions(this.attrs,{amount:attrs.amount});this.driver.post(url,mergedAttrs,function(d){return d},callback,this.requestTimeout)};Client.prototype.createSEPAMandate=function(attrs,callback){var mergedAttrs=util.mergeOptions(this.attrs,{sepaMandate:attrs});this.driver.post(util.joinUrlFragments([this.clientApiUrl,"v1","sepa_mandates.json"]),mergedAttrs,function(d){return{sepaMandate:new SEPAMandate(d.europeBankAccounts[0].sepaMandates[0]),sepaBankAccount:new EuropeBankAccount(d.europeBankAccounts[0])}},callback,this.requestTimeout)};Client.prototype.getSEPAMandate=function(attrs,callback){var mergedAttrs=util.mergeOptions(this.attrs,attrs);this.driver.get(util.joinUrlFragments([this.clientApiUrl,"v1","sepa_mandates.json"]),mergedAttrs,function(d){return{sepaMandate:new SEPAMandate(d.sepaMandates[0])}},callback,this.requestTimeout)};Client.prototype.addCoinbase=function(attrs,callback){var mergedAttrs;delete attrs.share;mergedAttrs=util.mergeOptions(this.attrs,{coinbaseAccount:attrs,_meta:{integration:this.integration||"custom",source:"coinbase"}});this.driver.post(util.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/coinbase_accounts"]),mergedAttrs,function(d){return new CoinbaseAccount(d.coinbaseAccounts[0])},callback,this.requestTimeout)};Client.prototype.addPayPalAccount=function(attrs,callback){var mergedAttrs;delete attrs.share;mergedAttrs=util.mergeOptions(this.attrs,{paypalAccount:attrs,_meta:{integration:this.integration||"paypal",source:"paypal"}});this.driver.post(util.joinUrlFragments([this.clientApiUrl,"v1","payment_methods","paypal_accounts"]),mergedAttrs,function(d){return new PayPalAccount(d.paypalAccounts[0])},callback,this.requestTimeout)};Client.prototype.addCreditCard=function(attrs,callback){var mergedAttrs,creditCard;var share=attrs.share;delete attrs.share;creditCard=normalizeCreditCardFields(attrs);mergedAttrs=util.mergeOptions(this.attrs,{share:share,creditCard:creditCard,_meta:{integration:this.integration||"custom",source:"form"}});this.driver.post(util.joinUrlFragments([this.clientApiUrl,"v1","payment_methods/credit_cards"]),mergedAttrs,function(d){return new CreditCard(d.creditCards[0])},callback,this.requestTimeout)};Client.prototype.sendAnalyticsEvents=function(events,callback){var attrs,event;var url=this.analyticsUrl;var eventObjects=[];events=util.isArray(events)?events:[events];if(!url){if(callback){callback(null,{})}return}for(event in events){if(events.hasOwnProperty(event)){eventObjects.push({kind:events[event]})}}attrs=util.mergeOptions(this.attrs,{analytics:eventObjects,_meta:{merchantAppId:this.merchantAppId,platform:"web",platformVersion:global.navigator.userAgent,integrationType:this.integration,sdkVersion:this.sdkVersion}});this.driver.post(url,attrs,function(d){return d},callback,constants.ANALYTICS_TIMEOUT_MS)};Client.prototype.decryptBrowserswitchPayload=function(encryptedPayload,callback){var attrs=util.mergeOptions(this.attrs,{asymmetric_encrypted_payload:encryptedPayload});var url=util.joinUrlFragments([this.clientApiUrl,"/v1/paypal_browser_switch/decrypt"]);this.driver.post(url,attrs,function(d){return d},callback,this.requestTimeout)};Client.prototype.encryptBrowserswitchReturnPayload=function(payload,aesKey,callback){var attrs=util.mergeOptions(this.attrs,{payload:payload,aesKey:aesKey});var url=util.joinUrlFragments([this.clientApiUrl,"/v1/paypal_browser_switch/encrypt"]);this.driver.post(url,attrs,function(d){return d},callback,this.requestTimeout)};Client.prototype.exchangePaypalTokenForConsentCode=function(tokensObj,callback){var attrs=util.mergeOptions(this.attrs,tokensObj);if(this.attrs.merchantAccountId){attrs.merchant_account_id=this.attrs.merchantAccountId}var url=util.joinUrlFragments([this.clientApiUrl,"/v1/paypal_account_service/merchant_consent"]);this.driver.post(url,attrs,function(d){return d},callback,this.requestTimeout)};Client.prototype.getAmexRewardsBalance=function(attrs,callback){var mergedAttrs=util.mergeOptions(this.attrs,attrs);if(mergedAttrs.nonce){mergedAttrs.payment_method_nonce=mergedAttrs.nonce;delete mergedAttrs.nonce}this.driver.get(util.joinUrlFragments([this.clientApiUrl,"v1/payment_methods/amex_rewards_balance"]),mergedAttrs,function(d){return d},callback,this.requestTimeout)};Client.prototype.getAmexExpressCheckoutNonceProfile=function(attrs,callback){var mergedAttrs=util.mergeOptions(this.attrs,attrs);if(mergedAttrs.nonce){mergedAttrs.payment_method_nonce=mergedAttrs.nonce;delete mergedAttrs.nonce}this.driver.get(util.joinUrlFragments([this.clientApiUrl,"v1/payment_methods/amex_express_checkout_cards",mergedAttrs.payment_method_nonce]),mergedAttrs,function(d){return d},callback,this.requestTimeout)};module.exports=Client}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{10:10,117:117,12:12,13:13,14:14,27:27,3:3,4:4,41:41,5:5,6:6,8:8,9:9}],3:[function(require,module,exports){"use strict";var ATTRIBUTES=["nonce","type","description","details"];function CoinbaseAccount(attributes){var i,attribute;for(i=0;i<ATTRIBUTES.length;i++){attribute=ATTRIBUTES[i];this[attribute]=attributes[attribute]}}module.exports=CoinbaseAccount},{}],4:[function(require,module,exports){"use strict";var apiUrls={production:"https://api.braintreegateway.com:443",sandbox:"https://api.sandbox.braintreegateway.com:443"};module.exports={apiUrls:apiUrls,errors:{UNKNOWN_ERROR:"Unknown error",INVALID_TIMEOUT:"Timeout must be a number"},ANALYTICS_TIMEOUT_MS:4e3}},{}],5:[function(require,module,exports){"use strict";var ATTRIBUTES=["billingAddress","branding","createdAt","createdAtMerchant","createdAtMerchantName","details","isLocked","lastUsedAt","lastUsedAtMerchant","lastUsedAtMerchantName","lastUsedByCurrentMerchant","nonce","securityQuestions","type"];function CreditCard(attributes){var i,attribute;for(i=0;i<ATTRIBUTES.length;i++){attribute=ATTRIBUTES[i];this[attribute]=attributes[attribute]}}module.exports=CreditCard},{}],6:[function(require,module,exports){"use strict";function EuropeBankAccount(attributes){var allAttributes=["bic","maskedIBAN","nonce","accountHolderName"];var attribute;var i=0;for(i=0;i<allAttributes.length;i++){attribute=allAttributes[i];this[attribute]=attributes[attribute]}}module.exports=EuropeBankAccount},{}],7:[function(require,module,exports){"use strict";var parseClientToken=require(9);var util=require(14);var chooseRequestDriver=require(41).chooseDriver;var shouldEnableCORS=require(13);var constants=require(4);function _tokenizeClientKey(clientKey){var tokens=clientKey.split("_");var environment=tokens[0];var merchantId=tokens.slice(2).join("_");return{merchantId:merchantId,environment:environment}}function getConfiguration(options,callback){var configUrl,clientKeyParts,parsedClientToken;var driver=chooseRequestDriver({enableCORS:shouldEnableCORS(options)});var clientKey=options.clientKey;var attrs={};if(clientKey){attrs.clientKey=clientKey;clientKeyParts=_tokenizeClientKey(clientKey);configUrl=constants.apiUrls[clientKeyParts.environment]+"/merchants/"+clientKeyParts.merchantId+"/client_api/v1/configuration"}else{parsedClientToken=parseClientToken(options.clientToken);if(parsedClientToken.authorizationFingerprint){attrs.authorizationFingerprint=parsedClientToken.authorizationFingerprint;configUrl=parsedClientToken.configUrl}}driver.get(configUrl,attrs,function(d){return util.mergeOptions(parsedClientToken,d)},callback,options.timeout)}module.exports=getConfiguration},{13:13,14:14,4:4,41:41,9:9}],8:[function(require,module,exports){"use strict";function normalizeCreditCardFields(attrs){var key;var creditCard={billingAddress:attrs.billingAddress||{}};for(key in attrs){if(!attrs.hasOwnProperty(key)){continue}switch(key.replace(/_/g,"").toLowerCase()){case"postalcode":case"countryname":case"countrycodenumeric":case"countrycodealpha2":case"countrycodealpha3":case"region":case"extendedaddress":case"locality":case"firstname":case"lastname":case"company":case"streetaddress":creditCard.billingAddress[key]=attrs[key];break;default:creditCard[key]=attrs[key]}}return creditCard}module.exports={normalizeCreditCardFields:normalizeCreditCardFields}},{}],9:[function(require,module,exports){"use strict";var braintreeUtils=require(58);require(11);function parseClientToken(rawClientToken){var clientToken;if(!rawClientToken){throw new Error("Braintree API Client Misconfigured: clientToken required.")}if(typeof rawClientToken==="object"&&rawClientToken!==null){clientToken=rawClientToken}else{try{rawClientToken=window.atob(rawClientToken)}catch(b64Error){}try{clientToken=JSON.parse(rawClientToken)}catch(jsonError){throw new Error("Braintree API Client Misconfigured: clientToken is not valid JSON.")}}if(!clientToken.hasOwnProperty("clientApiUrl")||!braintreeUtils.isWhitelistedDomain(clientToken.clientApiUrl)){throw new Error("Braintree API Client Misconfigured: the clientApiUrl provided in the clientToken is invalid.")}return clientToken}module.exports=parseClientToken},{11:11,58:58}],10:[function(require,module,exports){"use strict";var ATTRIBUTES=["nonce","type","description","details"];function PayPalAccount(attributes){var i,attribute;for(i=0;i<ATTRIBUTES.length;i++){attribute=ATTRIBUTES[i];this[attribute]=attributes[attribute]}}module.exports=PayPalAccount},{}],11:[function(require,module,exports){(function(global){"use strict";var atobPolyfill=function(base64String){var base64Matcher=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})([=]{1,2})?$");var characters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var result="";if(!base64Matcher.test(base64String)){throw new Error("Non base64 encoded input passed to window.atob polyfill")}var i=0;do{var b1=characters.indexOf(base64String.charAt(i++));var b2=characters.indexOf(base64String.charAt(i++));var b3=characters.indexOf(base64String.charAt(i++));var b4=characters.indexOf(base64String.charAt(i++));var a=(b1&63)<<2|b2>>4&3;var b=(b2&15)<<4|b3>>2&15;var c=(b3&3)<<6|b4&63;result+=String.fromCharCode(a)+(b?String.fromCharCode(b):"")+(c?String.fromCharCode(c):"")}while(i<base64String.length);return result};global.atob=global.atob||atobPolyfill;module.exports={atobPolyfill:atobPolyfill}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],12:[function(require,module,exports){"use strict";function SEPAMandate(attributes){var i=0;var attribute;var allAttributes=["accountHolderName","bic","longFormURL","mandateReferenceNumber","maskedIBAN","shortForm"];for(i=0;i<allAttributes.length;i++){attribute=allAttributes[i];this[attribute]=attributes[attribute]}}module.exports=SEPAMandate},{}],13:[function(require,module,exports){"use strict";module.exports=function(options){if(options.enableCORS!=null){return options.enableCORS}if(options.merchantConfiguration){return options.merchantConfiguration.enableCORS}return false}},{}],14:[function(require,module,exports){"use strict";function joinUrlFragments(fragments){var strippedFragment,i;var strippedFragments=[];for(i=0;i<fragments.length;i++){strippedFragment=fragments[i];if(strippedFragment.charAt(strippedFragment.length-1)==="/"){strippedFragment=strippedFragment.substring(0,strippedFragment.length-1)}if(strippedFragment.charAt(0)==="/"){strippedFragment=strippedFragment.substring(1)}strippedFragments.push(strippedFragment)}return strippedFragments.join("/")}function isArray(value){return value&&typeof value==="object"&&typeof value.length==="number"&&Object.prototype.toString.call(value)==="[object Array]"||false}function mergeOptions(obj1,obj2){var obj3={};var attrname;for(attrname in obj1){if(obj1.hasOwnProperty(attrname)){obj3[attrname]=obj1[attrname]}}for(attrname in obj2){if(obj2.hasOwnProperty(attrname)){obj3[attrname]=obj2[attrname]}}return obj3}module.exports={joinUrlFragments:joinUrlFragments,isArray:isArray,mergeOptions:mergeOptions}},{}],15:[function(require,module,exports){"use strict";var Client=require(2);var util=require(14);var parseClientToken=require(9);var getConfiguration=require(7);function configure(options){return new Client(options)}module.exports={Client:Client,configure:configure,util:util,parseClientToken:parseClientToken,_getConfiguration:getConfiguration}},{14:14,2:2,7:7,9:9}],16:[function(require,module,exports){"use strict";var nativeIndexOf=Array.prototype.indexOf;var indexOf;if(nativeIndexOf){indexOf=function(haystack,needle){return haystack.indexOf(needle)}}else{indexOf=function indexOf(haystack,needle){for(var i=0,len=haystack.length;i<len;i++){if(haystack[i]===needle){return i}}return-1}}module.exports={indexOf:indexOf}},{}],17:[function(require,module,exports){"use strict";function _escape(string){var i,hex;var escaped="";for(i=0;i<string.length;i++){escaped+="%";hex=string[i].charCodeAt(0).toString(16).toUpperCase();if(hex.length<2){escaped+="0"}escaped+=hex}return escaped}function decodeUtf8(b64){return decodeURIComponent(_escape(atob(b64)))}module.exports={decodeUtf8:decodeUtf8}},{}],18:[function(require,module,exports){"use strict";function normalizeElement(element,errorMessage){errorMessage=errorMessage||"["+element+"] is not a valid DOM Element";if(element&&element.nodeType&&element.nodeType===1){return element}if(element&&window.jQuery&&(element instanceof jQuery||"jquery"in Object(element))&&element.length!==0){return element[0]}if(typeof element==="string"&&document.getElementById(element)){return document.getElementById(element)}throw new Error(errorMessage)}module.exports={normalizeElement:normalizeElement}},{}],19:[function(require,module,exports){"use strict";function addEventListener(element,type,listener,useCapture){if(element.addEventListener){element.addEventListener(type,listener,useCapture||false)}else if(element.attachEvent){element.attachEvent("on"+type,listener)}}function removeEventListener(element,type,listener,useCapture){if(element.removeEventListener){element.removeEventListener(type,listener,useCapture||false)}else if(element.detachEvent){element.detachEvent("on"+type,listener)}}function preventDefault(event){if(event.preventDefault){event.preventDefault()}else{event.returnValue=false}}module.exports={addEventListener:addEventListener,removeEventListener:removeEventListener,preventDefault:preventDefault}},{}],20:[function(require,module,exports){"use strict";var toString=Object.prototype.toString;function isFunction(func){return toString.call(func)==="[object Function]"}function bind(func,context){return function(){return func.apply(context,arguments)}}module.exports={bind:bind,isFunction:isFunction}},{}],21:[function(require,module,exports){"use strict";function getMaxCharLength(width){var max,i,range,len;var ranges=[{min:0,max:180,chars:7},{min:181,max:620,chars:14},{min:621,max:960,chars:22}];len=ranges.length;width=width||window.innerWidth;for(i=0;i<len;i++){range=ranges[i];if(width>=range.min&&width<=range.max){max=range.chars}}return max||60}function truncateEmail(email,maxLength){var address,domain;if(email.indexOf("@")===-1){return email}email=email.split("@");address=email[0];domain=email[1];if(address.length>maxLength){address=address.slice(0,maxLength)+"..."}if(domain.length>maxLength){domain="..."+domain.slice(-maxLength)}return address+"@"+domain}module.exports={truncateEmail:truncateEmail,getMaxCharLength:getMaxCharLength}},{}],22:[function(require,module,exports){"use strict";var array=require(16);function isBrowserHttps(){return window.location.protocol==="https:"}function encode(str){switch(str){case null:case undefined:return"";case true:return"1";case false:return"0";default:return encodeURIComponent(str)}}function makeQueryString(params,namespace){var query=[],k,p;for(p in params){if(params.hasOwnProperty(p)){var v=params[p];if(namespace){k=namespace+"["+p+"]"}else{k=p}if(typeof v==="object"){query.push(makeQueryString(v,k))}else if(v!==undefined&&v!==null){query.push(encode(k)+"="+encode(v))}}}return query.join("&")}function decodeQueryString(queryString){var params={},paramPairs=queryString.split("&");for(var i=0;i<paramPairs.length;i++){var paramPair=paramPairs[i].split("=");var key=paramPair[0];var value=decodeURIComponent(paramPair[1]);params[key]=value}return params}function getParams(url){var urlSegments=url.split("?");if(urlSegments.length!==2){return{}}return decodeQueryString(urlSegments[1])}var parser=document.createElement("a");var legalHosts=["paypal.com","braintreepayments.com","braintreegateway.com","localhost"];function isWhitelistedDomain(url){url=url.toLowerCase();if(!/^http/.test(url)){return false}parser.href=url;var pieces=parser.hostname.split(".");var topLevelDomain=pieces.slice(-2).join(".");if(array.indexOf(legalHosts,topLevelDomain)===-1){return false}return true}module.exports={isBrowserHttps:isBrowserHttps,makeQueryString:makeQueryString,decodeQueryString:decodeQueryString,getParams:getParams,isWhitelistedDomain:isWhitelistedDomain}},{16:16}],23:[function(require,module,exports){"use strict";function generate(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0;var v=c==="x"?r:r&3|8;return v.toString(16)})}module.exports=generate},{}],24:[function(require,module,exports){var dom=require(18);var url=require(22);var fn=require(20);var events=require(19);var string=require(21);var array=require(16);var base64=require(17);var uuid=require(23);module.exports={string:string,array:array,normalizeElement:dom.normalizeElement,isBrowserHttps:url.isBrowserHttps,makeQueryString:url.makeQueryString,decodeQueryString:url.decodeQueryString,getParams:url.getParams,isWhitelistedDomain:url.isWhitelistedDomain,removeEventListener:events.removeEventListener,addEventListener:events.addEventListener,preventDefault:events.preventDefault,bind:fn.bind,isFunction:fn.isFunction,base64ToUtf8:base64.decodeUtf8,uuid:uuid}},{16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23}],25:[function(require,module,exports){"use strict";var utils=require(24);var isFunction=require(166);var Receiver=require(32);var version="1.3.3";var htmlNode,bodyNode;function getElementStyle(element,style){var computedStyle=window.getComputedStyle?getComputedStyle(element):element.currentStyle;return computedStyle[style]}function getMerchantPageDefaultStyles(){return{html:{height:htmlNode.style.height||"",overflow:getElementStyle(htmlNode,"overflow"),position:getElementStyle(htmlNode,"position")},body:{height:bodyNode.style.height||"",overflow:getElementStyle(bodyNode,"overflow")}}}function AuthenticationService(assetsUrl,container){this.assetsUrl=assetsUrl;this.container=container||document.body;this.iframe=null;htmlNode=document.documentElement;bodyNode=document.body;this.merchantPageDefaultStyles=getMerchantPageDefaultStyles()}AuthenticationService.prototype.get=function(response,callback){var self=this,url=this.constructAuthorizationURL(response);if(this.container&&isFunction(this.container)){this.container(url+"&no_style=1")}else{this.insertIframe(url)}new Receiver(function(response){if(!isFunction(self.container)){self.removeIframe()}callback(response)})};AuthenticationService.prototype.removeIframe=function(){if(this.container&&this.container.nodeType&&this.container.nodeType===1){this.container.removeChild(this.iframe)}else if(this.container&&window.jQuery&&this.container instanceof jQuery){$(this.iframe,this.container).remove()}else if(typeof this.container==="string"){document.getElementById(this.container).removeChild(this.iframe)}this.unlockMerchantWindowSize()};AuthenticationService.prototype.insertIframe=function(url){var iframe=document.createElement("iframe");iframe.src=url;this.applyStyles(iframe);this.lockMerchantWindowSize();if(this.container&&this.container.nodeType&&this.container.nodeType===1){this.container.appendChild(iframe)}else if(this.container&&window.jQuery&&this.container instanceof jQuery&&this.container.length!==0){this.container.append(iframe)}else if(typeof this.container==="string"&&document.getElementById(this.container)){document.getElementById(this.container).appendChild(iframe)}else{throw new Error("Unable to find valid container for iframe.")}this.iframe=iframe};AuthenticationService.prototype.applyStyles=function(iframe){iframe.style.position="fixed";iframe.style.top="0";iframe.style.left="0";iframe.style.height="100%";iframe.style.width="100%";iframe.setAttribute("frameborder","0");iframe.setAttribute("allowTransparency","true");iframe.style.border="0";iframe.style.zIndex="99999"};AuthenticationService.prototype.lockMerchantWindowSize=function(){htmlNode.style.overflow="hidden";bodyNode.style.overflow="hidden";bodyNode.style.height="100%"};AuthenticationService.prototype.unlockMerchantWindowSize=function(){var defaultStyles=this.merchantPageDefaultStyles;bodyNode.style.height=defaultStyles.body.height;bodyNode.style.overflow=defaultStyles.body.overflow;htmlNode.style.overflow=defaultStyles.html.overflow};AuthenticationService.prototype.constructAuthorizationURL=function(response){var queryString,parentURL=window.location.href;if(parentURL.indexOf("#")>-1){parentURL=parentURL.split("#")[0]}queryString=utils.makeQueryString({acsUrl:response.acsUrl,pareq:response.pareq,termUrl:response.termUrl+"&three_d_secure_version="+version,md:response.md,parentUrl:parentURL});return this.assetsUrl+"/3ds/"+version+"/html/style_frame?"+queryString};module.exports=AuthenticationService},{166:166,24:24,32:32}],26:[function(require,module,exports){"use strict";var utils=require(24);var bind=require(117);var isFunction=require(166);var AuthenticationService=require(25);var Loader=require(28);function noop(){}function Client(api,options){options=options||{};this.clientToken=options.clientToken;this.container=options.container;this.api=api;this.nonce=null;this._loader=null;this._boundHandleUserClose=bind(this._handleUserClose,this)}Client.prototype.verify=function(data,callback){if(!isFunction(callback)){this.api.sendAnalyticsEvents("3ds.web.no_callback");throw new Error("No suitable callback argument was given")}if(isFunction(data.onUserClose)){this._onUserClose=data.onUserClose}if(isFunction(data.onLookupComplete)){this._onLookupComplete=data.onLookupComplete}if(data.useDefaultLoader===undefined||data.useDefaultLoader===true){this._createDefaultLoader()}var dataRecord={nonce:"",amount:data.amount};var creditCardMetaData=data.creditCard;if(typeof creditCardMetaData==="string"){dataRecord.nonce=creditCardMetaData;this.api.sendAnalyticsEvents("3ds.web.verify.nonce");this.startVerification(dataRecord,callback)}else{var self=this;var boundHandleTokenizeCard=function(err,nonce){if(err){self._removeDefaultLoader();return callback(err)}dataRecord.nonce=nonce;self.startVerification(dataRecord,callback)};this.api.sendAnalyticsEvents("3ds.web.verify.credit_card");this.api.tokenizeCard(creditCardMetaData,boundHandleTokenizeCard)}};Client.prototype.startVerification=function(data,merchantCallback){this.api.lookup3DS(data,bind(this.handleLookupResponse(merchantCallback),this))};Client.prototype.handleLookupResponse=function(merchantCallback){var self=this;return function(errorResponse,lookupResponse){var authenticationService;this._onLookupComplete();if(errorResponse){merchantCallback(errorResponse.error)}else if(lookupResponse.lookup&&lookupResponse.lookup.acsUrl&&lookupResponse.lookup.acsUrl.length>0){self.nonce=lookupResponse.paymentMethod.nonce;authenticationService=new AuthenticationService(this.clientToken.assetsUrl,this.container);authenticationService.get(lookupResponse.lookup,bind(this.handleAuthenticationResponse(merchantCallback),this));this._detachListeners();this._attachListeners()}else{self.nonce=lookupResponse.paymentMethod.nonce;merchantCallback(null,{nonce:self.nonce,verificationDetails:lookupResponse.threeDSecureInfo})}}};Client.prototype.handleAuthenticationResponse=function(merchantCallback){return function(authResponseQueryString){var authResponse,queryParams=utils.decodeQueryString(authResponseQueryString);if(queryParams.user_closed){return}authResponse=JSON.parse(queryParams.auth_response);if(authResponse.success){merchantCallback(null,{nonce:authResponse.paymentMethod.nonce,verificationDetails:authResponse.threeDSecureInfo})}else if(authResponse.threeDSecureInfo&&authResponse.threeDSecureInfo.liabilityShiftPossible){merchantCallback(null,{nonce:this.nonce,verificationDetails:authResponse.threeDSecureInfo})}else{merchantCallback(authResponse.error)}}};Client.prototype._attachListeners=function(){utils.addEventListener(window,"message",this._boundHandleUserClose)};Client.prototype._detachListeners=function(){utils.removeEventListener(window,"message",this._boundHandleUserClose)};Client.prototype._createDefaultLoader=function(){this._loader=new Loader;document.body.appendChild(this._loader.getElement())};Client.prototype._removeDefaultLoader=function(){if(!this._loader){return}var loaderElement=this._loader.getElement();var parentElement=loaderElement.parentNode;if(parentElement){parentElement.removeChild(loaderElement)}this._loader.dispose();this._loader=null};Client.prototype._handleUserClose=function(event){if(event.data==="user_closed=true"){this._onUserClose()}};Client.prototype._onUserClose=noop;Client.prototype._onLookupComplete=function(){this._removeDefaultLoader()};module.exports=Client},{117:117,166:166,24:24,25:25,28:28}],27:[function(require,module,exports){"use strict";var Client=require(26);module.exports={create:function(clientToken,options){var client=new Client(clientToken,options);return client}}},{26:26}],28:[function(require,module,exports){"use strict";var LoaderDisplay=require(29);var LoaderMessage=require(30);var LoaderSpinner=require(31);function Loader(){this._element=document.createElement("div");this._element.style.cssText=this._cssDeclarations;this._display=null;this._initialize()}Loader.prototype._cssDeclarations=["filter:progid:DXImageTransform.Microsoft.Gradient(StartColorStr=#7F000000, EndColorStr=#7F000000)","background-color: rgba(0, 0, 0, 0.5)","display: table","height: 100%","left: 0","position: fixed","right: 0","top: 0","width: 100%","z-index: 99999"].join(";");Loader.prototype.getElement=function(){return this._element};Loader.prototype.dispose=function(){this._display.dispose();this._display=null;this._element=null};Loader.prototype._initialize=function(){var displayObject=new LoaderSpinner;var supportsSvgAnimations=window.SVGElement&&window.SVGAnimateElement&&window.SVGAnimateTransformElement;if(!supportsSvgAnimations){displayObject=new LoaderMessage("Loading...")}this._display=new LoaderDisplay(displayObject);this.getElement().appendChild(this._display.getElement())};module.exports=Loader},{29:29,30:30,31:31}],29:[function(require,module,exports){"use strict";function LoaderDisplay(displayObject){this._element=document.createElement("div");this._element.style.cssText=this._cssDeclarations;this._displayObject=displayObject;this._initialize()}LoaderDisplay.prototype._cssDeclarations=["display: table-cell","vertical-align: middle"].join(";");LoaderDisplay.prototype.getElement=function(){return this._element};LoaderDisplay.prototype.dispose=function(){this._displayObject.dispose();this._displayObject=null;this._element=null};LoaderDisplay.prototype._initialize=function(){this.getElement().appendChild(this._displayObject.getElement())};module.exports=LoaderDisplay},{}],30:[function(require,module,exports){"use strict";function LoaderMessage(text){this._element=document.createElement("div");this._element.style.cssText=this._cssDeclarations;this._element.innerHTML=text}LoaderMessage.prototype._cssDeclarations=["color: #fff","font-family: Helvetica, sans-serif","font-size: 12px","text-align: center"].join(";");LoaderMessage.prototype.getElement=function(){return this._element};LoaderMessage.prototype.dispose=function(){this._element=null};module.exports=LoaderMessage},{}],31:[function(require,module,exports){"use strict";function LoaderSpinner(){this._element=document.createElement("div");this._element.style.cssText=this._cssDeclarations;this._element.innerHTML=this._markup}LoaderSpinner.prototype._cssDeclarations=["height: 36px","margin-left: auto","margin-right: auto","width: 36px"].join(";");LoaderSpinner.prototype._markup=['<svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"','width="100%" height="100%" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve">','  <path fill="#FFF" d="M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z">','    <animateTransform attributeType="xml"','    attributeName="transform"','    type="rotate"','    from="0 25 25"','    to="360 25 25"','    dur="780ms"','    repeatCount="indefinite"','    calcMode="spline"','    keySplines="0.44, 0.22, 0, 1"','    keyTimes="0;1"/>',"  </path>","</svg>"].join("");LoaderSpinner.prototype.getElement=function(){return this._element};LoaderSpinner.prototype.dispose=function(){this._element=null};module.exports=LoaderSpinner},{}],32:[function(require,module,exports){"use strict";var utils=require(24);function Receiver(callback){this.postMessageReceiver(callback);this.hashChangeReceiver(callback)}Receiver.prototype.postMessageReceiver=function(callback){var self=this;this.wrappedCallback=function(event){var data=event.data;if(/^(auth_response=)/.test(data)||data==="user_closed=true"){callback(data);self.stopListening()}};utils.addEventListener(window,"message",this.wrappedCallback)};Receiver.prototype.hashChangeReceiver=function(callback){var hash,originalHash=window.location.hash,self=this;this.poll=setInterval(function(){hash=window.location.hash;if(hash.length>0&&hash!==originalHash){self.stopListening();hash=hash.substring(1,hash.length);callback(hash);if(originalHash.length>0){window.location.hash=originalHash}else{window.location.hash=""}}},10)};Receiver.prototype.stopListening=function(){clearTimeout(this.poll);utils.removeEventListener(window,"message",this.wrappedCallback)};module.exports=Receiver},{24:24}],33:[function(require,module,exports){(function(global){"use strict";var util=require(40);var prepBody=require(39);var parseBody=require(38);var constants=require(35);var isXHRAvailable=global.XMLHttpRequest&&"withCredentials"in new global.XMLHttpRequest;function getRequestObject(){return isXHRAvailable?new XMLHttpRequest:new XDomainRequest}function get(url,attrs,deserializer,callback,timeout){var urlParams=util.createURLParams(url,attrs);makeRequest("GET",urlParams,null,deserializer,callback,timeout)}function post(url,attrs,deserializer,callback,timeout){makeRequest("POST",url,attrs,deserializer,callback,timeout)}function makeRequest(method,url,body,deserializer,callback,timeout){var status,resBody;var req=getRequestObject();callback=callback||function(){};if(isXHRAvailable){req.onreadystatechange=function(){if(req.readyState!==4){return}status=req.status;resBody=parseBody(req.responseText);if(status>=400||status===0){callback.call(null,resBody||{errors:constants.errors.UNKNOWN_ERROR},null)}else if(status>0){callback.call(null,null,deserializer(resBody))}}}else{req.onload=function(){callback.call(null,null,deserializer(parseBody(req.responseText)))};req.onerror=function(){callback.call(null,req.responseText,null)};req.onprogress=function(){};req.ontimeout=function(){callback.call(null,{errors:constants.errors.UNKNOWN_ERROR},null)}}req.open(method,url,true);req.timeout=timeout==null?6e4:timeout;if(isXHRAvailable&&method==="POST"){req.setRequestHeader("Content-Type","application/json")}setTimeout(function(){req.send(prepBody(method,body))},0)}module.exports={get:get,post:post}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{35:35,38:38,39:39,40:40}],34:[function(require,module,exports){"use strict";var JSONPDriver=require(36);var AJAXDriver=require(33);var util=require(40);function chooseRequestDriver(options){var ua=util.getUserAgent();var isAJAXAvailable=!(util.isHTTP()&&/(MSIE\s(8|9))|(Phantom)/.test(ua));options=options||{};if(options.enableCORS&&isAJAXAvailable){return AJAXDriver}else{return JSONPDriver}}module.exports=chooseRequestDriver},{33:33,36:36,40:40}],35:[function(require,module,exports){module.exports={errors:{UNKNOWN_ERROR:"Unknown error",INVALID_TIMEOUT:"Timeout must be a number"}}},{}],36:[function(require,module,exports){"use strict";var JSONP=require(37);var constants=require(35);var timeoutWatchers=[];function deserialize(response,mapper){if(response.status>=400){return[response,null]}else{return[null,mapper(response)]}}function noop(){}function requestWithTimeout(url,attrs,deserializer,method,callback,timeout){var uniqueName;callback=callback||noop;if(timeout==null){timeout=6e4}uniqueName=method(url,attrs,function(data,name){if(timeoutWatchers[name]){clearTimeout(timeoutWatchers[name]);callback.apply(null,deserialize(data,function(d){return deserializer(d)}))}});if(typeof timeout==="number"){timeoutWatchers[uniqueName]=setTimeout(function(){timeoutWatchers[uniqueName]=null;callback.apply(null,[{errors:constants.errors.UNKNOWN_ERROR},null])},timeout)}else{callback.apply(null,[{errors:constants.errors.INVALID_TIMEOUT},null])}}function post(url,attrs,deserializer,callback,timeout){attrs._method="POST";requestWithTimeout(url,attrs,deserializer,JSONP.get,callback,timeout)}function get(url,attrs,deserializer,callback,timeout){requestWithTimeout(url,attrs,deserializer,JSONP.get,callback,timeout)}module.exports={get:get,post:post}},{35:35,37:37}],37:[function(require,module,exports){(function(global){"use strict";var util=require(40);var head,window=global,config={};function load(url,pfnError){var script=document.createElement("script"),done=false;script.src=url;script.async=true;var errorHandler=pfnError||config.error;if(typeof errorHandler==="function"){script.onerror=function(ex){errorHandler({url:url,event:ex})}}script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){done=true;script.onload=script.onreadystatechange=null;if(script&&script.parentNode){script.parentNode.removeChild(script)}}};if(!head){head=document.getElementsByTagName("head")[0]}head.appendChild(script)}function jsonp(url,params,callback,callbackName){var urlParams,key,uniqueName;callbackName=callbackName||config["callbackName"]||"callback";uniqueName=callbackName+"_json"+util.generateUUID();params[callbackName]=uniqueName;urlParams=util.createURLParams(url,params);window[uniqueName]=function(data){callback(data,uniqueName);try{delete window[uniqueName]}catch(e){}window[uniqueName]=null};load(urlParams);return uniqueName}function setDefaults(obj){config=obj}module.exports={get:jsonp,init:setDefaults}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{40:40}],38:[function(require,module,exports){"use strict";module.exports=function(body){try{body=JSON.parse(body)}catch(e){}return body}},{}],39:[function(require,module,exports){"use strict";var isString=require(49);module.exports=function(method,body){if(!isString(method)){throw new Error("Method must be a string")}if(method.toLowerCase()!=="get"&&body!=null){body=isString(body)?body:JSON.stringify(body)}return body}},{49:49}],40:[function(require,module,exports){(function(global){"use strict";var isEmpty=require(42);var isObject=require(48);function isArray(value){return value&&typeof value==="object"&&typeof value.length==="number"&&Object.prototype.toString.call(value)==="[object Array]"||false}function stringify(params,namespace){var query=[],k,v,p;for(p in params){if(!params.hasOwnProperty(p)){continue}v=params[p];if(namespace){if(isArray(params)){k=namespace+"[]"}else{k=namespace+"["+p+"]"}}else{k=p}if(typeof v==="object"){query.push(stringify(v,k))}else{query.push(encodeURIComponent(k)+"="+encodeURIComponent(v))}}return query.join("&")}function generateUUID(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(xORy){var randomHex=Math.floor(Math.random()*16);var uuidHex=xORy==="x"?randomHex:randomHex&3|8;return uuidHex.toString(16)})}function createURLParams(url,params){url=url||"";if(!isEmpty(params)&&isObject(params)){url+=url.indexOf("?")===-1?"?":"";url+=url.indexOf("=")!==-1?"&":"";url+=stringify(params)}return url}function getUserAgent(){return global.navigator.userAgent}function isHTTP(){return global.location.protocol==="http:"}module.exports={isArray:isArray,generateUUID:generateUUID,stringify:stringify,createURLParams:createURLParams,getUserAgent:getUserAgent,isHTTP:isHTTP}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{42:42,48:48}],41:[function(require,module,exports){"use strict";var AJAXDriver=require(33);var JSONPDriver=require(36);var chooseDriver=require(34);var util=require(40);module.exports={AJAXDriver:AJAXDriver,JSONPDriver:JSONPDriver,chooseDriver:chooseDriver,util:util}},{33:33,34:34,36:36,40:40}],42:[function(require,module,exports){var isArguments=require(43),isArray=require(44),isFunction=require(45),isString=require(49),keys=require(46);function isObjectLike(value){return!!value&&typeof value=="object"}var MAX_SAFE_INTEGER=9007199254740991;function baseProperty(key){return function(object){return object==null?undefined:object[key]}}var getLength=baseProperty("length");function isArrayLike(value){return value!=null&&isLength(getLength(value))}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isEmpty(value){if(value==null){return true}if(isArrayLike(value)&&(isArray(value)||isString(value)||isArguments(value)||isObjectLike(value)&&isFunction(value.splice))){return!value.length}return!keys(value).length}module.exports=isEmpty},{43:43,44:44,45:45,46:46,49:49}],43:[function(require,module,exports){var MAX_SAFE_INTEGER=9007199254740991;var argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]";var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var objectToString=objectProto.toString;var propertyIsEnumerable=objectProto.propertyIsEnumerable;function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}function isObjectLike(value){return!!value&&typeof value=="object"}module.exports=isArguments},{}],44:[function(require,module,exports){var arrayTag="[object Array]",funcTag="[object Function]";var reIsHostCtor=/^\[object .+?Constructor\]$/;function isObjectLike(value){return!!value&&typeof value=="object"}var objectProto=Object.prototype;var fnToString=Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objToString=objectProto.toString;var reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var nativeIsArray=getNative(Array,"isArray");var MAX_SAFE_INTEGER=9007199254740991;function getNative(object,key){var value=object==null?undefined:object[key];return isNative(value)?value:undefined}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}var isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag};function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}function isNative(value){if(value==null){return false}if(isFunction(value)){return reIsNative.test(fnToString.call(value))}return isObjectLike(value)&&reIsHostCtor.test(value)}module.exports=isArray},{}],45:[function(require,module,exports){var funcTag="[object Function]",genTag="[object GeneratorFunction]";var objectProto=Object.prototype;var objectToString=objectProto.toString;function isFunction(value){var tag=isObject(value)?objectToString.call(value):"";return tag==funcTag||tag==genTag}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}module.exports=isFunction},{}],46:[function(require,module,exports){var getNative=require(47),isArguments=require(43),isArray=require(44);var reIsUint=/^\d+$/;var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var nativeKeys=getNative(Object,"keys");var MAX_SAFE_INTEGER=9007199254740991;function baseProperty(key){return function(object){return object==null?undefined:object[key]}}var getLength=baseProperty("length");function isArrayLike(value){return value!=null&&isLength(getLength(value))}function isIndex(value,length){value=typeof value=="number"||reIsUint.test(value)?+value:-1;length=length==null?MAX_SAFE_INTEGER:length;return value>-1&&value%1==0&&value<length}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function shimKeys(object){var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length;var allowIndexes=!!length&&isLength(length)&&(isArray(object)||isArguments(object));var index=-1,result=[];while(++index<propsLength){var key=props[index];if(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key)){result.push(key)}}return result}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}var keys=!nativeKeys?shimKeys:function(object){var Ctor=object==null?undefined:object.constructor;if(typeof Ctor=="function"&&Ctor.prototype===object||typeof object!="function"&&isArrayLike(object)){return shimKeys(object)}return isObject(object)?nativeKeys(object):[]};function keysIn(object){if(object==null){return[]}if(!isObject(object)){object=Object(object)}var length=object.length;length=length&&isLength(length)&&(isArray(object)||isArguments(object))&&length||0;var Ctor=object.constructor,index=-1,isProto=typeof Ctor=="function"&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;while(++index<length){result[index]=index+""}for(var key in object){if(!(skipIndexes&&isIndex(key,length))&&!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}module.exports=keys},{43:43,44:44,47:47}],47:[function(require,module,exports){var funcTag="[object Function]";var reIsHostCtor=/^\[object .+?Constructor\]$/;function isObjectLike(value){return!!value&&typeof value=="object"}var objectProto=Object.prototype;var fnToString=Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objToString=objectProto.toString;var reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function getNative(object,key){var value=object==null?undefined:object[key];return isNative(value)?value:undefined}function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}function isNative(value){if(value==null){return false}if(isFunction(value)){return reIsNative.test(fnToString.call(value))}return isObjectLike(value)&&reIsHostCtor.test(value)}module.exports=getNative},{}],48:[function(require,module,exports){function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}module.exports=isObject},{}],49:[function(require,module,exports){var stringTag="[object String]";function isObjectLike(value){return!!value&&typeof value=="object"}var objectProto=Object.prototype;var objToString=objectProto.toString;function isString(value){return typeof value=="string"||isObjectLike(value)&&objToString.call(value)==stringTag}module.exports=isString},{}],50:[function(require,module,exports){arguments[4][16][0].apply(exports,arguments)},{16:16}],51:[function(require,module,exports){arguments[4][17][0].apply(exports,arguments)},{17:17}],52:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{18:18}],53:[function(require,module,exports){arguments[4][19][0].apply(exports,arguments)},{19:19}],54:[function(require,module,exports){arguments[4][20][0].apply(exports,arguments)},{20:20}],55:[function(require,module,exports){arguments[4][21][0].apply(exports,arguments)},{21:21}],56:[function(require,module,exports){arguments[4][22][0].apply(exports,arguments)},{22:22,50:50}],57:[function(require,module,exports){arguments[4][23][0].apply(exports,arguments)},{23:23}],58:[function(require,module,exports){arguments[4][24][0].apply(exports,arguments)},{24:24,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57}],59:[function(require,module,exports){"use strict";var utils=require(73);function MessageBus(host,channel){this.host=host||window;this.channel=channel||null;this.handlers=[];utils.addEventListener(this.host,"message",utils.bind(this.receive,this))}MessageBus.prototype.receive=function(event){var i,message,parsed,type;try{parsed=JSON.parse(event.data)}catch(e){return}type=parsed.type;message=new MessageBus.Message(this,event.source,parsed.data);for(i=0;i<this.handlers.length;i++){if(this.handlers[i].type===type){this.handlers[i].handler(message)}}};MessageBus.prototype.send=function(source,type,data){source.postMessage(JSON.stringify({type:this._namespaceEvent(type),data:data}),"*")};MessageBus.prototype.register=function(type,handler){this.handlers.push({type:this._namespaceEvent(type),handler:handler})};MessageBus.prototype.unregister=function(type,handler){for(var i=this.handlers.length-1;i>=0;i--){if(this.handlers[i].type===type&&this.handlers[i].handler===handler){return this.handlers.splice(i,1)}}};MessageBus.prototype._namespaceEvent=function(eventName){return this.channel?["braintree",this.channel,eventName].join(":"):eventName};MessageBus.Message=function(bus,source,content){this.bus=bus;this.source=source;this.content=content};MessageBus.Message.prototype.reply=function(type,data){this.bus.send(this.source,type,data)};module.exports=MessageBus},{73:73}],60:[function(require,module,exports){"use strict";var utils=require(73);function PubsubClient(bus,target){this.bus=bus;this.target=target;this.handlers=[];this.bus.register("publish",utils.bind(this._handleMessage,this))}PubsubClient.prototype._handleMessage=function(message){var i,content=message.content,handlers=this.handlers[content.channel];if(typeof handlers!=="undefined"){for(i=0;i<handlers.length;i++){handlers[i](content.data)}}};PubsubClient.prototype.publish=function(channel,data){this.bus.send(this.target,"publish",{channel:channel,data:data})};PubsubClient.prototype.subscribe=function(channel,handler){this.handlers[channel]=this.handlers[channel]||[];this.handlers[channel].push(handler)};PubsubClient.prototype.unsubscribe=function(channel,handler){var i,handlers=this.handlers[channel];if(typeof handlers!=="undefined"){for(i=0;i<handlers.length;i++){if(handlers[i]===handler){handlers.splice(i,1)}}}};module.exports=PubsubClient},{73:73}],61:[function(require,module,exports){"use strict";function PubsubServer(bus){this.bus=bus;this.frames=[];this.handlers=[]}PubsubServer.prototype.subscribe=function(channel,handler){this.handlers[channel]=this.handlers[channel]||[];this.handlers[channel].push(handler)};PubsubServer.prototype.registerFrame=function(frame){this.frames.push(frame)};PubsubServer.prototype.unregisterFrame=function(frame){for(var i=0;i<this.frames.length;i++){if(this.frames[i]===frame){this.frames.splice(i,1)}}};PubsubServer.prototype.publish=function(channel,data){var i,handlers=this.handlers[channel];if(typeof handlers!=="undefined"){for(i=0;i<handlers.length;i++){handlers[i](data)}}for(i=0;i<this.frames.length;i++){this.bus.send(this.frames[i],"publish",{channel:channel,data:data})}};PubsubServer.prototype.unsubscribe=function(channel,handler){var i,handlers=this.handlers[channel];if(typeof handlers!=="undefined"){for(i=0;i<handlers.length;i++){if(handlers[i]===handler){handlers.splice(i,1)}}}};module.exports=PubsubServer},{}],62:[function(require,module,exports){"use strict";var utils=require(73);function RPCClient(bus,target){this.bus=bus;this.target=target||window.parent;this.counter=0;this.callbacks={};this.bus.register("rpc_response",utils.bind(this._handleResponse,this))}RPCClient.prototype._handleResponse=function(message){var content=message.content,thisCallback=this.callbacks[content.id];if(typeof thisCallback==="function"){thisCallback.apply(null,content.response);delete this.callbacks[content.id]}};RPCClient.prototype.invoke=function(method,args,callback){var counter=this.counter++;this.callbacks[counter]=callback;this.bus.send(this.target,"rpc_request",{id:counter,method:method,args:args})};module.exports=RPCClient},{73:73}],63:[function(require,module,exports){"use strict";var utils=require(73);function RPCServer(bus){this.bus=bus;this.methods={};this.bus.register("rpc_request",utils.bind(this._handleRequest,this))}RPCServer.prototype._handleRequest=function(message){var reply,content=message.content,args=content.args||[],thisMethod=this.methods[content.method];if(typeof thisMethod==="function"){reply=function(){message.reply("rpc_response",{id:content.id,response:Array.prototype.slice.call(arguments)})};args.push(reply);thisMethod.apply(null,args)}};RPCServer.prototype.reset=function(){this.methods={}};RPCServer.prototype.define=function(method,handler){this.methods[method]=handler};module.exports=RPCServer},{73:73}],64:[function(require,module,exports){var MessageBus=require(59);var PubsubClient=require(60);var PubsubServer=require(61);var RPCClient=require(62);var RPCServer=require(63);module.exports={MessageBus:MessageBus,PubsubClient:PubsubClient,PubsubServer:PubsubServer,RPCClient:RPCClient,RPCServer:RPCServer}},{59:59,60:60,61:61,62:62,63:63}],65:[function(require,module,exports){arguments[4][16][0].apply(exports,arguments)},{16:16}],66:[function(require,module,exports){arguments[4][17][0].apply(exports,arguments)},{17:17}],67:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{18:18}],68:[function(require,module,exports){arguments[4][19][0].apply(exports,arguments)},{19:19}],69:[function(require,module,exports){arguments[4][20][0].apply(exports,arguments)},{20:20}],70:[function(require,module,exports){arguments[4][21][0].apply(exports,arguments)},{21:21}],71:[function(require,module,exports){arguments[4][22][0].apply(exports,arguments)},{22:22,65:65}],72:[function(require,module,exports){arguments[4][23][0].apply(exports,arguments)},{23:23}],73:[function(require,module,exports){arguments[4][24][0].apply(exports,arguments)},{24:24,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72}],74:[function(require,module,exports){arguments[4][16][0].apply(exports,arguments)},{16:16}],75:[function(require,module,exports){arguments[4][17][0].apply(exports,arguments)},{17:17}],76:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{18:18}],77:[function(require,module,exports){arguments[4][19][0].apply(exports,arguments)},{19:19}],78:[function(require,module,exports){arguments[4][20][0].apply(exports,arguments)},{20:20}],79:[function(require,module,exports){arguments[4][21][0].apply(exports,arguments)},{21:21}],80:[function(require,module,exports){arguments[4][22][0].apply(exports,arguments)},{22:22,74:74}],81:[function(require,module,exports){arguments[4][23][0].apply(exports,arguments)},{23:23}],82:[function(require,module,exports){arguments[4][24][0].apply(exports,arguments)},{24:24,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81}],83:[function(require,module,exports){var process=module.exports={};var queue=[];var draining=false;function drainQueue(){if(draining){return}draining=true;var currentQueue;var len=queue.length;while(len){currentQueue=queue;queue=[];var i=-1;while(++i<len){currentQueue[i]()}len=queue.length}draining=false}process.nextTick=function(fun){queue.push(fun);if(!draining){setTimeout(drainQueue,0)}};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],84:[function(require,module,exports){"use strict";module.exports={number:require(85),expirationDate:require(87),expirationMonth:require(88),expirationYear:require(89),cvv:require(86),postalCode:require(92)}},{85:85,86:86,87:87,88:88,89:89,92:92}],85:[function(require,module,exports){"use strict";var isString=require(170);var extend=require(171);var luhn10=require(90);var getCardTypes=require(93);var isNumber=require(168);function verification(card,isPotentiallyValid,isValid){return extend({},{card:card,isPotentiallyValid:isPotentiallyValid,isValid:isValid})}function cardNumber(value){var potentialTypes,cardType,isPotentiallyValid,isValid,i,maxLength;if(isNumber(value)){value=String(value)}if(!isString(value)){return verification(null,false,false)}value=value.replace(/\-|\s/g,"");if(!/^\d*$/.test(value)){return verification(null,false,false)}potentialTypes=getCardTypes(value);if(potentialTypes.length===0){return verification(null,false,false)}else if(potentialTypes.length!==1){return verification(null,true,false)}cardType=potentialTypes[0];if(cardType.type==="unionpay"){isValid=true}else{isValid=luhn10(value)}maxLength=Math.max.apply(null,cardType.lengths);for(i=0;i<cardType.lengths.length;i++){if(cardType.lengths[i]===value.length){isPotentiallyValid=value.length!==maxLength||isValid;return verification(cardType,isPotentiallyValid,isValid)}}return verification(cardType,value.length<maxLength,false)}module.exports=cardNumber},{168:168,170:170,171:171,90:90,93:93}],86:[function(require,module,exports){"use strict";var isString=require(170);var DEFAULT_LENGTH=3;function includes(array,thing){var i=0;for(;i<array.length;i++){if(thing===array[i]){return true}}return false}function max(array){var maximum=DEFAULT_LENGTH;var i=0;for(;i<array.length;i++){maximum=array[i]>maximum?array[i]:maximum}return maximum}function verification(isValid,isPotentiallyValid){return{isValid:isValid,isPotentiallyValid:isPotentiallyValid}}function cvv(value,maxLength){maxLength=maxLength||DEFAULT_LENGTH;maxLength=maxLength instanceof Array?maxLength:[maxLength];if(!isString(value)){return verification(false,false)}if(!/^\d*$/.test(value)){return verification(false,false)}if(includes(maxLength,value.length)){return verification(true,true)}if(value.length<Math.min.apply(null,maxLength)){return verification(false,true)}if(value.length>max(maxLength)){return verification(false,false)}return verification(true,true)}module.exports=cvv},{170:170}],87:[function(require,module,exports){"use strict";var parseDate=require(91);var expirationMonth=require(88);var expirationYear=require(89);var isString=require(170);function verification(isValid,isPotentiallyValid,month,year){return{isValid:isValid,isPotentiallyValid:isPotentiallyValid,month:month,year:year}}function expirationDate(value){var date,monthValid,yearValid,isValidForThisYear;if(isString(value)){value=value.replace(/^(\d\d) (\d\d(\d\d)?)$/,"$1/$2");date=parseDate(value)}else if(value!==null&&typeof value==="object"){date={month:String(value.month),year:String(value.year)}}else{return verification(false,false,null,null)}monthValid=expirationMonth(date.month);yearValid=expirationYear(date.year);if(monthValid.isValid){if(yearValid.isCurrentYear){isValidForThisYear=monthValid.isValidForThisYear;return verification(isValidForThisYear,isValidForThisYear,date.month,date.year)}if(yearValid.isValid){return verification(true,true,date.month,date.year)}}if(monthValid.isPotentiallyValid&&yearValid.isPotentiallyValid){return verification(false,true,null,null)}return verification(false,false,null,null)}module.exports=expirationDate},{170:170,88:88,89:89,91:91}],88:[function(require,module,exports){"use strict";var isString=require(170);function verification(isValid,isPotentiallyValid,isValidForThisYear){return{isValid:isValid,isPotentiallyValid:isPotentiallyValid,isValidForThisYear:isValidForThisYear||false}}function expirationMonth(value){var month,result;var currentMonth=(new Date).getMonth()+1;if(!isString(value)){return verification(false,false)}if(value.replace(/\s/g,"")===""||value==="0"){return verification(false,true)}if(!/^\d*$/.test(value)){return verification(false,false)}month=parseInt(value,10);if(isNaN(value)){return verification(false,false)}result=month>0&&month<13;return verification(result,result,result&&month>=currentMonth)}module.exports=expirationMonth},{170:170}],89:[function(require,module,exports){"use strict";var isString=require(170);var maxYear=19;function verification(isValid,isPotentiallyValid,isCurrentYear){return{isValid:isValid,isPotentiallyValid:isPotentiallyValid,isCurrentYear:isCurrentYear||false}}function expirationYear(value){var currentFirstTwo,currentYear,firstTwo,len,twoDigitYear,valid,isCurrentYear;if(!isString(value)){return verification(false,false)}if(value.replace(/\s/g,"")===""){return verification(false,true)}if(!/^\d*$/.test(value)){return verification(false,false)}len=value.length;if(len<2){return verification(false,true)}currentYear=(new Date).getFullYear();if(len===3){firstTwo=value.slice(0,2);currentFirstTwo=String(currentYear).slice(0,2);return verification(false,firstTwo===currentFirstTwo)}if(len>4){return verification(false,false)}value=parseInt(value,10);twoDigitYear=Number(String(currentYear).substr(2,2));if(len===2){isCurrentYear=twoDigitYear===value;valid=value>=twoDigitYear&&value<=twoDigitYear+maxYear}else if(len===4){isCurrentYear=currentYear===value;valid=value>=currentYear&&value<=currentYear+maxYear}return verification(valid,valid,isCurrentYear)}module.exports=expirationYear},{170:170}],90:[function(require,module,exports){"use strict";function luhn10(identifier){var sum=0;var alt=false;var i=identifier.length-1;var num;while(i>=0){num=parseInt(identifier.charAt(i),10);if(alt){num*=2;if(num>9){num=num%10+1}}alt=!alt;sum+=num;i--}return sum%10===0}module.exports=luhn10},{}],91:[function(require,module,exports){"use strict";var expirationYear=require(89);var isArray=require(165);function parseDate(value){var month,len,year,yearValid;if(/\//.test(value)){value=value.split(/\s*\/\s*/g)}else if(/\s/.test(value)){value=value.split(/ +/g)}if(isArray(value)){return{month:value[0],year:value.slice(1).join()}}len=value[0]==="0"||value.length>5?2:1;if(value[0]==="1"){year=value.substr(1);yearValid=expirationYear(year);if(!yearValid.isPotentiallyValid){len=2}}month=value.substr(0,len);return{month:month,year:value.substr(month.length)}}module.exports=parseDate},{165:165,89:89}],92:[function(require,module,exports){"use strict";var isString=require(170);function verification(isValid,isPotentiallyValid){return{isValid:isValid,isPotentiallyValid:isPotentiallyValid}}function postalCode(value){if(!isString(value)){return verification(false,false)}else if(value.length<4){return verification(false,true)}return verification(true,true)}module.exports=postalCode},{170:170}],93:[function(require,module,exports){"use strict";var types={};var VISA="visa";var MASTERCARD="master-card";var AMERICAN_EXPRESS="american-express";var DINERS_CLUB="diners-club";var DISCOVER="discover";var JCB="jcb";var UNIONPAY="unionpay";var MAESTRO="maestro";var CVV="CVV";var CID="CID";var CVC="CVC";var CVN="CVN";var testOrder=[VISA,MASTERCARD,AMERICAN_EXPRESS,DINERS_CLUB,DISCOVER,JCB,UNIONPAY,MAESTRO];function clone(x){var prefixPattern,exactPattern,dupe;if(!x){return null}prefixPattern=x.prefixPattern.source;exactPattern=x.exactPattern.source;dupe=JSON.parse(JSON.stringify(x));dupe.prefixPattern=prefixPattern;dupe.exactPattern=exactPattern;return dupe}types[VISA]={niceType:"Visa",type:VISA,prefixPattern:/^4$/,exactPattern:/^4\d*$/,gaps:[4,8,12],lengths:[16],code:{name:CVV,size:3}};types[MASTERCARD]={niceType:"MasterCard",type:MASTERCARD,prefixPattern:/^(5|5[1-5]|2|22|222|222[1-9]|2[3-6]|27[0-1]|2720)$/,exactPattern:/^(5[1-5]|222[1-9]|22[3-9]|2[3-6]|27[0-1]|2720)\d*$/,gaps:[4,8,12],lengths:[16],code:{name:CVC,size:3}};types[AMERICAN_EXPRESS]={niceType:"American Express",type:AMERICAN_EXPRESS,prefixPattern:/^(3|34|37)$/,exactPattern:/^3[47]\d*$/,isAmex:true,gaps:[4,10],lengths:[15],code:{name:CID,size:4}};types[DINERS_CLUB]={niceType:"Diners Club",type:DINERS_CLUB,prefixPattern:/^(3|3[0689]|30[0-5])$/,exactPattern:/^3(0[0-5]|[689])\d*$/,gaps:[4,10],lengths:[14],code:{name:CVV,size:3}};types[DISCOVER]={niceType:"Discover",type:DISCOVER,prefixPattern:/^(6|60|601|6011|65|64|64[4-9])$/,exactPattern:/^(6011|65|64[4-9])\d*$/,gaps:[4,8,12],lengths:[16,19],code:{name:CID,size:3}};types[JCB]={niceType:"JCB",type:JCB,prefixPattern:/^(2|21|213|2131|1|18|180|1800|3|35)$/,exactPattern:/^(2131|1800|35)\d*$/,gaps:[4,8,12],lengths:[16],code:{name:CVV,size:3}};types[UNIONPAY]={niceType:"UnionPay",type:UNIONPAY,prefixPattern:/^(6|62)$/,exactPattern:/^62\d*$/,gaps:[4,8,12],lengths:[16,17,18,19],code:{name:CVN,size:3}};types[MAESTRO]={niceType:"Maestro",type:MAESTRO,prefixPattern:/^(5|5[06-9]|6\d*)$/,exactPattern:/^5[06-9]\d*$/,gaps:[4,8,12],lengths:[12,13,14,15,16,17,18,19],code:{name:CVC,size:3}};function creditCardType(cardNumber){var type,value,i;var prefixResults=[];var exactResults=[];if(!(typeof cardNumber==="string"||cardNumber instanceof String)){return[]}for(i=0;i<testOrder.length;i++){type=testOrder[i];value=types[type];if(cardNumber.length===0){prefixResults.push(clone(value));continue}if(value.exactPattern.test(cardNumber)){exactResults.push(clone(value))}else if(value.prefixPattern.test(cardNumber)){prefixResults.push(clone(value))}}return exactResults.length?exactResults:prefixResults}creditCardType.getTypeInfo=function(type){return clone(types[type])};creditCardType.types={VISA:VISA,MASTERCARD:MASTERCARD,AMERICAN_EXPRESS:AMERICAN_EXPRESS,DINERS_CLUB:DINERS_CLUB,DISCOVER:DISCOVER,JCB:JCB,UNIONPAY:UNIONPAY,MAESTRO:MAESTRO};module.exports=creditCardType},{}],94:[function(require,module,exports){"use strict";var batchExecuteFunctions=require(95);var fnUtil=require(96);function Destructor(){this._teardownRegistry=[]}Destructor.prototype.registerFunctionForTeardown=function(fn){if(fnUtil.isFunction(fn)){this._teardownRegistry.push(fn)}};Destructor.prototype.teardown=function(callback){batchExecuteFunctions(this._teardownRegistry,fnUtil.bind(function(err){this._teardownRegistry=[];if(fnUtil.isFunction(callback)){callback(err)}},this))};module.exports=Destructor},{95:95,96:96}],95:[function(require,module,exports){"use strict";function call(fn,callback){var isSync=fn.length===0;var wrappedCallback;if(isSync){fn();callback(null)}else{wrappedCallback=once(callback);fn(wrappedCallback)}}function once(fn){var called=false;return function(){if(!called){called=true;fn.apply(this,arguments)}}}module.exports=function(functions,callback){var length=functions.length;var remaining=length;if(length===0){callback(null);return}for(var i=0;i<length;i++){call(functions[i],function(err){if(err){callback(err);return}remaining-=1;if(remaining===0){callback(null)}})}}},{}],96:[function(require,module,exports){arguments[4][20][0].apply(exports,arguments)},{20:20}],97:[function(require,module,exports){(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define(factory)}else if(typeof exports==="object"){module.exports=factory()}else{root.returnExports=factory()}})(this,function(){var call=Function.prototype.call;var prototypeOfObject=Object.prototype;var owns=call.bind(prototypeOfObject.hasOwnProperty);var defineGetter;var defineSetter;var lookupGetter;var lookupSetter;var supportsAccessors=owns(prototypeOfObject,"__defineGetter__");if(supportsAccessors){defineGetter=call.bind(prototypeOfObject.__defineGetter__);defineSetter=call.bind(prototypeOfObject.__defineSetter__);lookupGetter=call.bind(prototypeOfObject.__lookupGetter__);lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)}if(!Object.getPrototypeOf){Object.getPrototypeOf=function getPrototypeOf(object){var proto=object.__proto__;if(proto||proto===null){return proto}else if(object.constructor){return object.constructor.prototype}else{return prototypeOfObject}}}var doesGetOwnPropertyDescriptorWork=function doesGetOwnPropertyDescriptorWork(object){try{object.sentinel=0;return Object.getOwnPropertyDescriptor(object,"sentinel").value===0}catch(exception){return false}};if(Object.defineProperty){var getOwnPropertyDescriptorWorksOnObject=doesGetOwnPropertyDescriptorWork({});var getOwnPropertyDescriptorWorksOnDom=typeof document==="undefined"||doesGetOwnPropertyDescriptorWork(document.createElement("div"));if(!getOwnPropertyDescriptorWorksOnDom||!getOwnPropertyDescriptorWorksOnObject){var getOwnPropertyDescriptorFallback=Object.getOwnPropertyDescriptor}}if(!Object.getOwnPropertyDescriptor||getOwnPropertyDescriptorFallback){var ERR_NON_OBJECT="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function getOwnPropertyDescriptor(object,property){if(typeof object!=="object"&&typeof object!=="function"||object===null){throw new TypeError(ERR_NON_OBJECT+object)}if(getOwnPropertyDescriptorFallback){try{return getOwnPropertyDescriptorFallback.call(Object,object,property)}catch(exception){}}var descriptor;if(!owns(object,property)){return descriptor}descriptor={enumerable:true,configurable:true};if(supportsAccessors){var prototype=object.__proto__;var notPrototypeOfObject=object!==prototypeOfObject;if(notPrototypeOfObject){object.__proto__=prototypeOfObject}var getter=lookupGetter(object,property);var setter=lookupSetter(object,property);if(notPrototypeOfObject){object.__proto__=prototype}if(getter||setter){if(getter){descriptor.get=getter}if(setter){descriptor.set=setter}return descriptor}}descriptor.value=object[property];descriptor.writable=true;return descriptor}}if(!Object.getOwnPropertyNames){Object.getOwnPropertyNames=function getOwnPropertyNames(object){return Object.keys(object)}}if(!Object.create){var createEmpty;var supportsProto=!({__proto__:null}instanceof Object);var shouldUseActiveX=function shouldUseActiveX(){if(!document.domain){return false}try{return!!new ActiveXObject("htmlfile")}catch(exception){return false}};var getEmptyViaActiveX=function getEmptyViaActiveX(){var empty;var xDoc;xDoc=new ActiveXObject("htmlfile");xDoc.write("<script><\/script>");xDoc.close();empty=xDoc.parentWindow.Object.prototype;xDoc=null;return empty};var getEmptyViaIFrame=function getEmptyViaIFrame(){var iframe=document.createElement("iframe");var parent=document.body||document.documentElement;var empty;iframe.style.display="none";parent.appendChild(iframe);iframe.src="javascript:";empty=iframe.contentWindow.Object.prototype;parent.removeChild(iframe);iframe=null;return empty};if(supportsProto||typeof document==="undefined"){createEmpty=function(){return{__proto__:null}}}else{createEmpty=function(){var empty=shouldUseActiveX()?getEmptyViaActiveX():getEmptyViaIFrame();delete empty.constructor;delete empty.hasOwnProperty;delete empty.propertyIsEnumerable;delete empty.isPrototypeOf;delete empty.toLocaleString;delete empty.toString;delete empty.valueOf;empty.__proto__=null;var Empty=function Empty(){};Empty.prototype=empty;createEmpty=function(){return new Empty};return new Empty}}Object.create=function create(prototype,properties){var object;var Type=function Type(){};if(prototype===null){object=createEmpty()}else{if(typeof prototype!=="object"&&typeof prototype!=="function"){throw new TypeError("Object prototype may only be an Object or null")}Type.prototype=prototype;object=new Type;object.__proto__=prototype}if(properties!==void 0){Object.defineProperties(object,properties)}return object}}var doesDefinePropertyWork=function doesDefinePropertyWork(object){try{Object.defineProperty(object,"sentinel",{});return"sentinel"in object}catch(exception){return false}};if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({});var definePropertyWorksOnDom=typeof document==="undefined"||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom){var definePropertyFallback=Object.defineProperty,definePropertiesFallback=Object.defineProperties}}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR="Property description must be an object: ";var ERR_NON_OBJECT_TARGET="Object.defineProperty called on non-object: ";var ERR_ACCESSORS_NOT_SUPPORTED="getters & setters can not be defined on this javascript engine";Object.defineProperty=function defineProperty(object,property,descriptor){if(typeof object!=="object"&&typeof object!=="function"||object===null){throw new TypeError(ERR_NON_OBJECT_TARGET+object)}if(typeof descriptor!=="object"&&typeof descriptor!=="function"||descriptor===null){throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor)}if(definePropertyFallback){try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}}if("value"in descriptor){if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject;delete object[property];object[property]=descriptor.value;object.__proto__=prototype}else{object[property]=descriptor.value}}else{if(!supportsAccessors){throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED)}if("get"in descriptor){defineGetter(object,property,descriptor.get)}if("set"in descriptor){defineSetter(object,property,descriptor.set)}}return object}}if(!Object.defineProperties||definePropertiesFallback){Object.defineProperties=function defineProperties(object,properties){if(definePropertiesFallback){try{return definePropertiesFallback.call(Object,object,properties)}catch(exception){}}Object.keys(properties).forEach(function(property){if(property!=="__proto__"){Object.defineProperty(object,property,properties[property])}});return object}}if(!Object.seal){Object.seal=function seal(object){if(Object(object)!==object){throw new TypeError("Object.seal can only be called on Objects.")}return object}}if(!Object.freeze){Object.freeze=function freeze(object){if(Object(object)!==object){throw new TypeError("Object.freeze can only be called on Objects.")}return object}}try{Object.freeze(function(){})}catch(exception){Object.freeze=function(freezeObject){return function freeze(object){if(typeof object==="function"){return object}else{return freezeObject(object)}}}(Object.freeze)}if(!Object.preventExtensions){Object.preventExtensions=function preventExtensions(object){if(Object(object)!==object){throw new TypeError("Object.preventExtensions can only be called on Objects.")}return object}}if(!Object.isSealed){Object.isSealed=function isSealed(object){if(Object(object)!==object){throw new TypeError("Object.isSealed can only be called on Objects.")}return false}}if(!Object.isFrozen){Object.isFrozen=function isFrozen(object){if(Object(object)!==object){throw new TypeError("Object.isFrozen can only be called on Objects.")}return false}}if(!Object.isExtensible){Object.isExtensible=function isExtensible(object){if(Object(object)!==object){throw new TypeError("Object.isExtensible can only be called on Objects.")}var name="";while(owns(object,name)){name+="?"}object[name]=true;var returnValue=owns(object,name);delete object[name];return returnValue}}})},{}],98:[function(require,module,exports){(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define(factory)}else if(typeof exports==="object"){module.exports=factory()}else{root.returnExports=factory()}})(this,function(){var ArrayPrototype=Array.prototype;var ObjectPrototype=Object.prototype;var FunctionPrototype=Function.prototype;var StringPrototype=String.prototype;var NumberPrototype=Number.prototype;var array_slice=ArrayPrototype.slice;var array_splice=ArrayPrototype.splice;var array_push=ArrayPrototype.push;var array_unshift=ArrayPrototype.unshift;var array_concat=ArrayPrototype.concat;var call=FunctionPrototype.call;var to_string=ObjectPrototype.toString;var isArray=Array.isArray||function isArray(obj){return to_string.call(obj)==="[object Array]"};var hasToStringTag=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var isCallable;var fnToStr=Function.prototype.toString,tryFunctionObject=function tryFunctionObject(value){try{fnToStr.call(value);return true}catch(e){return false}},fnClass="[object Function]",genClass="[object GeneratorFunction]";isCallable=function isCallable(value){if(typeof value!=="function"){return false}if(hasToStringTag){return tryFunctionObject(value)}var strClass=to_string.call(value);return strClass===fnClass||strClass===genClass};var isRegex;var regexExec=RegExp.prototype.exec,tryRegexExec=function tryRegexExec(value){try{regexExec.call(value);return true}catch(e){return false}},regexClass="[object RegExp]";isRegex=function isRegex(value){if(typeof value!=="object"){return false}return hasToStringTag?tryRegexExec(value):to_string.call(value)===regexClass};var isString;var strValue=String.prototype.valueOf,tryStringObject=function tryStringObject(value){try{strValue.call(value);return true}catch(e){return false}},stringClass="[object String]";isString=function isString(value){if(typeof value==="string"){return true}if(typeof value!=="object"){return false}return hasToStringTag?tryStringObject(value):to_string.call(value)===stringClass};var isArguments=function isArguments(value){var str=to_string.call(value);var isArgs=str==="[object Arguments]";if(!isArgs){isArgs=!isArray(value)&&value!==null&&typeof value==="object"&&typeof value.length==="number"&&value.length>=0&&isCallable(value.callee)}return isArgs};var defineProperties=function(has){var supportsDescriptors=Object.defineProperty&&function(){try{var obj={};Object.defineProperty(obj,"x",{enumerable:false,value:obj});for(var _ in obj){return false}return obj.x===obj}catch(e){return false}}();var defineProperty;if(supportsDescriptors){defineProperty=function(object,name,method,forceAssign){if(!forceAssign&&name in object){return}Object.defineProperty(object,name,{configurable:true,enumerable:false,writable:true,value:method})}}else{defineProperty=function(object,name,method,forceAssign){if(!forceAssign&&name in object){return}object[name]=method}}return function defineProperties(object,map,forceAssign){for(var name in map){if(has.call(map,name)){defineProperty(object,name,map[name],forceAssign)}}}}(ObjectPrototype.hasOwnProperty);var isPrimitive=function isPrimitive(input){var type=typeof input;return input===null||type!=="object"&&type!=="function"};var ES={ToInteger:function ToInteger(num){var n=+num;if(n!==n){n=0}else if(n!==0&&n!==1/0&&n!==-(1/0)){n=(n>0||-1)*Math.floor(Math.abs(n))}return n},ToPrimitive:function ToPrimitive(input){var val,valueOf,toStr;if(isPrimitive(input)){return input}valueOf=input.valueOf;if(isCallable(valueOf)){val=valueOf.call(input);if(isPrimitive(val)){return val}}toStr=input.toString;if(isCallable(toStr)){val=toStr.call(input);if(isPrimitive(val)){return val}}throw new TypeError},ToObject:function(o){if(o==null){throw new TypeError("can't convert "+o+" to object")}return Object(o)},ToUint32:function ToUint32(x){return x>>>0}};var Empty=function Empty(){};defineProperties(FunctionPrototype,{bind:function bind(that){var target=this;if(!isCallable(target)){throw new TypeError("Function.prototype.bind called on incompatible "+target)}var args=array_slice.call(arguments,1);var bound;var binder=function(){if(this instanceof bound){var result=target.apply(this,array_concat.call(args,array_slice.call(arguments)));if(Object(result)===result){return result}return this}else{return target.apply(that,array_concat.call(args,array_slice.call(arguments)))}};var boundLength=Math.max(0,target.length-args.length);var boundArgs=[];for(var i=0;i<boundLength;i++){boundArgs.push("$"+i)}bound=Function("binder","return function ("+boundArgs.join(",")+"){ return binder.apply(this, arguments); }")(binder);if(target.prototype){Empty.prototype=target.prototype;bound.prototype=new Empty;Empty.prototype=null}return bound}});var owns=call.bind(ObjectPrototype.hasOwnProperty);var spliceNoopReturnsEmptyArray=function(){var a=[1,2];var result=a.splice();return a.length===2&&isArray(result)&&result.length===0}();defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){if(arguments.length===0){return[]}else{return array_splice.apply(this,arguments)}}},!spliceNoopReturnsEmptyArray);var spliceWorksWithEmptyObject=function(){var obj={};ArrayPrototype.splice.call(obj,0,0,1);return obj.length===1}();defineProperties(ArrayPrototype,{splice:function splice(start,deleteCount){if(arguments.length===0){return[]}var args=arguments;this.length=Math.max(ES.ToInteger(this.length),0);if(arguments.length>0&&typeof deleteCount!=="number"){args=array_slice.call(arguments);if(args.length<2){args.push(this.length-start)}else{args[1]=ES.ToInteger(deleteCount)}}return array_splice.apply(this,args)}},!spliceWorksWithEmptyObject);var hasUnshiftReturnValueBug=[].unshift(0)!==1;defineProperties(ArrayPrototype,{unshift:function(){array_unshift.apply(this,arguments);return this.length}},hasUnshiftReturnValueBug);defineProperties(Array,{isArray:isArray});var boxedString=Object("a");var splitString=boxedString[0]!=="a"||!(0 in boxedString);var properlyBoxesContext=function properlyBoxed(method){var properlyBoxesNonStrict=true;var properlyBoxesStrict=true;if(method){method.call("foo",function(_,__,context){if(typeof context!=="object"){properlyBoxesNonStrict=false}});method.call([1],function(){"use strict";properlyBoxesStrict=typeof this==="string"},"x")}return!!method&&properlyBoxesNonStrict&&properlyBoxesStrict};defineProperties(ArrayPrototype,{forEach:function forEach(callbackfn){var object=ES.ToObject(this);var self=splitString&&isString(this)?this.split(""):object;var i=-1;var length=self.length>>>0;var T;if(arguments.length>1){T=arguments[1]}if(!isCallable(callbackfn)){throw new TypeError("Array.prototype.forEach callback must be a function")}while(++i<length){if(i in self){if(typeof T!=="undefined"){callbackfn.call(T,self[i],i,object)}else{callbackfn(self[i],i,object)}}}}},!properlyBoxesContext(ArrayPrototype.forEach));defineProperties(ArrayPrototype,{map:function map(callbackfn){var object=ES.ToObject(this);var self=splitString&&isString(this)?this.split(""):object;var length=self.length>>>0;var result=Array(length);var T;if(arguments.length>1){T=arguments[1]}if(!isCallable(callbackfn)){throw new TypeError("Array.prototype.map callback must be a function")}for(var i=0;i<length;i++){if(i in self){if(typeof T!=="undefined"){result[i]=callbackfn.call(T,self[i],i,object)}else{result[i]=callbackfn(self[i],i,object)}}}return result}},!properlyBoxesContext(ArrayPrototype.map));defineProperties(ArrayPrototype,{filter:function filter(callbackfn){var object=ES.ToObject(this);var self=splitString&&isString(this)?this.split(""):object;var length=self.length>>>0;var result=[];var value;var T;if(arguments.length>1){T=arguments[1]}if(!isCallable(callbackfn)){throw new TypeError("Array.prototype.filter callback must be a function")}for(var i=0;i<length;i++){if(i in self){value=self[i];if(typeof T==="undefined"?callbackfn(value,i,object):callbackfn.call(T,value,i,object)){result.push(value)}}}return result}},!properlyBoxesContext(ArrayPrototype.filter));defineProperties(ArrayPrototype,{every:function every(callbackfn){var object=ES.ToObject(this);var self=splitString&&isString(this)?this.split(""):object;var length=self.length>>>0;var T;if(arguments.length>1){T=arguments[1]}if(!isCallable(callbackfn)){throw new TypeError("Array.prototype.every callback must be a function")}for(var i=0;i<length;i++){if(i in self&&!(typeof T==="undefined"?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object))){return false}}return true}},!properlyBoxesContext(ArrayPrototype.every));defineProperties(ArrayPrototype,{some:function some(callbackfn){var object=ES.ToObject(this);var self=splitString&&isString(this)?this.split(""):object;var length=self.length>>>0;var T;if(arguments.length>1){T=arguments[1]}if(!isCallable(callbackfn)){throw new TypeError("Array.prototype.some callback must be a function")}for(var i=0;i<length;i++){if(i in self&&(typeof T==="undefined"?callbackfn(self[i],i,object):callbackfn.call(T,self[i],i,object))){return true}}return false}},!properlyBoxesContext(ArrayPrototype.some));var reduceCoercesToObject=false;if(ArrayPrototype.reduce){reduceCoercesToObject=typeof ArrayPrototype.reduce.call("es5",function(_,__,___,list){return list})==="object"}defineProperties(ArrayPrototype,{reduce:function reduce(callbackfn){var object=ES.ToObject(this);var self=splitString&&isString(this)?this.split(""):object;var length=self.length>>>0;if(!isCallable(callbackfn)){throw new TypeError("Array.prototype.reduce callback must be a function")}if(length===0&&arguments.length===1){throw new TypeError("reduce of empty array with no initial value")}var i=0;var result;if(arguments.length>=2){result=arguments[1]}else{do{if(i in self){result=self[i++];break}if(++i>=length){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;i<length;i++){if(i in self){result=callbackfn(result,self[i],i,object)}}return result}},!reduceCoercesToObject);var reduceRightCoercesToObject=false;if(ArrayPrototype.reduceRight){reduceRightCoercesToObject=typeof ArrayPrototype.reduceRight.call("es5",function(_,__,___,list){return list})==="object"}defineProperties(ArrayPrototype,{reduceRight:function reduceRight(callbackfn){var object=ES.ToObject(this);var self=splitString&&isString(this)?this.split(""):object;var length=self.length>>>0;if(!isCallable(callbackfn)){throw new TypeError("Array.prototype.reduceRight callback must be a function")}if(length===0&&arguments.length===1){throw new TypeError("reduceRight of empty array with no initial value")}var result;var i=length-1;if(arguments.length>=2){result=arguments[1]}else{do{if(i in self){result=self[i--];break}if(--i<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(i<0){return result}do{if(i in self){result=callbackfn(result,self[i],i,object)}}while(i--);return result}},!reduceRightCoercesToObject);var hasFirefox2IndexOfBug=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;defineProperties(ArrayPrototype,{indexOf:function indexOf(searchElement){var self=splitString&&isString(this)?this.split(""):ES.ToObject(this);var length=self.length>>>0;if(length===0){return-1}var i=0;if(arguments.length>1){i=ES.ToInteger(arguments[1])}i=i>=0?i:Math.max(0,length+i);for(;i<length;i++){if(i in self&&self[i]===searchElement){return i}}return-1}},hasFirefox2IndexOfBug);var hasFirefox2LastIndexOfBug=Array.prototype.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;defineProperties(ArrayPrototype,{lastIndexOf:function lastIndexOf(searchElement){var self=splitString&&isString(this)?this.split(""):ES.ToObject(this);var length=self.length>>>0;if(length===0){return-1}var i=length-1;if(arguments.length>1){i=Math.min(i,ES.ToInteger(arguments[1]))}i=i>=0?i:length-Math.abs(i);for(;i>=0;i--){if(i in self&&searchElement===self[i]){return i}}return-1}},hasFirefox2LastIndexOfBug);var hasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString"),hasProtoEnumBug=function(){}.propertyIsEnumerable("prototype"),hasStringEnumBug=!owns("x","0"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;defineProperties(Object,{keys:function keys(object){var isFn=isCallable(object),isArgs=isArguments(object),isObject=object!==null&&typeof object==="object",isStr=isObject&&isString(object);if(!isObject&&!isFn&&!isArgs){throw new TypeError("Object.keys called on a non-object")}var theKeys=[];var skipProto=hasProtoEnumBug&&isFn;if(isStr&&hasStringEnumBug||isArgs){for(var i=0;i<object.length;++i){theKeys.push(String(i))}}if(!isArgs){for(var name in object){if(!(skipProto&&name==="prototype")&&owns(object,name)){theKeys.push(String(name))}}}if(hasDontEnumBug){var ctor=object.constructor,skipConstructor=ctor&&ctor.prototype===object;for(var j=0;j<dontEnumsLength;j++){var dontEnum=dontEnums[j];if(!(skipConstructor&&dontEnum==="constructor")&&owns(object,dontEnum)){theKeys.push(dontEnum)}}}return theKeys}});var keysWorksWithArguments=Object.keys&&function(){return Object.keys(arguments).length===2}(1,2);var originalKeys=Object.keys;defineProperties(Object,{keys:function keys(object){if(isArguments(object)){return originalKeys(ArrayPrototype.slice.call(object))}else{return originalKeys(object)}}},!keysWorksWithArguments);var negativeDate=-621987552e5;var negativeYearString="-000001";var hasNegativeDateBug=Date.prototype.toISOString&&new Date(negativeDate).toISOString().indexOf(negativeYearString)===-1;defineProperties(Date.prototype,{toISOString:function toISOString(){var result,length,value,year,month;if(!isFinite(this)){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}year=this.getUTCFullYear();month=this.getUTCMonth();year+=Math.floor(month/12);month=(month%12+12)%12;result=[month+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()];year=(year<0?"-":year>9999?"+":"")+("00000"+Math.abs(year)).slice(0<=year&&year<=9999?-4:-6);length=result.length;while(length--){value=result[length];if(value<10){result[length]="0"+value}}return year+"-"+result.slice(0,2).join("-")+"T"+result.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"}},hasNegativeDateBug);var dateToJSONIsSupported=function(){try{return Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(negativeDate).toJSON().indexOf(negativeYearString)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(e){return false}}();if(!dateToJSONIsSupported){Date.prototype.toJSON=function toJSON(key){var O=Object(this);var tv=ES.ToPrimitive(O);if(typeof tv==="number"&&!isFinite(tv)){return null}var toISO=O.toISOString;if(!isCallable(toISO)){throw new TypeError("toISOString property is not callable")}return toISO.call(O)}}var supportsExtendedYears=Date.parse("+033658-09-27T01:46:40.000Z")===1e15;var acceptsInvalidDates=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));var doesNotParseY2KNewYear=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(!Date.parse||doesNotParseY2KNewYear||acceptsInvalidDates||!supportsExtendedYears){Date=function(NativeDate){var DateShim=function Date(Y,M,D,h,m,s,ms){var length=arguments.length;var date;if(this instanceof NativeDate){date=length===1&&String(Y)===Y?new NativeDate(DateShim.parse(Y)):length>=7?new NativeDate(Y,M,D,h,m,s,ms):length>=6?new NativeDate(Y,M,D,h,m,s):length>=5?new NativeDate(Y,M,D,h,m):length>=4?new NativeDate(Y,M,D,h):length>=3?new NativeDate(Y,M,D):length>=2?new NativeDate(Y,M):length>=1?new NativeDate(Y):new NativeDate}else{date=NativeDate.apply(this,arguments)}defineProperties(date,{constructor:DateShim},true);return date};var isoDateExpression=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:(\\.\\d{1,}))?"+")?"+"("+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");var months=[0,31,59,90,120,151,181,212,243,273,304,334,365];var dayFromMonth=function dayFromMonth(year,month){var t=month>1?1:0;return months[month]+Math.floor((year-1969+t)/4)-Math.floor((year-1901+t)/100)+Math.floor((year-1601+t)/400)+365*(year-1970)};var toUTC=function toUTC(t){return Number(new NativeDate(1970,0,1,0,0,0,t))};for(var key in NativeDate){if(owns(NativeDate,key)){DateShim[key]=NativeDate[key]}}defineProperties(DateShim,{now:NativeDate.now,UTC:NativeDate.UTC},true);DateShim.prototype=NativeDate.prototype;defineProperties(DateShim.prototype,{constructor:DateShim},true);DateShim.parse=function parse(string){var match=isoDateExpression.exec(string);if(match){var year=Number(match[1]),month=Number(match[2]||1)-1,day=Number(match[3]||1)-1,hour=Number(match[4]||0),minute=Number(match[5]||0),second=Number(match[6]||0),millisecond=Math.floor(Number(match[7]||0)*1e3),isLocalTime=Boolean(match[4]&&!match[8]),signOffset=match[9]==="-"?1:-1,hourOffset=Number(match[10]||0),minuteOffset=Number(match[11]||0),result;if(hour<(minute>0||second>0||millisecond>0?24:25)&&minute<60&&second<60&&millisecond<1e3&&month>-1&&month<12&&hourOffset<24&&minuteOffset<60&&day>-1&&day<dayFromMonth(year,month+1)-dayFromMonth(year,month)){result=((dayFromMonth(year,month)+day)*24+hour+hourOffset*signOffset)*60;result=((result+minute+minuteOffset*signOffset)*60+second)*1e3+millisecond;if(isLocalTime){result=toUTC(result)}if(-864e13<=result&&result<=864e13){return result}}return NaN}return NativeDate.parse.apply(this,arguments)};return DateShim}(Date)}if(!Date.now){Date.now=function now(){return(new Date).getTime()}}var hasToFixedBugs=NumberPrototype.toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||(0xde0b6b3a7640080).toFixed(0)!=="1000000000000000128");var toFixedHelpers={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(n,c){var i=-1;var c2=c;while(++i<toFixedHelpers.size){c2+=n*toFixedHelpers.data[i];toFixedHelpers.data[i]=c2%toFixedHelpers.base;c2=Math.floor(c2/toFixedHelpers.base)}},divide:function divide(n){var i=toFixedHelpers.size,c=0;while(--i>=0){c+=toFixedHelpers.data[i];toFixedHelpers.data[i]=Math.floor(c/n);c=c%n*toFixedHelpers.base}},numToString:function numToString(){var i=toFixedHelpers.size;var s="";while(--i>=0){if(s!==""||i===0||toFixedHelpers.data[i]!==0){var t=String(toFixedHelpers.data[i]);if(s===""){s=t}else{s+="0000000".slice(0,7-t.length)+t}}}return s},pow:function pow(x,n,acc){return n===0?acc:n%2===1?pow(x,n-1,acc*x):pow(x*x,n/2,acc)},log:function log(x){var n=0;var x2=x;while(x2>=4096){n+=12;x2/=4096}while(x2>=2){n+=1;x2/=2}return n}};defineProperties(NumberPrototype,{toFixed:function toFixed(fractionDigits){var f,x,s,m,e,z,j,k;f=Number(fractionDigits);f=f!==f?0:Math.floor(f);if(f<0||f>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}x=Number(this);if(x!==x){return"NaN"}if(x<=-1e21||x>=1e21){return String(x)}s="";if(x<0){s="-";x=-x}m="0";if(x>1e-21){e=toFixedHelpers.log(x*toFixedHelpers.pow(2,69,1))-69;z=e<0?x*toFixedHelpers.pow(2,-e,1):x/toFixedHelpers.pow(2,e,1);z*=4503599627370496;e=52-e;if(e>0){toFixedHelpers.multiply(0,z);j=f;while(j>=7){toFixedHelpers.multiply(1e7,0);j-=7}toFixedHelpers.multiply(toFixedHelpers.pow(10,j,1),0);j=e-1;while(j>=23){toFixedHelpers.divide(1<<23);j-=23}toFixedHelpers.divide(1<<j);toFixedHelpers.multiply(1,1);toFixedHelpers.divide(2);m=toFixedHelpers.numToString()}else{toFixedHelpers.multiply(0,z);toFixedHelpers.multiply(1<<-e,0);m=toFixedHelpers.numToString()+"0.00000000000000000000".slice(2,2+f)}}if(f>0){k=m.length;if(k<=f){m=s+"0.0000000000000000000".slice(0,f-k+2)+m}else{m=s+m.slice(0,k-f)+"."+m.slice(k-f)}}else{m=s+m}return m}},hasToFixedBugs);var string_split=StringPrototype.split;if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var compliantExecNpcg=typeof/()??/.exec("")[1]==="undefined";StringPrototype.split=function(separator,limit){var string=this;if(typeof separator==="undefined"&&limit===0){return[]}if(!isRegex(separator)){return string_split.call(this,separator,limit)}var output=[];var flags=(separator.ignoreCase?"i":"")+(separator.multiline?"m":"")+(separator.extended?"x":"")+(separator.sticky?"y":""),lastLastIndex=0,separator2,match,lastIndex,lastLength;var separatorCopy=new RegExp(separator.source,flags+"g");string+="";if(!compliantExecNpcg){separator2=new RegExp("^"+separatorCopy.source+"$(?!\\s)",flags)}var splitLimit=typeof limit==="undefined"?-1>>>0:ES.ToUint32(limit);match=separatorCopy.exec(string);while(match){lastIndex=match.index+match[0].length;if(lastIndex>lastLastIndex){output.push(string.slice(lastLastIndex,match.index));if(!compliantExecNpcg&&match.length>1){match[0].replace(separator2,function(){for(var i=1;i<arguments.length-2;i++){if(typeof arguments[i]==="undefined"){match[i]=void 0}}})}if(match.length>1&&match.index<string.length){array_push.apply(output,match.slice(1))}lastLength=match[0].length;lastLastIndex=lastIndex;if(output.length>=splitLimit){break}}if(separatorCopy.lastIndex===match.index){separatorCopy.lastIndex++}match=separatorCopy.exec(string)}if(lastLastIndex===string.length){if(lastLength||!separatorCopy.test("")){output.push("")}}else{output.push(string.slice(lastLastIndex))}return output.length>splitLimit?output.slice(0,splitLimit):output}})()}else if("0".split(void 0,0).length){StringPrototype.split=function split(separator,limit){if(typeof separator==="undefined"&&limit===0){return[]}return string_split.call(this,separator,limit)}}var str_replace=StringPrototype.replace;var replaceReportsGroupsCorrectly=function(){var groups=[];"x".replace(/x(.)?/g,function(match,group){groups.push(group)});return groups.length===1&&typeof groups[0]==="undefined"}();if(!replaceReportsGroupsCorrectly){StringPrototype.replace=function replace(searchValue,replaceValue){var isFn=isCallable(replaceValue);var hasCapturingGroups=isRegex(searchValue)&&/\)[*?]/.test(searchValue.source);if(!isFn||!hasCapturingGroups){return str_replace.call(this,searchValue,replaceValue)}else{var wrappedReplaceValue=function(match){var length=arguments.length;var originalLastIndex=searchValue.lastIndex;searchValue.lastIndex=0;var args=searchValue.exec(match)||[];searchValue.lastIndex=originalLastIndex;args.push(arguments[length-2],arguments[length-1]);return replaceValue.apply(this,args)};return str_replace.call(this,searchValue,wrappedReplaceValue)}}}var string_substr=StringPrototype.substr;var hasNegativeSubstrBug="".substr&&"0b".substr(-1)!=="b";defineProperties(StringPrototype,{substr:function substr(start,length){var normalizedStart=start;if(start<0){normalizedStart=Math.max(this.length+start,0)}return string_substr.call(this,normalizedStart,length)}},hasNegativeSubstrBug);var ws="\t\n\x0B\f\r   ᠎    "+"         　\u2028"+"\u2029\ufeff";var zeroWidth="​";var wsRegexChars="["+ws+"]";var trimBeginRegexp=new RegExp("^"+wsRegexChars+wsRegexChars+"*");var trimEndRegexp=new RegExp(wsRegexChars+wsRegexChars+"*$");var hasTrimWhitespaceBug=StringPrototype.trim&&(ws.trim()||!zeroWidth.trim());defineProperties(StringPrototype,{trim:function trim(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}return String(this).replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}},hasTrimWhitespaceBug);if(parseInt(ws+"08")!==8||parseInt(ws+"0x16")!==22){parseInt=function(origParseInt){var hexRegex=/^0[xX]/;return function parseInt(str,radix){var string=String(str).trim();var defaultedRadix=Number(radix)||(hexRegex.test(string)?16:10);return origParseInt(string,defaultedRadix)}}(parseInt)}})},{}],99:[function(require,module,exports){(function(){"use strict";function FastClick(layer,options){var oldOnClick;options=options||{};this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=options.touchBoundary||10;this.layer=layer;this.tapDelay=options.tapDelay||200;this.tapTimeout=options.tapTimeout||700;if(FastClick.notNeeded(layer)){return}function bind(method,context){return function(){return method.apply(context,arguments)}}var methods=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"];var context=this;for(var i=0,l=methods.length;i<l;i++){context[methods[i]]=bind(context[methods[i]],context)}if(deviceIsAndroid){layer.addEventListener("mouseover",this.onMouse,true);layer.addEventListener("mousedown",this.onMouse,true);layer.addEventListener("mouseup",this.onMouse,true)}layer.addEventListener("click",this.onClick,true);layer.addEventListener("touchstart",this.onTouchStart,false);layer.addEventListener("touchmove",this.onTouchMove,false);layer.addEventListener("touchend",this.onTouchEnd,false);layer.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){layer.removeEventListener=function(type,callback,capture){var rmv=Node.prototype.removeEventListener;if(type==="click"){rmv.call(layer,type,callback.hijacked||callback,capture)}else{rmv.call(layer,type,callback,capture)}};layer.addEventListener=function(type,callback,capture){var adv=Node.prototype.addEventListener;if(type==="click"){adv.call(layer,type,callback.hijacked||(callback.hijacked=function(event){if(!event.propagationStopped){callback(event)}}),capture)}else{adv.call(layer,type,callback,capture)}}}if(typeof layer.onclick==="function"){oldOnClick=layer.onclick;layer.addEventListener("click",function(event){oldOnClick(event)},false);layer.onclick=null}}var deviceIsWindowsPhone=navigator.userAgent.indexOf("Windows Phone")>=0;var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0&&!deviceIsWindowsPhone;var deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent)&&!deviceIsWindowsPhone;var deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent);var deviceIsIOSWithBadTarget=deviceIsIOS&&/OS [6-7]_\d/.test(navigator.userAgent);var deviceIsBlackBerry10=navigator.userAgent.indexOf("BB10")>0;FastClick.prototype.needsClick=function(target){switch(target.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(target.disabled){return true}break;case"input":if(deviceIsIOS&&target.type==="file"||target.disabled){return true}break;case"label":case"iframe":case"video":return true}return/\bneedsclick\b/.test(target.className)};FastClick.prototype.needsFocus=function(target){switch(target.nodeName.toLowerCase()){case"textarea":return true;case"select":return!deviceIsAndroid;case"input":switch(target.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false}return!target.disabled&&!target.readOnly;default:return/\bneedsfocus\b/.test(target.className)}};FastClick.prototype.sendClick=function(targetElement,event){var clickEvent,touch;if(document.activeElement&&document.activeElement!==targetElement){document.activeElement.blur()}touch=event.changedTouches[0];clickEvent=document.createEvent("MouseEvents");clickEvent.initMouseEvent(this.determineEventType(targetElement),true,true,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,false,false,false,false,0,null);clickEvent.forwardedTouchEvent=true;targetElement.dispatchEvent(clickEvent)};FastClick.prototype.determineEventType=function(targetElement){if(deviceIsAndroid&&targetElement.tagName.toLowerCase()==="select"){return"mousedown"}return"click"};FastClick.prototype.focus=function(targetElement){var length;if(deviceIsIOS&&targetElement.setSelectionRange&&targetElement.type.indexOf("date")!==0&&targetElement.type!=="time"&&targetElement.type!=="month"){length=targetElement.value.length;targetElement.setSelectionRange(length,length)}else{targetElement.focus()}};FastClick.prototype.updateScrollParent=function(targetElement){var scrollParent,parentElement;scrollParent=targetElement.fastClickScrollParent;if(!scrollParent||!scrollParent.contains(targetElement)){parentElement=targetElement;do{if(parentElement.scrollHeight>parentElement.offsetHeight){scrollParent=parentElement;targetElement.fastClickScrollParent=parentElement;break}parentElement=parentElement.parentElement}while(parentElement)}if(scrollParent){scrollParent.fastClickLastScrollTop=scrollParent.scrollTop}};FastClick.prototype.getTargetElementFromEventTarget=function(eventTarget){if(eventTarget.nodeType===Node.TEXT_NODE){return eventTarget.parentNode}return eventTarget};FastClick.prototype.onTouchStart=function(event){var targetElement,touch,selection;if(event.targetTouches.length>1){return true}targetElement=this.getTargetElementFromEventTarget(event.target);touch=event.targetTouches[0];if(deviceIsIOS){selection=window.getSelection();if(selection.rangeCount&&!selection.isCollapsed){return true}if(!deviceIsIOS4){if(touch.identifier&&touch.identifier===this.lastTouchIdentifier){event.preventDefault();return false}this.lastTouchIdentifier=touch.identifier;this.updateScrollParent(targetElement)}}this.trackingClick=true;this.trackingClickStart=event.timeStamp;this.targetElement=targetElement;this.touchStartX=touch.pageX;this.touchStartY=touch.pageY;if(event.timeStamp-this.lastClickTime<this.tapDelay){event.preventDefault()}return true};FastClick.prototype.touchHasMoved=function(event){var touch=event.changedTouches[0],boundary=this.touchBoundary;if(Math.abs(touch.pageX-this.touchStartX)>boundary||Math.abs(touch.pageY-this.touchStartY)>boundary){return true}return false};FastClick.prototype.onTouchMove=function(event){if(!this.trackingClick){return true}if(this.targetElement!==this.getTargetElementFromEventTarget(event.target)||this.touchHasMoved(event)){this.trackingClick=false;this.targetElement=null}return true};FastClick.prototype.findControl=function(labelElement){if(labelElement.control!==undefined){return labelElement.control}if(labelElement.htmlFor){return document.getElementById(labelElement.htmlFor)}return labelElement.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};FastClick.prototype.onTouchEnd=function(event){var forElement,trackingClickStart,targetTagName,scrollParent,touch,targetElement=this.targetElement;if(!this.trackingClick){return true}if(event.timeStamp-this.lastClickTime<this.tapDelay){this.cancelNextClick=true;return true}if(event.timeStamp-this.trackingClickStart>this.tapTimeout){return true}this.cancelNextClick=false;this.lastClickTime=event.timeStamp;trackingClickStart=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(deviceIsIOSWithBadTarget){touch=event.changedTouches[0];targetElement=document.elementFromPoint(touch.pageX-window.pageXOffset,touch.pageY-window.pageYOffset)||targetElement;targetElement.fastClickScrollParent=this.targetElement.fastClickScrollParent}targetTagName=targetElement.tagName.toLowerCase();if(targetTagName==="label"){forElement=this.findControl(targetElement);if(forElement){this.focus(targetElement);if(deviceIsAndroid){return false}targetElement=forElement}}else if(this.needsFocus(targetElement)){if(event.timeStamp-trackingClickStart>100||deviceIsIOS&&window.top!==window&&targetTagName==="input"){this.targetElement=null;return false}this.focus(targetElement);this.sendClick(targetElement,event);if(!deviceIsIOS||targetTagName!=="select"){this.targetElement=null;event.preventDefault()}return false}if(deviceIsIOS&&!deviceIsIOS4){scrollParent=targetElement.fastClickScrollParent;if(scrollParent&&scrollParent.fastClickLastScrollTop!==scrollParent.scrollTop){return true}}if(!this.needsClick(targetElement)){event.preventDefault();this.sendClick(targetElement,event)}return false};FastClick.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null};FastClick.prototype.onMouse=function(event){if(!this.targetElement){return true}if(event.forwardedTouchEvent){return true}if(!event.cancelable){return true}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(event.stopImmediatePropagation){event.stopImmediatePropagation()}else{event.propagationStopped=true}event.stopPropagation();event.preventDefault();return false}return true};FastClick.prototype.onClick=function(event){var permitted;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true}if(event.target.type==="submit"&&event.detail===0){return true}permitted=this.onMouse(event);if(!permitted){this.targetElement=null}return permitted};FastClick.prototype.destroy=function(){var layer=this.layer;if(deviceIsAndroid){layer.removeEventListener("mouseover",this.onMouse,true);layer.removeEventListener("mousedown",this.onMouse,true);layer.removeEventListener("mouseup",this.onMouse,true)}layer.removeEventListener("click",this.onClick,true);layer.removeEventListener("touchstart",this.onTouchStart,false);layer.removeEventListener("touchmove",this.onTouchMove,false);layer.removeEventListener("touchend",this.onTouchEnd,false);layer.removeEventListener("touchcancel",this.onTouchCancel,false)};FastClick.notNeeded=function(layer){var metaViewport;var chromeVersion;var blackberryVersion;var firefoxVersion;if(typeof window.ontouchstart==="undefined"){return true}chromeVersion=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(chromeVersion){if(deviceIsAndroid){metaViewport=document.querySelector("meta[name=viewport]");if(metaViewport){if(metaViewport.content.indexOf("user-scalable=no")!==-1){return true}if(chromeVersion>31&&document.documentElement.scrollWidth<=window.outerWidth){return true}}}else{return true}}if(deviceIsBlackBerry10){blackberryVersion=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(blackberryVersion[1]>=10&&blackberryVersion[2]>=3){metaViewport=document.querySelector("meta[name=viewport]");if(metaViewport){if(metaViewport.content.indexOf("user-scalable=no")!==-1){return true}if(document.documentElement.scrollWidth<=window.outerWidth){return true}}}}if(layer.style.msTouchAction==="none"||layer.style.touchAction==="manipulation"){return true}firefoxVersion=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(firefoxVersion>=27){metaViewport=document.querySelector("meta[name=viewport]");if(metaViewport&&(metaViewport.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)){return true}}if(layer.style.touchAction==="none"||layer.style.touchAction==="manipulation"){return true}return false};FastClick.attach=function(layer,options){return new FastClick(layer,options)};if(typeof define==="function"&&typeof define.amd==="object"&&define.amd){define(function(){return FastClick})}else if(typeof module!=="undefined"&&module.exports){module.exports=FastClick.attach;module.exports.FastClick=FastClick}else{window.FastClick=FastClick}})()},{}],100:[function(require,module,exports){(function(root,factory){if(typeof define==="function"&&define.amd){define([],function(){return root.returnExportsGlobal=factory()})}else if(typeof exports==="object"){module.exports=factory()}else{root["Formatter"]=factory()}})(this,function(){var pattern=function(){var pattern={};var DELIM_SIZE=4;var regexp=new RegExp("{{([^}]+)}}","g");var getMatches=function(pattern){var matches=[],match;while(match=regexp.exec(pattern)){matches.push(match)}return matches};pattern.parse=function(pattern){var info={inpts:{},chars:{}};var matches=getMatches(pattern),pLength=pattern.length;var mCount=0,iCount=0,i=0;var processMatch=function(val){var valLength=val.length;for(var j=0;j<valLength;j++){info.inpts[iCount]=val.charAt(j);iCount++}mCount++;i+=val.length+DELIM_SIZE-1};for(i;i<pLength;i++){if(mCount<matches.length&&i===matches[mCount].index){processMatch(matches[mCount][1])}else{info.chars[i-mCount*DELIM_SIZE]=pattern.charAt(i)}}info.mLength=i-mCount*DELIM_SIZE;return info};return pattern}();var utils=function(){var utils={};var uAgent=typeof navigator!=="undefined"?navigator.userAgent:null;utils.extend=function(destObj){for(var i=1;i<arguments.length;i++){for(var key in arguments[i]){destObj[key]=arguments[i][key]}}return destObj};utils.addChars=function(str,chars,pos){return str.substr(0,pos)+chars+str.substr(pos,str.length)};utils.removeChars=function(str,start,end){return str.substr(0,start)+str.substr(end,str.length)};utils.isBetween=function(num,bounds){bounds.sort(function(a,b){return a-b});return num>bounds[0]&&num<bounds[1]};utils.addListener=function(el,evt,handler){return typeof el.addEventListener!=="undefined"?el.addEventListener(evt,handler,false):el.attachEvent("on"+evt,handler)};utils.preventDefault=function(evt){return evt.preventDefault?evt.preventDefault():evt.returnValue=false};utils.getClip=function(evt){if(evt.clipboardData){return evt.clipboardData.getData("Text")}if(window.clipboardData){return window.clipboardData.getData("Text")}};utils.getMatchingKey=function(which,keyCode,keys){for(var k in keys){var key=keys[k];if(which===key.which&&keyCode===key.keyCode){return k}}};utils.isDelKeyDown=function(which,keyCode){var keys={backspace:{which:8,keyCode:8},"delete":{which:46,keyCode:46}};return utils.getMatchingKey(which,keyCode,keys)};utils.isDelKeyPress=function(which,keyCode){var keys={backspace:{which:8,keyCode:8,shiftKey:false},"delete":{which:0,keyCode:46}};return utils.getMatchingKey(which,keyCode,keys)};utils.isSpecialKeyPress=function(which,keyCode){var keys={tab:{which:0,keyCode:9},enter:{which:13,keyCode:13},end:{which:0,keyCode:35},home:{which:0,keyCode:36},leftarrow:{which:0,keyCode:37},uparrow:{which:0,keyCode:38},rightarrow:{which:0,keyCode:39},downarrow:{which:0,keyCode:40}};return utils.getMatchingKey(which,keyCode,keys)};utils.isModifier=function(evt){return evt.ctrlKey||evt.altKey||evt.metaKey};utils.forEach=function(collection,callback,thisArg){if(collection.hasOwnProperty("length")){for(var index=0,len=collection.length;index<len;index++){if(callback.call(thisArg,collection[index],index,collection)===false){break}}}else{for(var key in collection){if(collection.hasOwnProperty(key)){if(callback.call(thisArg,collection[key],key,collection)===false){break}}}}};return utils}();var patternMatcher=function(pattern,utils){var parseMatcher=function(matcher){if(matcher==="*"){return/.*/}return new RegExp(matcher)};function patternMatcher(patternSpec){var matchers=[],patterns=[];utils.forEach(patternSpec,function(patternMatcher){utils.forEach(patternMatcher,function(patternStr,matcherStr){var parsedPattern=pattern.parse(patternStr),regExpMatcher=parseMatcher(matcherStr);matchers.push(regExpMatcher);patterns.push(parsedPattern);return false})});var getPattern=function(input){var matchedIndex;utils.forEach(matchers,function(matcher,index){if(matcher.test(input)){matchedIndex=index;return false}});return matchedIndex===undefined?null:patterns[matchedIndex]};return{getPattern:getPattern,patterns:patterns,matchers:matchers}}return patternMatcher}(pattern,utils);var inptSel=function(){var inptSel={};inptSel.get=function(el){if(typeof el.selectionStart==="number"){return{begin:el.selectionStart,end:el.selectionEnd}}var range;try{range=document.selection.createRange()}catch(err){}if(range&&range.parentElement()===el){var inputRange=el.createTextRange(),endRange=el.createTextRange(),length=el.value.length;inputRange.moveToBookmark(range.getBookmark());endRange.collapse(false);if(inputRange.compareEndPoints("StartToEnd",endRange)>-1){return{begin:length,end:length}}return{begin:-inputRange.moveStart("character",-length),end:-inputRange.moveEnd("character",-length)}}return{begin:0,end:0}};inptSel.set=function(el,pos){if(typeof pos!=="object"){pos={begin:pos,end:pos}}if(el.setSelectionRange){el.focus();el.setSelectionRange(pos.begin,pos.end)}else if(el.createTextRange){var range=el.createTextRange();range.collapse(true);range.moveEnd("character",pos.end);range.moveStart("character",pos.begin);range.select()}};return inptSel}();var formatter=function(patternMatcher,inptSel,utils){var defaults={persistent:false,repeat:false,placeholder:" "};var inptRegs={9:/[0-9]/,a:/[A-Za-z]/,"*":/[A-Za-z0-9]/};function _needsInputEvent(){var ua=navigator.userAgent;if(ua.match(/Android/i)){var matches=ua.match(/Chrome\/(\d{2})\./i);if(matches&&Number(matches[matches.length-1])<=31){return true}}}function Formatter(el,opts){var self=this;self.el=el;if(!self.el){throw new TypeError("Must provide an existing element")}self.opts=utils.extend({},defaults,opts);if(typeof self.opts.pattern!=="undefined"){self.opts.patterns=self._specFromSinglePattern(self.opts.pattern);delete self.opts.pattern}if(typeof self.opts.patterns==="undefined"){throw new TypeError("Must provide a pattern or array of patterns")}self.patternMatcher=patternMatcher(self.opts.patterns);self._updatePattern();self.hldrs={};self.focus=0;utils.addListener(self.el,"keydown",function(evt){self._keyDown(evt)});utils.addListener(self.el,"keypress",function(evt){self._keyPress(evt)});if(_needsInputEvent()){utils.addListener(self.el,"input",function(evt){self._keyPress(evt)})}utils.addListener(self.el,"paste",function(evt){self._paste(evt)});if(self.opts.persistent){self._processKey("",false);self.el.blur();utils.addListener(self.el,"focus",function(evt){self._focus(evt)});utils.addListener(self.el,"click",function(evt){self._focus(evt)});utils.addListener(self.el,"touchstart",function(evt){self._focus(evt)})}}Formatter.addInptType=function(chr,reg){inptRegs[chr]=reg};Formatter.prototype.resetPattern=function(str){this.opts.patterns=str?this._specFromSinglePattern(str):this.opts.patterns;this.sel=inptSel.get(this.el);this.val=this.el.value;this.delta=0;this._removeChars();this.patternMatcher=patternMatcher(this.opts.patterns);var newPattern=this.patternMatcher.getPattern(this.val);this.mLength=newPattern.mLength;this.chars=newPattern.chars;this.inpts=newPattern.inpts;this._processKey("",false,true)};Formatter.prototype._updatePattern=function(){var newPattern=this.patternMatcher.getPattern(this.val);if(newPattern){this.mLength=newPattern.mLength;this.chars=newPattern.chars;this.inpts=newPattern.inpts}};Formatter.prototype._keyDown=function(evt){var k=evt.which||evt.keyCode;if(k&&utils.isDelKeyDown(evt.which,evt.keyCode)){this._processKey(null,k);return utils.preventDefault(evt)}};Formatter.prototype._keyPress=function(evt){var k,isSpecial;k=evt.which||evt.keyCode;isSpecial=utils.isSpecialKeyPress(evt.which,evt.keyCode);if(!utils.isDelKeyPress(evt.which,evt.keyCode)&&!isSpecial&&!utils.isModifier(evt)){this._processKey(String.fromCharCode(k),false);return utils.preventDefault(evt)}};Formatter.prototype._paste=function(evt){this._processKey(utils.getClip(evt),false);return utils.preventDefault(evt)};Formatter.prototype._focus=function(){var self=this;setTimeout(function(){var selection=inptSel.get(self.el);var isAfterStart=selection.end>self.focus,isFirstChar=selection.end===0;if(isAfterStart||isFirstChar){inptSel.set(self.el,self.focus)}},0)};Formatter.prototype._processKey=function(chars,delKey,ignoreCaret){this.sel=inptSel.get(this.el);this.val=this.el.value;this.delta=0;if(this.sel.begin!==this.sel.end){this.delta=-1*Math.abs(this.sel.begin-this.sel.end);this.val=utils.removeChars(this.val,this.sel.begin,this.sel.end)}else if(delKey&&delKey===46){this._delete()}else if(delKey&&this.sel.begin-1>=0){this.val=utils.removeChars(this.val,this.sel.end-1,this.sel.end);this.delta-=1}else if(delKey){return true}if(!delKey){this.val=utils.addChars(this.val,chars,this.sel.begin);this.delta+=chars.length}this._formatValue(ignoreCaret)};Formatter.prototype._delete=function(){while(this.chars[this.sel.begin]){this._nextPos()}if(this.sel.begin<this.val.length){this._nextPos();this.val=utils.removeChars(this.val,this.sel.end-1,this.sel.end);this.delta=-1}};Formatter.prototype._nextPos=function(){this.sel.end++;this.sel.begin++};Formatter.prototype._formatValue=function(ignoreCaret){this.newPos=this.sel.end+this.delta;this._removeChars();this._updatePattern();this._validateInpts();this._addChars();this.el.value=this.val.substr(0,this.mLength);if(typeof ignoreCaret==="undefined"||ignoreCaret===false){inptSel.set(this.el,this.newPos)}};Formatter.prototype._removeChars=function(){if(this.sel.end>this.focus){this.delta+=this.sel.end-this.focus}var shift=0;for(var i=0;i<=this.mLength;i++){var curChar=this.chars[i],curHldr=this.hldrs[i],pos=i+shift,val;pos=i>=this.sel.begin?pos+this.delta:pos;val=this.val.charAt(pos);if(curChar&&curChar===val||curHldr&&curHldr===val){this.val=utils.removeChars(this.val,pos,pos+1);shift--}}this.hldrs={};this.focus=this.val.length};Formatter.prototype._validateInpts=function(){for(var i=0;i<this.val.length;i++){var inptType=this.inpts[i];var isBadType=!inptRegs[inptType],isInvalid=!isBadType&&!inptRegs[inptType].test(this.val.charAt(i)),inBounds=this.inpts[i];if((isBadType||isInvalid)&&inBounds){this.val=utils.removeChars(this.val,i,i+1);this.focusStart--;this.newPos--;this.delta--;i--}}};Formatter.prototype._addChars=function(){if(this.opts.persistent){for(var i=0;i<=this.mLength;i++){if(!this.val.charAt(i)){this.val=utils.addChars(this.val,this.opts.placeholder,i);this.hldrs[i]=this.opts.placeholder}this._addChar(i)}while(this.chars[this.focus]){this.focus++}}else{for(var j=0;j<=this.val.length;j++){if(this.delta<=0&&j===this.focus){return true}this._addChar(j)}}};Formatter.prototype._addChar=function(i){var chr=this.chars[i];if(!chr){return true}if(utils.isBetween(i,[this.sel.begin-1,this.newPos+1])){this.newPos++;this.delta++}if(i<=this.focus){this.focus++}if(this.hldrs[i]){delete this.hldrs[i];this.hldrs[i+1]=this.opts.placeholder}this.val=utils.addChars(this.val,chr,i)};Formatter.prototype._specFromSinglePattern=function(patternStr){return[{"*":patternStr}]};return Formatter}(patternMatcher,inptSel,utils);return formatter})},{}],101:[function(require,module,exports){"use strict";(function(root,factory){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=factory()}else if(typeof define==="function"&&define.amd){define([],factory)}else{root.framebus=factory()}})(this,function(){var win,framebus;var popups=[];var subscribers={};var prefix="/*framebus*/";function include(popup){if(popup==null){return false}if(popup.Window==null){return false}if(popup.constructor!==popup.Window){return false}popups.push(popup);return true}function target(origin){var key;var targetedFramebus={};for(key in framebus){if(!framebus.hasOwnProperty(key)){continue}targetedFramebus[key]=framebus[key]}targetedFramebus._origin=origin||"*";return targetedFramebus}function publish(event){var payload,args;var origin=_getOrigin(this);if(_isntString(event)){return false}if(_isntString(origin)){return false}args=Array.prototype.slice.call(arguments,1);payload=_packagePayload(event,args,origin);if(payload===false){return false}_broadcast(win.top,payload,origin);return true}function subscribe(event,fn){var origin=_getOrigin(this);if(_subscriptionArgsInvalid(event,fn,origin)){return false}subscribers[origin]=subscribers[origin]||{};subscribers[origin][event]=subscribers[origin][event]||[];subscribers[origin][event].push(fn);return true}function unsubscribe(event,fn){var i,subscriberList;var origin=_getOrigin(this);if(_subscriptionArgsInvalid(event,fn,origin)){return false}subscriberList=subscribers[origin]&&subscribers[origin][event];if(!subscriberList){return false}for(i=0;i<subscriberList.length;i++){if(subscriberList[i]===fn){subscriberList.splice(i,1);return true}}return false}function _getOrigin(scope){return scope&&scope._origin||"*"}function _isntString(string){return typeof string!=="string"}function _packagePayload(event,args,origin){var packaged=false;var payload={event:event,origin:origin};var reply=args[args.length-1];if(typeof reply==="function"){payload.reply=_subscribeReplier(reply,origin);args=args.slice(0,-1)}payload.args=args;try{packaged=prefix+JSON.stringify(payload)}catch(e){throw new Error("Could not stringify event: "+e.message)}return packaged}function _unpackPayload(e){var payload,replyOrigin,replySource,replyEvent;if(e.data.slice(0,prefix.length)!==prefix){return false}try{payload=JSON.parse(e.data.slice(prefix.length))}catch(err){return false}if(payload.reply!=null){replyOrigin=e.origin;replySource=e.source;replyEvent=payload.reply;payload.reply=function reply(data){var replyPayload=_packagePayload(replyEvent,[data],replyOrigin);if(replyPayload===false){return false}replySource.postMessage(replyPayload,replyOrigin)};payload.args.push(payload.reply)}return payload}function _attach(w){if(win){return}win=w||window;if(win.addEventListener){win.addEventListener("message",_onmessage,false)}else if(win.attachEvent){win.attachEvent("onmessage",_onmessage)}else if(win.onmessage===null){win.onmessage=_onmessage}else{win=null}}function _uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0;var v=c==="x"?r:r&3|8;return v.toString(16)})}function _onmessage(e){var payload;if(_isntString(e.data)){return}payload=_unpackPayload(e);if(!payload){return}_dispatch("*",payload.event,payload.args,e);_dispatch(e.origin,payload.event,payload.args,e);_broadcastPopups(e.data,payload.origin,e.source)}function _dispatch(origin,event,args,e){var i;if(!subscribers[origin]){return}if(!subscribers[origin][event]){return}for(i=0;i<subscribers[origin][event].length;i++){subscribers[origin][event][i].apply(e,args)}}function _broadcast(frame,payload,origin){var i;try{frame.postMessage(payload,origin)}catch(_){return}if(frame.opener&&frame.opener!==frame&&!frame.opener.closed&&frame.opener!==win){_broadcast(frame.opener.top,payload,origin)}for(i=0;i<frame.frames.length;i++){_broadcast(frame.frames[i],payload,origin)}}function _broadcastPopups(payload,origin,source){var i,popup;for(i=popups.length-1;i>=0;i--){popup=popups[i];if(popup.closed===true){popups=popups.slice(i,1)}else if(source!==popup){_broadcast(popup.top,payload,origin)}}}function _subscribeReplier(fn,origin){var uuid=_uuid();function replier(d,o){fn(d,o);framebus.target(origin).unsubscribe(uuid,replier)}framebus.target(origin).subscribe(uuid,replier);return uuid}function _subscriptionArgsInvalid(event,fn,origin){if(_isntString(event)){return true}if(typeof fn!=="function"){return true}if(_isntString(origin)){return true}return false}_attach();framebus={target:target,include:include,publish:publish,pub:publish,trigger:publish,emit:publish,subscribe:subscribe,sub:subscribe,on:subscribe,unsubscribe:unsubscribe,unsub:unsubscribe,off:unsubscribe};return framebus})},{}],102:[function(require,module,exports){"use strict";var base=require(103);var SafeString=require(106)["default"];var Exception=require(104)["default"];var Utils=require(107);var runtime=require(105);var create=function(){var hb=new base.HandlebarsEnvironment;Utils.extend(hb,base);hb.SafeString=SafeString;hb.Exception=Exception;hb.Utils=Utils;hb.escapeExpression=Utils.escapeExpression;hb.VM=runtime;hb.template=function(spec){return runtime.template(spec,hb)};return hb};var Handlebars=create();Handlebars.create=create;Handlebars["default"]=Handlebars;exports["default"]=Handlebars},{103:103,104:104,105:105,106:106,107:107}],103:[function(require,module,exports){"use strict";var Utils=require(107);var Exception=require(104)["default"];var VERSION="2.0.0";exports.VERSION=VERSION;var COMPILER_REVISION=6;exports.COMPILER_REVISION=COMPILER_REVISION;var REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};exports.REVISION_CHANGES=REVISION_CHANGES;var isArray=Utils.isArray,isFunction=Utils.isFunction,toString=Utils.toString,objectType="[object Object]";function HandlebarsEnvironment(helpers,partials){this.helpers=helpers||{};this.partials=partials||{};registerDefaultHelpers(this)}exports.HandlebarsEnvironment=HandlebarsEnvironment;HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:logger,log:log,registerHelper:function(name,fn){if(toString.call(name)===objectType){if(fn){throw new Exception("Arg not supported with multiple helpers")}Utils.extend(this.helpers,name)}else{this.helpers[name]=fn}},unregisterHelper:function(name){delete this.helpers[name]},registerPartial:function(name,partial){if(toString.call(name)===objectType){Utils.extend(this.partials,name)}else{this.partials[name]=partial}},unregisterPartial:function(name){delete this.partials[name]}};function registerDefaultHelpers(instance){instance.registerHelper("helperMissing",function(){if(arguments.length===1){return undefined}else{throw new Exception("Missing helper: '"+arguments[arguments.length-1].name+"'")}});instance.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse,fn=options.fn;if(context===true){return fn(this)}else if(context===false||context==null){return inverse(this)}else if(isArray(context)){if(context.length>0){if(options.ids){options.ids=[options.name]}return instance.helpers.each(context,options)}else{return inverse(this)}}else{if(options.data&&options.ids){var data=createFrame(options.data);data.contextPath=Utils.appendContextPath(options.data.contextPath,options.name);options={data:data}}return fn(context,options)}});instance.registerHelper("each",function(context,options){if(!options){throw new Exception("Must pass iterator to #each")}var fn=options.fn,inverse=options.inverse;var i=0,ret="",data;var contextPath;if(options.data&&options.ids){contextPath=Utils.appendContextPath(options.data.contextPath,options.ids[0])+"."}if(isFunction(context)){context=context.call(this)}if(options.data){data=createFrame(options.data)}if(context&&typeof context==="object"){if(isArray(context)){for(var j=context.length;i<j;i++){if(data){data.index=i;data.first=i===0;data.last=i===context.length-1;if(contextPath){data.contextPath=contextPath+i}}ret=ret+fn(context[i],{data:data})}}else{for(var key in context){if(context.hasOwnProperty(key)){if(data){data.key=key;data.index=i;data.first=i===0;if(contextPath){data.contextPath=contextPath+key}}ret=ret+fn(context[key],{data:data});i++}}}}if(i===0){ret=inverse(this)}return ret});instance.registerHelper("if",function(conditional,options){if(isFunction(conditional)){conditional=conditional.call(this)}if(!options.hash.includeZero&&!conditional||Utils.isEmpty(conditional)){return options.inverse(this)}else{return options.fn(this)}});instance.registerHelper("unless",function(conditional,options){return instance.helpers["if"].call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})});instance.registerHelper("with",function(context,options){if(isFunction(context)){context=context.call(this)}var fn=options.fn;if(!Utils.isEmpty(context)){if(options.data&&options.ids){var data=createFrame(options.data);data.contextPath=Utils.appendContextPath(options.data.contextPath,options.ids[0]);options={data:data}}return fn(context,options)}else{return options.inverse(this)}});instance.registerHelper("log",function(message,options){var level=options.data&&options.data.level!=null?parseInt(options.data.level,10):1;instance.log(level,message)});instance.registerHelper("lookup",function(obj,field){return obj&&obj[field]})}var logger={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(level,message){if(logger.level<=level){var method=logger.methodMap[level];if(typeof console!=="undefined"&&console[method]){console[method].call(console,message)}}}};exports.logger=logger;var log=logger.log;exports.log=log;var createFrame=function(object){var frame=Utils.extend({},object);frame._parent=object;return frame};exports.createFrame=createFrame},{104:104,107:107}],104:[function(require,module,exports){"use strict";var errorProps=["description","fileName","lineNumber","message","name","number","stack"];function Exception(message,node){var line;if(node&&node.firstLine){line=node.firstLine;message+=" - "+line+":"+node.firstColumn}var tmp=Error.prototype.constructor.call(this,message);for(var idx=0;idx<errorProps.length;idx++){this[errorProps[idx]]=tmp[errorProps[idx]]}if(line){this.lineNumber=line;this.column=node.firstColumn}}Exception.prototype=new Error;exports["default"]=Exception},{}],105:[function(require,module,exports){"use strict";var Utils=require(107);var Exception=require(104)["default"];var COMPILER_REVISION=require(103).COMPILER_REVISION;var REVISION_CHANGES=require(103).REVISION_CHANGES;var createFrame=require(103).createFrame;function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=COMPILER_REVISION;if(compilerRevision!==currentRevision){if(compilerRevision<currentRevision){var runtimeVersions=REVISION_CHANGES[currentRevision],compilerVersions=REVISION_CHANGES[compilerRevision];throw new Exception("Template was precompiled with an older version of Handlebars than the current runtime. "+"Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").")}else{throw new Exception("Template was precompiled with a newer version of Handlebars than the current runtime. "+"Please update your runtime to a newer version ("+compilerInfo[1]+").")}}}exports.checkRevision=checkRevision;function template(templateSpec,env){if(!env){throw new Exception("No environment passed to template")}if(!templateSpec||!templateSpec.main){throw new Exception("Unknown template object: "+typeof templateSpec)}env.VM.checkRevision(templateSpec.compiler);var invokePartialWrapper=function(partial,indent,name,context,hash,helpers,partials,data,depths){if(hash){context=Utils.extend({},context,hash)}var result=env.VM.invokePartial.call(this,partial,name,context,helpers,partials,data,depths);if(result==null&&env.compile){var options={helpers:helpers,partials:partials,data:data,depths:depths};partials[name]=env.compile(partial,{data:data!==undefined,compat:templateSpec.compat},env);result=partials[name](context,options)}if(result!=null){if(indent){var lines=result.split("\n");for(var i=0,l=lines.length;i<l;i++){if(!lines[i]&&i+1===l){break}lines[i]=indent+lines[i]}result=lines.join("\n")}return result}else{throw new Exception("The partial "+name+" could not be compiled when running in runtime-only mode")}};var container={lookup:function(depths,name){var len=depths.length;for(var i=0;i<len;i++){if(depths[i]&&depths[i][name]!=null){return depths[i][name]}}},lambda:function(current,context){return typeof current==="function"?current.call(context):current},escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,fn:function(i){return templateSpec[i]},programs:[],program:function(i,data,depths){var programWrapper=this.programs[i],fn=this.fn(i);if(data||depths){programWrapper=program(this,i,fn,data,depths)}else if(!programWrapper){programWrapper=this.programs[i]=program(this,i,fn)}return programWrapper},data:function(data,depth){while(data&&depth--){data=data._parent}return data},merge:function(param,common){var ret=param||common;if(param&&common&&param!==common){ret=Utils.extend({},common,param)}return ret},noop:env.VM.noop,compilerInfo:templateSpec.compiler};var ret=function(context,options){options=options||{};var data=options.data;ret._setup(options);if(!options.partial&&templateSpec.useData){data=initData(context,data)}var depths;if(templateSpec.useDepths){depths=options.depths?[context].concat(options.depths):[context]}return templateSpec.main.call(container,context,container.helpers,container.partials,data,depths)};ret.isTop=true;ret._setup=function(options){if(!options.partial){container.helpers=container.merge(options.helpers,env.helpers);if(templateSpec.usePartial){container.partials=container.merge(options.partials,env.partials)}}else{container.helpers=options.helpers;container.partials=options.partials}};ret._child=function(i,data,depths){if(templateSpec.useDepths&&!depths){throw new Exception("must pass parent depths")}return program(container,i,templateSpec[i],data,depths)};return ret}exports.template=template;function program(container,i,fn,data,depths){var prog=function(context,options){options=options||{};return fn.call(container,context,container.helpers,container.partials,options.data||data,depths&&[context].concat(depths))};prog.program=i;prog.depth=depths?depths.length:0;return prog}exports.program=program;function invokePartial(partial,name,context,helpers,partials,data,depths){var options={partial:true,helpers:helpers,partials:partials,data:data,depths:depths};if(partial===undefined){throw new Exception("The partial "+name+" could not be found")}else if(partial instanceof Function){return partial(context,options)}}exports.invokePartial=invokePartial;function noop(){return""}exports.noop=noop;function initData(context,data){if(!data||!("root"in data)){data=data?createFrame(data):{};data.root=context}return data}},{103:103,104:104,107:107}],106:[function(require,module,exports){"use strict";function SafeString(string){this.string=string}SafeString.prototype.toString=function(){return""+this.string};exports["default"]=SafeString},{}],107:[function(require,module,exports){"use strict";var SafeString=require(106)["default"];var escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var badChars=/[&<>"'`]/g;var possible=/[&<>"'`]/;function escapeChar(chr){return escape[chr]}function extend(obj){for(var i=1;i<arguments.length;i++){for(var key in arguments[i]){if(Object.prototype.hasOwnProperty.call(arguments[i],key)){obj[key]=arguments[i][key]}}}return obj}exports.extend=extend;var toString=Object.prototype.toString;exports.toString=toString;var isFunction=function(value){return typeof value==="function"};if(isFunction(/x/)){isFunction=function(value){return typeof value==="function"&&toString.call(value)==="[object Function]"}}var isFunction;exports.isFunction=isFunction;var isArray=Array.isArray||function(value){return value&&typeof value==="object"?toString.call(value)==="[object Array]":false};exports.isArray=isArray;function escapeExpression(string){if(string instanceof SafeString){return string.toString()}else if(string==null){return""}else if(!string){return string+""}string=""+string;if(!possible.test(string)){return string}return string.replace(badChars,escapeChar)}exports.escapeExpression=escapeExpression;function isEmpty(value){if(!value&&value!==0){return true}else if(isArray(value)&&value.length===0){return true}else{return false}}exports.isEmpty=isEmpty;function appendContextPath(contextPath,id){return(contextPath?contextPath+".":"")+id}exports.appendContextPath=appendContextPath},{106:106}],108:[function(require,module,exports){module.exports=require(102)},{102:102}],109:[function(require,module,exports){module.exports=require(108)["default"]},{108:108}],110:[function(require,module,exports){"use strict";var assign=require(171);var isString=require(170);var setAttributes=require(112);var defaultAttributes=require(111);module.exports=function createFrame(options){var iframe=document.createElement("iframe");var config=assign({},defaultAttributes,options);if(config.style&&!isString(config.style)){assign(iframe.style,config.style);delete config.style}setAttributes(iframe,config);if(!iframe.getAttribute("id")){iframe.id=iframe.name}return iframe}},{111:111,112:112,170:170,171:171}],111:[function(require,module,exports){module.exports={src:"about:blank",frameBorder:0,allowtransparency:true,scrolling:"no"}},{}],112:[function(require,module,exports){module.exports=function setAttributes(element,attributes){var value;for(var key in attributes){if(attributes.hasOwnProperty(key)){value=attributes[key];if(value==null){element.removeAttribute(key)}else{element.setAttribute(key,value)}}}}},{}],113:[function(require,module,exports){if(typeof JSON!=="object"){JSON={}}(function(){"use strict";function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})()},{}],114:[function(require,module,exports){var LazyWrapper=require(121),LodashWrapper=require(122),baseLodash=require(132),isArray=require(165),isObjectLike=require(155),wrapperClone=require(163);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper){return value}if(hasOwnProperty.call(value,"__chain__")&&hasOwnProperty.call(value,"__wrapped__")){return wrapperClone(value)}}return new LodashWrapper(value)}lodash.prototype=baseLodash.prototype;module.exports=lodash},{121:121,122:122,132:132,155:155,163:163,165:165}],115:[function(require,module,exports){var baseIndexOf=require(131),getLength=require(147),isArray=require(165),isIterateeCall=require(152),isLength=require(154),isString=require(170),values=require(175);var nativeMax=Math.max;function includes(collection,target,fromIndex,guard){var length=collection?getLength(collection):0;if(!isLength(length)){collection=values(collection);length=collection.length}if(typeof fromIndex!="number"||guard&&isIterateeCall(target,fromIndex,guard)){fromIndex=0}else{fromIndex=fromIndex<0?nativeMax(length+fromIndex,0):fromIndex||0}return typeof collection=="string"||!isArray(collection)&&isString(collection)?fromIndex<=length&&collection.indexOf(target,fromIndex)>-1:!!length&&baseIndexOf(collection,target,fromIndex)>-1}module.exports=includes},{131:131,147:147,152:152,154:154,165:165,170:170,175:175}],116:[function(require,module,exports){var getNative=require(148);var nativeNow=getNative(Date,"now");var now=nativeNow||function(){return(new Date).getTime()};module.exports=now},{148:148}],117:[function(require,module,exports){var createWrapper=require(144),replaceHolders=require(160),restParam=require(119);var BIND_FLAG=1,PARTIAL_FLAG=32;var bind=restParam(function(func,thisArg,partials){var bitmask=BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,bind.placeholder);bitmask|=PARTIAL_FLAG}return createWrapper(func,bitmask,thisArg,partials,holders)});bind.placeholder={};module.exports=bind},{119:119,144:144,160:160}],118:[function(require,module,exports){var baseFlatten=require(129),createWrapper=require(144),functions=require(172),restParam=require(119);var BIND_FLAG=1;var bindAll=restParam(function(object,methodNames){methodNames=methodNames.length?baseFlatten(methodNames):functions(object);var index=-1,length=methodNames.length;while(++index<length){var key=methodNames[index];object[key]=createWrapper(object[key],BIND_FLAG,object)}return object});module.exports=bindAll},{119:119,129:129,144:144,172:172}],119:[function(require,module,exports){var FUNC_ERROR_TEXT="Expected a function";var nativeMax=Math.max;function restParam(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=nativeMax(start===undefined?func.length-1:+start||0,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);while(++index<length){rest[index]=args[start+index]}switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);index=-1;while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=rest;return func.apply(this,otherArgs)}}module.exports=restParam},{}],120:[function(require,module,exports){(function(global){(function(){var undefined;var VERSION="3.10.1";var BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_BOUND_FLAG=4,CURRY_FLAG=8,CURRY_RIGHT_FLAG=16,PARTIAL_FLAG=32,PARTIAL_RIGHT_FLAG=64,ARY_FLAG=128,REARG_FLAG=256;var DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...";var HOT_COUNT=150,HOT_SPAN=16;var LARGE_ARRAY_SIZE=200;var LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2;var FUNC_ERROR_TEXT="Expected a function";var PLACEHOLDER="__lodash_placeholder__";var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEscapedHtml=/&(?:amp|lt|gt|quot|#39|#96);/g,reUnescapedHtml=/[&<>"'`]/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source);var reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g;var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g;var reRegExpChars=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,reHasRegExpChars=RegExp(reRegExpChars.source);var reComboMark=/[\u0300-\u036f\ufe20-\ufe23]/g;var reEscapeChar=/\\(\\)?/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reHasHexPrefix=/^0[xX]/;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^\d+$/;var reLatin1=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g;var reNoMatch=/($^)/;var reUnescapedString=/['\n\r\u2028\u2029\\]/g;var reWords=function(){var upper="[A-Z\\xc0-\\xd6\\xd8-\\xde]",lower="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(upper+"+(?="+upper+lower+")|"+upper+"?"+lower+"|"+upper+"+|[0-9]+","g")}();var contextProps=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"];var templateCounter=-1;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[stringTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[mapTag]=cloneableTags[setTag]=cloneableTags[weakMapTag]=false;var deburredLetters={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"};var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};var htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"};var objectTypes={"function":true,object:true};var regexpEscapes={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"};var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module;var freeGlobal=freeExports&&freeModule&&typeof global=="object"&&global&&global.Object&&global;var freeSelf=objectTypes[typeof self]&&self&&self.Object&&self;var freeWindow=objectTypes[typeof window]&&window&&window.Object&&window;var moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports;var root=freeGlobal||freeWindow!==(this&&this.window)&&freeWindow||freeSelf||this;function baseCompareAscending(value,other){if(value!==other){var valIsNull=value===null,valIsUndef=value===undefined,valIsReflexive=value===value;var othIsNull=other===null,othIsUndef=other===undefined,othIsReflexive=other===other;if(value>other&&!othIsNull||!valIsReflexive||valIsNull&&!othIsUndef&&othIsReflexive||valIsUndef&&othIsReflexive){return 1}if(value<other&&!valIsNull||!othIsReflexive||othIsNull&&!valIsUndef&&valIsReflexive||othIsUndef&&valIsReflexive){return-1}}return 0}function baseFindIndex(array,predicate,fromRight){var length=array.length,index=fromRight?length:-1;while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index}}return-1}function baseIndexOf(array,value,fromIndex){if(value!==value){return indexOfNaN(array,fromIndex)}var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index}}return-1}function baseIsFunction(value){return typeof value=="function"||false}function baseToString(value){return value==null?"":value+""}function charsLeftIndex(string,chars){var index=-1,length=string.length;while(++index<length&&chars.indexOf(string.charAt(index))>-1){}return index}function charsRightIndex(string,chars){var index=string.length;while(index--&&chars.indexOf(string.charAt(index))>-1){}return index}function compareAscending(object,other){return baseCompareAscending(object.criteria,other.criteria)||object.index-other.index}function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index<length){var result=baseCompareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength){return result}var order=orders[index];return result*(order==="asc"||order===true?1:-1)}}return object.index-other.index}function deburrLetter(letter){return deburredLetters[letter]}function escapeHtmlChar(chr){return htmlEscapes[chr]}function escapeRegExpChar(chr,leadingChar,whitespaceChar){if(leadingChar){chr=regexpEscapes[chr]}else if(whitespaceChar){chr=stringEscapes[chr]}return"\\"+chr}function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function indexOfNaN(array,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?0:-1);while(fromRight?index--:++index<length){var other=array[index];if(other!==other){return index}}return-1}function isObjectLike(value){return!!value&&typeof value=="object"}function isSpace(charCode){return charCode<=160&&(charCode>=9&&charCode<=13)||charCode==32||charCode==160||charCode==5760||charCode==6158||charCode>=8192&&(charCode<=8202||charCode==8232||charCode==8233||charCode==8239||charCode==8287||charCode==12288||charCode==65279)}function replaceHolders(array,placeholder){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){if(array[index]===placeholder){array[index]=PLACEHOLDER;result[++resIndex]=index}}return result}function sortedUniq(array,iteratee){var seen,index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(!index||seen!==computed){seen=computed;result[++resIndex]=value}}return result}function trimmedLeftIndex(string){var index=-1,length=string.length;while(++index<length&&isSpace(string.charCodeAt(index))){}return index}function trimmedRightIndex(string){var index=string.length;while(index--&&isSpace(string.charCodeAt(index))){}return index}function unescapeHtmlChar(chr){return htmlUnescapes[chr]}function runInContext(context){context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayProto=Array.prototype,objectProto=Object.prototype,stringProto=String.prototype;var fnToString=Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var idCounter=0;var objToString=objectProto.toString;var oldDash=root._;var reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ArrayBuffer=context.ArrayBuffer,clearTimeout=context.clearTimeout,parseFloat=context.parseFloat,pow=Math.pow,propertyIsEnumerable=objectProto.propertyIsEnumerable,Set=getNative(context,"Set"),setTimeout=context.setTimeout,splice=arrayProto.splice,Uint8Array=context.Uint8Array,WeakMap=getNative(context,"WeakMap");var nativeCeil=Math.ceil,nativeCreate=getNative(Object,"create"),nativeFloor=Math.floor,nativeIsArray=getNative(Array,"isArray"),nativeIsFinite=context.isFinite,nativeKeys=getNative(Object,"keys"),nativeMax=Math.max,nativeMin=Math.min,nativeNow=getNative(Date,"now"),nativeParseInt=context.parseInt,nativeRandom=Math.random;var NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,POSITIVE_INFINITY=Number.POSITIVE_INFINITY;var MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1;var MAX_SAFE_INTEGER=9007199254740991;var metaMap=WeakMap&&new WeakMap;var realNames={};function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper){return value}if(hasOwnProperty.call(value,"__chain__")&&hasOwnProperty.call(value,"__wrapped__")){return wrapperClone(value)}}return new LodashWrapper(value)}function baseLodash(){}function LodashWrapper(value,chainAll,actions){this.__wrapped__=value;this.__actions__=actions||[];this.__chain__=!!chainAll}var support=lodash.support={};lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}};function LazyWrapper(value){this.__wrapped__=value;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=POSITIVE_INFINITY;this.__views__=[]}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);result.__actions__=arrayCopy(this.__actions__);result.__dir__=this.__dir__;result.__filtered__=this.__filtered__;result.__iteratees__=arrayCopy(this.__iteratees__);result.__takeCount__=this.__takeCount__;result.__views__=arrayCopy(this.__views__);return result}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1;result.__filtered__=true}else{result=this.clone();result.__dir__*=-1}return result}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||arrLength<LARGE_ARRAY_SIZE||arrLength==length&&takeCount==length){return baseWrapperValue(isRight&&isArr?array.reverse():array,this.__actions__)}var result=[];outer:while(length--&&resIndex<takeCount){index+=dir;var iterIndex=-1,value=array[index];while(++iterIndex<iterLength){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type==LAZY_MAP_FLAG){value=computed}else if(!computed){if(type==LAZY_FILTER_FLAG){continue outer}else{break outer}}}result[resIndex++]=value}return result}function MapCache(){this.__data__={}}function mapDelete(key){return this.has(key)&&delete this.__data__[key]}function mapGet(key){return key=="__proto__"?undefined:this.__data__[key]}function mapHas(key){return key!="__proto__"&&hasOwnProperty.call(this.__data__,key)}function mapSet(key,value){if(key!="__proto__"){this.__data__[key]=value}return this}function SetCache(values){var length=values?values.length:0;this.data={hash:nativeCreate(null),set:new Set};while(length--){this.push(values[length])}}function cacheIndexOf(cache,value){var data=cache.data,result=typeof value=="string"||isObject(value)?data.set.has(value):data.hash[value];return result?0:-1}function cachePush(value){var data=this.data;if(typeof value=="string"||isObject(value)){data.set.add(value)}else{data.hash[value]=true}}function arrayConcat(array,other){var index=-1,length=array.length,othIndex=-1,othLength=other.length,result=Array(length+othLength);while(++index<length){result[index]=array[index]}while(++othIndex<othLength){result[index++]=other[othIndex]}return result}function arrayCopy(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}function arrayEach(array,iteratee){var index=-1,length=array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}function arrayEachRight(array,iteratee){var length=array.length;while(length--){if(iteratee(array[length],length,array)===false){break}}return array}function arrayEvery(array,predicate){var index=-1,length=array.length;while(++index<length){if(!predicate(array[index],index,array)){return false}}return true}function arrayExtremum(array,iteratee,comparator,exValue){var index=-1,length=array.length,computed=exValue,result=computed;while(++index<length){var value=array[index],current=+iteratee(value);if(comparator(current,computed)){computed=current;result=value}}return result}function arrayFilter(array,predicate){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[++resIndex]=value}}return result}function arrayMap(array,iteratee){var index=-1,length=array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}function arrayReduce(array,iteratee,accumulator,initFromArray){var index=-1,length=array.length;if(initFromArray&&length){accumulator=array[++index]}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array)}return accumulator}function arrayReduceRight(array,iteratee,accumulator,initFromArray){var length=array.length;if(initFromArray&&length){accumulator=array[--length]}while(length--){accumulator=iteratee(accumulator,array[length],length,array)}return accumulator}function arraySome(array,predicate){var index=-1,length=array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}function arraySum(array,iteratee){var length=array.length,result=0;while(length--){result+=+iteratee(array[length])||0}return result}function assignDefaults(objectValue,sourceValue){return objectValue===undefined?sourceValue:objectValue}function assignOwnDefaults(objectValue,sourceValue,key,object){return objectValue===undefined||!hasOwnProperty.call(object,key)?sourceValue:objectValue}function assignWith(object,source,customizer){var index=-1,props=keys(source),length=props.length;while(++index<length){var key=props[index],value=object[key],result=customizer(value,source[key],key,object,source);if((result===result?result!==value:value===value)||value===undefined&&!(key in object)){object[key]=result}}return object}function baseAssign(object,source){return source==null?object:baseCopy(source,keys(source),object)}function baseAt(collection,props){var index=-1,isNil=collection==null,isArr=!isNil&&isArrayLike(collection),length=isArr?collection.length:0,propsLength=props.length,result=Array(propsLength);while(++index<propsLength){var key=props[index];if(isArr){result[index]=isIndex(key,length)?collection[key]:undefined}else{result[index]=isNil?undefined:collection[key]}}return result}function baseCopy(source,props,object){object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];object[key]=source[key]}return object}function baseCallback(func,thisArg,argCount){var type=typeof func;if(type=="function"){return thisArg===undefined?func:bindCallback(func,thisArg,argCount)}if(func==null){return identity}if(type=="object"){return baseMatches(func)}return thisArg===undefined?property(func):baseMatchesProperty(func,thisArg)}function baseClone(value,isDeep,customizer,key,object,stackA,stackB){var result;if(customizer){result=object?customizer(value,key,object):customizer(value)}if(result!==undefined){return result}if(!isObject(value)){return value}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return arrayCopy(value,result)}}else{var tag=objToString.call(value),isFunc=tag==funcTag;if(tag==objectTag||tag==argsTag||isFunc&&!object){result=initCloneObject(isFunc?{}:value);if(!isDeep){return baseAssign(result,value)}}else{return cloneableTags[tag]?initCloneByTag(value,tag,isDeep):object?value:{}}}stackA||(stackA=[]);stackB||(stackB=[]);var length=stackA.length;while(length--){if(stackA[length]==value){return stackB[length]}}stackA.push(value);stackB.push(result);(isArr?arrayEach:baseForOwn)(value,function(subValue,key){result[key]=baseClone(subValue,isDeep,customizer,key,value,stackA,stackB)});return result}var baseCreate=function(){function object(){}return function(prototype){if(isObject(prototype)){object.prototype=prototype;var result=new object;object.prototype=undefined}return result||{}}}();function baseDelay(func,wait,args){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values){var length=array?array.length:0,result=[];if(!length){return result}var index=-1,indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,cache=isCommon&&values.length>=LARGE_ARRAY_SIZE?createCache(values):null,valuesLength=values.length;if(cache){indexOf=cacheIndexOf;isCommon=false;values=cache}outer:while(++index<length){var value=array[index];if(isCommon&&value===value){var valuesIndex=valuesLength;while(valuesIndex--){if(values[valuesIndex]===value){continue outer}}result.push(value)}else if(indexOf(values,value,0)<0){result.push(value)}}return result}var baseEach=createBaseEach(baseForOwn);var baseEachRight=createBaseEach(baseForOwnRight,true);function baseEvery(collection,predicate){var result=true;baseEach(collection,function(value,index,collection){result=!!predicate(value,index,collection);return result});return result}function baseExtremum(collection,iteratee,comparator,exValue){var computed=exValue,result=computed;baseEach(collection,function(value,index,collection){var current=+iteratee(value,index,collection);if(comparator(current,computed)||current===exValue&&current===result){computed=current;result=value}});return result}function baseFill(array,value,start,end){var length=array.length;start=start==null?0:+start||0;if(start<0){start=-start>length?0:length+start}end=end===undefined||end>length?length:+end||0;if(end<0){end+=length}length=start>end?0:end>>>0;start>>>=0;while(start<length){array[start++]=value}return array}function baseFilter(collection,predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection)){result.push(value)}});return result}function baseFind(collection,predicate,eachFunc,retKey){var result;eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection)){result=retKey?key:value;return false}});return result}function baseFlatten(array,isDeep,isStrict,result){result||(result=[]);var index=-1,length=array.length;while(++index<length){var value=array[index];if(isObjectLike(value)&&isArrayLike(value)&&(isStrict||isArray(value)||isArguments(value))){if(isDeep){baseFlatten(value,isDeep,isStrict,result)}else{arrayPush(result,value)}}else if(!isStrict){result[result.length]=value}}return result}var baseFor=createBaseFor();var baseForRight=createBaseFor(true);function baseForIn(object,iteratee){return baseFor(object,iteratee,keysIn)}function baseForOwn(object,iteratee){return baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return baseForRight(object,iteratee,keys)}function baseFunctions(object,props){var index=-1,length=props.length,resIndex=-1,result=[];while(++index<length){var key=props[index];if(isFunction(object[key])){result[++resIndex]=key}}return result}function baseGet(object,path,pathKey){if(object==null){return}if(pathKey!==undefined&&pathKey in toObject(object)){path=[pathKey]}var index=0,length=path.length;while(object!=null&&index<length){object=object[path[index++]]}return index&&index==length?object:undefined}function baseIsEqual(value,other,customizer,isLoose,stackA,stackB){if(value===other){return true}if(value==null||other==null||!isObject(value)&&!isObjectLike(other)){return value!==value&&other!==other}return baseIsEqualDeep(value,other,baseIsEqual,customizer,isLoose,stackA,stackB)}function baseIsEqualDeep(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;if(!objIsArr){objTag=objToString.call(object);if(objTag==argsTag){objTag=objectTag}else if(objTag!=objectTag){objIsArr=isTypedArray(object)}}if(!othIsArr){othTag=objToString.call(other);if(othTag==argsTag){othTag=objectTag}else if(othTag!=objectTag){othIsArr=isTypedArray(other)}}var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&!(objIsArr||objIsObj)){return equalByTag(object,other,objTag)}if(!isLoose){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(objIsWrapped||othIsWrapped){return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,customizer,isLoose,stackA,stackB)}}if(!isSameTag){return false}stackA||(stackA=[]);stackB||(stackB=[]);var length=stackA.length;while(length--){if(stackA[length]==object){return stackB[length]==other}}stackA.push(object);stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,isLoose,stackA,stackB);stackA.pop();stackB.pop();return result}function baseIsMatch(object,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length}object=toObject(object);while(index--){var data=matchData[index];if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object)){return false}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false}}else{var result=customizer?customizer(objValue,srcValue,key):undefined;if(!(result===undefined?baseIsEqual(srcValue,objValue,customizer,true):result)){return false}}}return true}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)});return result}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){var key=matchData[0][0],value=matchData[0][1];return function(object){if(object==null){return false}return object[key]===value&&(value!==undefined||key in toObject(object))}}return function(object){return baseIsMatch(object,matchData)}}function baseMatchesProperty(path,srcValue){var isArr=isArray(path),isCommon=isKey(path)&&isStrictComparable(srcValue),pathKey=path+"";path=toPath(path);return function(object){if(object==null){return false}var key=pathKey;object=toObject(object);if((isArr||!isCommon)&&!(key in object)){object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));if(object==null){return false}key=last(path);object=toObject(object)}return object[key]===srcValue?srcValue!==undefined||key in object:baseIsEqual(srcValue,object[key],undefined,true)}}function baseMerge(object,source,customizer,stackA,stackB){if(!isObject(object)){return object}var isSrcArr=isArrayLike(source)&&(isArray(source)||isTypedArray(source)),props=isSrcArr?undefined:keys(source);arrayEach(props||source,function(srcValue,key){if(props){key=srcValue;srcValue=source[key]}if(isObjectLike(srcValue)){stackA||(stackA=[]);stackB||(stackB=[]);baseMergeDeep(object,source,key,baseMerge,customizer,stackA,stackB)}else{var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;if(isCommon){result=srcValue}if((result!==undefined||isSrcArr&&!(key in object))&&(isCommon||(result===result?result!==value:value===value))){object[key]=result}}});return object}function baseMergeDeep(object,source,key,mergeFunc,customizer,stackA,stackB){var length=stackA.length,srcValue=source[key];while(length--){if(stackA[length]==srcValue){object[key]=stackB[length];return}}var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;if(isCommon){result=srcValue;if(isArrayLike(srcValue)&&(isArray(srcValue)||isTypedArray(srcValue))){result=isArray(value)?value:isArrayLike(value)?arrayCopy(value):[]}else if(isPlainObject(srcValue)||isArguments(srcValue)){result=isArguments(value)?toPlainObject(value):isPlainObject(value)?value:{}}else{isCommon=false}}stackA.push(srcValue);stackB.push(result);if(isCommon){object[key]=mergeFunc(result,srcValue,customizer,stackA,stackB)}else if(result===result?result!==value:value===value){object[key]=result}}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}function basePropertyDeep(path){var pathKey=path+"";path=toPath(path);return function(object){return baseGet(object,path,pathKey)}}function basePullAt(array,indexes){var length=array?indexes.length:0;while(length--){var index=indexes[length];if(index!=previous&&isIndex(index)){var previous=index;splice.call(array,index,1)}}return array}function baseRandom(min,max){return min+nativeFloor(nativeRandom()*(max-min+1))}function baseReduce(collection,iteratee,accumulator,initFromCollection,eachFunc){eachFunc(collection,function(value,index,collection){accumulator=initFromCollection?(initFromCollection=false,value):iteratee(accumulator,value,index,collection)});return accumulator}var baseSetData=!metaMap?identity:function(func,data){metaMap.set(func,data);return func};function baseSlice(array,start,end){var index=-1,length=array.length;start=start==null?0:+start||0;if(start<0){start=-start>length?0:length+start}end=end===undefined||end>length?length:+end||0;if(end<0){end+=length}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start]}return result}function baseSome(collection,predicate){var result;baseEach(collection,function(value,index,collection){result=predicate(value,index,collection);return!result});return!!result}function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--){array[length]=array[length].value}return array}function baseSortByOrder(collection,iteratees,orders){var callback=getCallback(),index=-1;iteratees=arrayMap(iteratees,function(iteratee){return callback(iteratee)});var result=baseMap(collection,function(value){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value)});return{criteria:criteria,index:++index,value:value}});return baseSortBy(result,function(object,other){return compareMultiple(object,other,orders)})}function baseSum(collection,iteratee){var result=0;baseEach(collection,function(value,index,collection){result+=+iteratee(value,index,collection)||0});return result}function baseUniq(array,iteratee){var index=-1,indexOf=getIndexOf(),length=array.length,isCommon=indexOf==baseIndexOf,isLarge=isCommon&&length>=LARGE_ARRAY_SIZE,seen=isLarge?createCache():null,result=[];if(seen){indexOf=cacheIndexOf;isCommon=false}else{isLarge=false;seen=iteratee?[]:result}outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(isCommon&&value===value){var seenIndex=seen.length;while(seenIndex--){if(seen[seenIndex]===computed){continue outer}}if(iteratee){seen.push(computed)}result.push(value)}else if(indexOf(seen,computed,0)<0){if(iteratee||isLarge){seen.push(computed)}result.push(value)}}return result}function baseValues(object,props){var index=-1,length=props.length,result=Array(length);while(++index<length){result[index]=object[props[index]]}return result}function baseWhile(array,predicate,isDrop,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index<length)&&predicate(array[index],index,array)){}return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;if(result instanceof LazyWrapper){result=result.value()}var index=-1,length=actions.length;while(++index<length){var action=actions[index];result=action.func.apply(action.thisArg,arrayPush([result],action.args))}return result}function binaryIndex(array,value,retHighest){var low=0,high=array?array.length:low;if(typeof value=="number"&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){while(low<high){var mid=low+high>>>1,computed=array[mid];if((retHighest?computed<=value:computed<value)&&computed!==null){low=mid+1}else{high=mid}}return high}return binaryIndexBy(array,value,identity,retHighest)}function binaryIndexBy(array,value,iteratee,retHighest){value=iteratee(value);var low=0,high=array?array.length:0,valIsNaN=value!==value,valIsNull=value===null,valIsUndef=value===undefined;while(low<high){var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),isDef=computed!==undefined,isReflexive=computed===computed;if(valIsNaN){var setLow=isReflexive||retHighest}else if(valIsNull){setLow=isReflexive&&isDef&&(retHighest||computed!=null)}else if(valIsUndef){setLow=isReflexive&&(retHighest||isDef)}else if(computed==null){setLow=false}else{setLow=retHighest?computed<=value:computed<value}if(setLow){low=mid+1}else{high=mid}}return nativeMin(high,MAX_ARRAY_INDEX)}function bindCallback(func,thisArg,argCount){if(typeof func!="function"){return identity}if(thisArg===undefined){return func}switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}function bufferClone(buffer){var result=new ArrayBuffer(buffer.byteLength),view=new Uint8Array(result);view.set(new Uint8Array(buffer));return result}function composeArgs(args,partials,holders){var holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),leftIndex=-1,leftLength=partials.length,result=Array(leftLength+argsLength);while(++leftIndex<leftLength){result[leftIndex]=partials[leftIndex]}while(++argsIndex<holdersLength){result[holders[argsIndex]]=args[argsIndex]}while(argsLength--){result[leftIndex++]=args[argsIndex++]}return result}function composeArgsRight(args,partials,holders){var holdersIndex=-1,holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),rightIndex=-1,rightLength=partials.length,result=Array(argsLength+rightLength);while(++argsIndex<argsLength){result[argsIndex]=args[argsIndex]}var offset=argsIndex;while(++rightIndex<rightLength){result[offset+rightIndex]=partials[rightIndex]}while(++holdersIndex<holdersLength){result[offset+holders[holdersIndex]]=args[argsIndex++]}return result}function createAggregator(setter,initializer){return function(collection,iteratee,thisArg){var result=initializer?initializer():{};iteratee=getCallback(iteratee,thisArg,3);if(isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];setter(result,value,iteratee(value,index,collection),collection)}}else{baseEach(collection,function(value,key,collection){setter(result,value,iteratee(value,key,collection),collection)})}return result}}function createAssigner(assigner){return restParam(function(object,sources){var index=-1,length=object==null?0:sources.length,customizer=length>2?sources[length-2]:undefined,guard=length>2?sources[2]:undefined,thisArg=length>1?sources[length-1]:undefined;if(typeof customizer=="function"){customizer=bindCallback(customizer,thisArg,5);length-=2}else{customizer=typeof thisArg=="function"?thisArg:undefined;length-=customizer?1:0}if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}while(++index<length){var source=sources[index];if(source){assigner(object,source,customizer)}}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){var length=collection?getLength(collection):0;if(!isLength(length)){return eachFunc(collection,iteratee)}var index=fromRight?length:-1,iterable=toObject(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break}}return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var iterable=toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;while(fromRight?index--:++index<length){var key=props[index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}function createBindWrapper(func,thisArg){var Ctor=createCtorWrapper(func);function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(thisArg,arguments)}return wrapper}function createCache(values){return nativeCreate&&Set?new SetCache(values):null}function createCompounder(callback){return function(string){var index=-1,array=words(deburr(string)),length=array.length,result="";while(++index<length){result=callback(result,array[index],index)}return result}}function createCtorWrapper(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}function createCurry(flag){function curryFunc(func,arity,guard){if(guard&&isIterateeCall(func,arity,guard)){arity=undefined}var result=createWrapper(func,flag,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder=curryFunc.placeholder;return result}return curryFunc}function createDefaults(assigner,customizer){return restParam(function(args){var object=args[0];if(object==null){return object}args.push(customizer);return assigner.apply(undefined,args)})}function createExtremum(comparator,exValue){return function(collection,iteratee,thisArg){if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=undefined}iteratee=getCallback(iteratee,thisArg,3);if(iteratee.length==1){collection=isArray(collection)?collection:toIterable(collection);var result=arrayExtremum(collection,iteratee,comparator,exValue);if(!(collection.length&&result===exValue)){return result}}return baseExtremum(collection,iteratee,comparator,exValue)}}function createFind(eachFunc,fromRight){return function(collection,predicate,thisArg){predicate=getCallback(predicate,thisArg,3);if(isArray(collection)){var index=baseFindIndex(collection,predicate,fromRight);return index>-1?collection[index]:undefined}return baseFind(collection,predicate,eachFunc)}}function createFindIndex(fromRight){return function(array,predicate,thisArg){if(!(array&&array.length)){return-1}predicate=getCallback(predicate,thisArg,3);return baseFindIndex(array,predicate,fromRight)}}function createFindKey(objectFunc){return function(object,predicate,thisArg){predicate=getCallback(predicate,thisArg,3);return baseFind(object,predicate,objectFunc,true)}}function createFlow(fromRight){return function(){var wrapper,length=arguments.length,index=fromRight?length:-1,leftIndex=0,funcs=Array(length);while(fromRight?index--:++index<length){var func=funcs[leftIndex++]=arguments[index];if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(!wrapper&&LodashWrapper.prototype.thru&&getFuncName(func)=="wrapper"){wrapper=new LodashWrapper([],true)}}index=wrapper?-1:length;while(++index<length){func=funcs[index];var funcName=getFuncName(func),data=funcName=="wrapper"?getData(func):undefined;if(data&&isLaziable(data[0])&&data[1]==(ARY_FLAG|CURRY_FLAG|PARTIAL_FLAG|REARG_FLAG)&&!data[4].length&&data[9]==1){wrapper=wrapper[getFuncName(data[0])].apply(wrapper,data[3])}else{wrapper=func.length==1&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func)}}return function(){var args=arguments,value=args[0];if(wrapper&&args.length==1&&isArray(value)&&value.length>=LARGE_ARRAY_SIZE){return wrapper.plant(value).value()}var index=0,result=length?funcs[index].apply(this,args):value;while(++index<length){result=funcs[index].call(this,result)}return result}}}function createForEach(arrayFunc,eachFunc){return function(collection,iteratee,thisArg){return typeof iteratee=="function"&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee):eachFunc(collection,bindCallback(iteratee,thisArg,3))}}function createForIn(objectFunc){return function(object,iteratee,thisArg){if(typeof iteratee!="function"||thisArg!==undefined){iteratee=bindCallback(iteratee,thisArg,3)}return objectFunc(object,iteratee,keysIn)}}function createForOwn(objectFunc){return function(object,iteratee,thisArg){if(typeof iteratee!="function"||thisArg!==undefined){iteratee=bindCallback(iteratee,thisArg,3)}return objectFunc(object,iteratee)}}function createObjectMapper(isMapKeys){return function(object,iteratee,thisArg){var result={};iteratee=getCallback(iteratee,thisArg,3);baseForOwn(object,function(value,key,object){var mapped=iteratee(value,key,object);key=isMapKeys?mapped:key;value=isMapKeys?value:mapped;result[key]=value});return result}}function createPadDir(fromRight){return function(string,length,chars){string=baseToString(string);return(fromRight?string:"")+createPadding(string,length,chars)+(fromRight?"":string)}}function createPartial(flag){var partialFunc=restParam(function(func,partials){var holders=replaceHolders(partials,partialFunc.placeholder);return createWrapper(func,flag,undefined,partials,holders)});return partialFunc}function createReduce(arrayFunc,eachFunc){return function(collection,iteratee,accumulator,thisArg){var initFromArray=arguments.length<3;return typeof iteratee=="function"&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee,accumulator,initFromArray):baseReduce(collection,getCallback(iteratee,thisArg,4),accumulator,initFromArray,eachFunc)}}function createHybridWrapper(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&ARY_FLAG,isBind=bitmask&BIND_FLAG,isBindKey=bitmask&BIND_KEY_FLAG,isCurry=bitmask&CURRY_FLAG,isCurryBound=bitmask&CURRY_BOUND_FLAG,isCurryRight=bitmask&CURRY_RIGHT_FLAG,Ctor=isBindKey?undefined:createCtorWrapper(func);function wrapper(){var length=arguments.length,index=length,args=Array(length);while(index--){args[index]=arguments[index]}if(partials){args=composeArgs(args,partials,holders)}if(partialsRight){args=composeArgsRight(args,partialsRight,holdersRight)}if(isCurry||isCurryRight){var placeholder=wrapper.placeholder,argsHolders=replaceHolders(args,placeholder);length-=argsHolders.length;if(length<arity){var newArgPos=argPos?arrayCopy(argPos):undefined,newArity=nativeMax(arity-length,0),newsHolders=isCurry?argsHolders:undefined,newHoldersRight=isCurry?undefined:argsHolders,newPartials=isCurry?args:undefined,newPartialsRight=isCurry?undefined:args;bitmask|=isCurry?PARTIAL_FLAG:PARTIAL_RIGHT_FLAG;bitmask&=~(isCurry?PARTIAL_RIGHT_FLAG:PARTIAL_FLAG);if(!isCurryBound){bitmask&=~(BIND_FLAG|BIND_KEY_FLAG)}var newData=[func,bitmask,thisArg,newPartials,newsHolders,newPartialsRight,newHoldersRight,newArgPos,ary,newArity],result=createHybridWrapper.apply(undefined,newData);if(isLaziable(func)){setData(result,newData)}result.placeholder=placeholder;return result}}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;if(argPos){args=reorder(args,argPos)}if(isAry&&ary<args.length){args.length=ary}if(this&&this!==root&&this instanceof wrapper){fn=Ctor||createCtorWrapper(func)}return fn.apply(thisBinding,args)}return wrapper}function createPadding(string,length,chars){var strLength=string.length;length=+length;if(strLength>=length||!nativeIsFinite(length)){return""}var padLength=length-strLength;chars=chars==null?" ":chars+"";return repeat(chars,nativeCeil(padLength/chars.length)).slice(0,padLength)}function createPartialWrapper(func,bitmask,thisArg,partials){var isBind=bitmask&BIND_FLAG,Ctor=createCtorWrapper(func);function wrapper(){var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength);while(++leftIndex<leftLength){args[leftIndex]=partials[leftIndex]}while(argsLength--){args[leftIndex++]=arguments[++argsIndex]}var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,args)}return wrapper}function createRound(methodName){var func=Math[methodName];return function(number,precision){precision=precision===undefined?0:+precision||0;if(precision){precision=pow(10,precision);return func(number*precision)/precision}return func(number)}}function createSortedIndex(retHighest){return function(array,value,iteratee,thisArg){var callback=getCallback(iteratee);return iteratee==null&&callback===baseCallback?binaryIndex(array,value,retHighest):binaryIndexBy(array,value,callback(iteratee,thisArg,1),retHighest)}}function createWrapper(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&BIND_KEY_FLAG;if(!isBindKey&&typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var length=partials?partials.length:0;if(!length){bitmask&=~(PARTIAL_FLAG|PARTIAL_RIGHT_FLAG);partials=holders=undefined}length-=holders?holders.length:0;if(bitmask&PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined}var data=isBindKey?undefined:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data){mergeData(newData,data);bitmask=newData[1];arity=newData[9]}newData[9]=arity==null?isBindKey?0:func.length:nativeMax(arity-length,0)||0;if(bitmask==BIND_FLAG){var result=createBindWrapper(newData[0],newData[2])}else if((bitmask==PARTIAL_FLAG||bitmask==(BIND_FLAG|PARTIAL_FLAG))&&!newData[4].length){result=createPartialWrapper.apply(undefined,newData)}else{result=createHybridWrapper.apply(undefined,newData)}var setter=data?baseSetData:setData;return setter(result,newData)}function equalArrays(array,other,equalFunc,customizer,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isLoose&&othLength>arrLength)){return false}while(++index<arrLength){var arrValue=array[index],othValue=other[index],result=customizer?customizer(isLoose?othValue:arrValue,isLoose?arrValue:othValue,index):undefined;if(result!==undefined){if(result){continue}return false}if(isLoose){if(!arraySome(other,function(othValue){return arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB)})){return false}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB))){return false}}return true}function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object==+other;case errorTag:return object.name==other.name&&object.message==other.message;case numberTag:return object!=+object?other!=+other:object==+other;case regexpTag:case stringTag:return object==other+""}return false}function equalObjects(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isLoose){return false}var index=objLength;while(index--){var key=objProps[index];if(!(isLoose?key in other:hasOwnProperty.call(other,key))){return false}}var skipCtor=isLoose;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key],result=customizer?customizer(isLoose?othValue:objValue,isLoose?objValue:othValue,key):undefined;if(!(result===undefined?equalFunc(objValue,othValue,customizer,isLoose,stackA,stackB):result)){return false}skipCtor||(skipCtor=key=="constructor")}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){return false}}return true}function getCallback(func,thisArg,argCount){var result=lodash.callback||callback;result=result===callback?baseCallback:result;return argCount?result(func,thisArg,argCount):result}var getData=!metaMap?noop:function(func){return metaMap.get(func)};function getFuncName(func){var result=func.name,array=realNames[result],length=array?array.length:0;while(length--){var data=array[length],otherFunc=data.func;if(otherFunc==null||otherFunc==func){return data.name}}return result}function getIndexOf(collection,target,fromIndex){var result=lodash.indexOf||indexOf;result=result===indexOf?baseIndexOf:result;return collection?result(collection,target,fromIndex):result}var getLength=baseProperty("length");function getMatchData(object){var result=pairs(object),length=result.length;while(length--){result[length][2]=isStrictComparable(result[length][1])}return result}function getNative(object,key){var value=object==null?undefined:object[key];return isNative(value)?value:undefined}function getView(start,end,transforms){var index=-1,length=transforms.length;while(++index<length){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size);break}}return{start:start,end:end}}function initCloneArray(array){var length=array.length,result=new array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty.call(array,"index")){result.index=array.index;result.input=array.input}return result}function initCloneObject(object){var Ctor=object.constructor;if(!(typeof Ctor=="function"&&Ctor instanceof Ctor)){Ctor=Object}return new Ctor}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return bufferClone(object);case boolTag:case dateTag:return new Ctor(+object);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:var buffer=object.buffer;return new Ctor(isDeep?bufferClone(buffer):buffer,object.byteOffset,object.length);case numberTag:case stringTag:return new Ctor(object);case regexpTag:var result=new Ctor(object.source,reFlags.exec(object));result.lastIndex=object.lastIndex}return result}function invokePath(object,path,args){if(object!=null&&!isKey(path,object)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));path=last(path)}var func=object==null?object:object[path];return func==null?undefined:func.apply(object,args)}function isArrayLike(value){return value!=null&&isLength(getLength(value))}function isIndex(value,length){value=typeof value=="number"||reIsUint.test(value)?+value:-1;length=length==null?MAX_SAFE_INTEGER:length;return value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){var other=object[index];return value===value?value===other:other!==other}return false}function isKey(value,object){var type=typeof value;if(type=="string"&&reIsPlainProp.test(value)||type=="number"){return true}if(isArray(value)){return false}var result=!reIsDeepProp.test(value);return result||object!=null&&value in toObject(object)}function isLaziable(func){var funcName=getFuncName(func);if(!(funcName in LazyWrapper.prototype)){return false}var other=lodash[funcName];if(func===other){return true}var data=getData(other);return!!data&&func===data[0]}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isStrictComparable(value){return value===value&&!isObject(value)}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<ARY_FLAG;var isCombo=srcBitmask==ARY_FLAG&&bitmask==CURRY_FLAG||srcBitmask==ARY_FLAG&&bitmask==REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(ARY_FLAG|REARG_FLAG)&&bitmask==CURRY_FLAG;if(!(isCommon||isCombo)){return data}if(srcBitmask&BIND_FLAG){data[2]=source[2];newBitmask|=bitmask&BIND_FLAG?0:CURRY_BOUND_FLAG}var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):arrayCopy(value);data[4]=partials?replaceHolders(data[3],PLACEHOLDER):arrayCopy(source[4])}value=source[5];if(value){partials=data[5];data[5]=partials?composeArgsRight(partials,value,source[6]):arrayCopy(value);data[6]=partials?replaceHolders(data[5],PLACEHOLDER):arrayCopy(source[6])}value=source[7];if(value){data[7]=arrayCopy(value)}if(srcBitmask&ARY_FLAG){data[8]=data[8]==null?source[8]:nativeMin(data[8],source[8])}if(data[9]==null){data[9]=source[9]}data[0]=source[0];data[1]=newBitmask;return data}function mergeDefaults(objectValue,sourceValue){return objectValue===undefined?sourceValue:merge(objectValue,sourceValue,mergeDefaults)}function pickByArray(object,props){object=toObject(object);var index=-1,length=props.length,result={};while(++index<length){var key=props[index];if(key in object){result[key]=object[key]}}return result}function pickByCallback(object,predicate){var result={};baseForIn(object,function(value,key,object){if(predicate(value,key,object)){result[key]=value}});return result}function reorder(array,indexes){var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=arrayCopy(array);while(length--){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}var setData=function(){var count=0,lastCalled=0;return function(key,value){var stamp=now(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return key}}else{count=0}return baseSetData(key,value)}}();function shimKeys(object){var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length;var allowIndexes=!!length&&isLength(length)&&(isArray(object)||isArguments(object));var index=-1,result=[];while(++index<propsLength){var key=props[index];if(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key)){result.push(key)}}return result}function toIterable(value){if(value==null){return[]}if(!isArrayLike(value)){return values(value)}return isObject(value)?value:Object(value)}function toObject(value){return isObject(value)?value:Object(value)}function toPath(value){if(isArray(value)){return value}var result=[];baseToString(value).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)});return result}function wrapperClone(wrapper){return wrapper instanceof LazyWrapper?wrapper.clone():new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__,arrayCopy(wrapper.__actions__))}function chunk(array,size,guard){if(guard?isIterateeCall(array,size,guard):size==null){size=1}else{size=nativeMax(nativeFloor(size)||1,1)}var index=0,length=array?array.length:0,resIndex=-1,result=Array(nativeCeil(length/size));while(index<length){result[++resIndex]=baseSlice(array,index,index+=size)}return result}function compact(array){var index=-1,length=array?array.length:0,resIndex=-1,result=[];while(++index<length){var value=array[index];if(value){result[++resIndex]=value}}return result}var difference=restParam(function(array,values){return isObjectLike(array)&&isArrayLike(array)?baseDifference(array,baseFlatten(values,false,true)):[]});function drop(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}return baseSlice(array,n<0?0:n)}function dropRight(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}n=length-(+n||0);return baseSlice(array,0,n<0?0:n)}function dropRightWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),true,true):[]}function dropWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),true):[]}function fill(array,value,start,end){var length=array?array.length:0;if(!length){return[]}if(start&&typeof start!="number"&&isIterateeCall(array,value,start)){start=0;end=length}return baseFill(array,value,start,end)}var findIndex=createFindIndex();var findLastIndex=createFindIndex(true);function first(array){return array?array[0]:undefined}function flatten(array,isDeep,guard){var length=array?array.length:0;if(guard&&isIterateeCall(array,isDeep,guard)){isDeep=false}return length?baseFlatten(array,isDeep):[]}function flattenDeep(array){var length=array?array.length:0;return length?baseFlatten(array,true):[]}function indexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return-1}if(typeof fromIndex=="number"){fromIndex=fromIndex<0?nativeMax(length+fromIndex,0):fromIndex}else if(fromIndex){var index=binaryIndex(array,value);if(index<length&&(value===value?value===array[index]:array[index]!==array[index])){return index}return-1}return baseIndexOf(array,value,fromIndex||0)}function initial(array){return dropRight(array,1)}var intersection=restParam(function(arrays){var othLength=arrays.length,othIndex=othLength,caches=Array(length),indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,result=[];while(othIndex--){var value=arrays[othIndex]=isArrayLike(value=arrays[othIndex])?value:[];caches[othIndex]=isCommon&&value.length>=120?createCache(othIndex&&value):null}var array=arrays[0],index=-1,length=array?array.length:0,seen=caches[0];outer:while(++index<length){value=array[index];if((seen?cacheIndexOf(seen,value):indexOf(result,value,0))<0){var othIndex=othLength;while(--othIndex){var cache=caches[othIndex];if((cache?cacheIndexOf(cache,value):indexOf(arrays[othIndex],value,0))<0){continue outer}}if(seen){seen.push(value)}result.push(value)}}return result});function last(array){var length=array?array.length:0;return length?array[length-1]:undefined}function lastIndexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return-1}var index=length;if(typeof fromIndex=="number"){index=(fromIndex<0?nativeMax(length+fromIndex,0):nativeMin(fromIndex||0,length-1))+1}else if(fromIndex){index=binaryIndex(array,value,true)-1;var other=array[index];if(value===value?value===other:other!==other){return index}return-1}if(value!==value){return indexOfNaN(array,index,true)}while(index--){if(array[index]===value){return index}}return-1}function pull(){var args=arguments,array=args[0];if(!(array&&array.length)){return array}var index=0,indexOf=getIndexOf(),length=args.length;while(++index<length){var fromIndex=0,value=args[index];while((fromIndex=indexOf(array,value,fromIndex))>-1){splice.call(array,fromIndex,1)}}return array}var pullAt=restParam(function(array,indexes){indexes=baseFlatten(indexes);var result=baseAt(array,indexes);basePullAt(array,indexes.sort(baseCompareAscending));return result});function remove(array,predicate,thisArg){var result=[];if(!(array&&array.length)){return result}var index=-1,indexes=[],length=array.length;predicate=getCallback(predicate,thisArg,3);while(++index<length){var value=array[index];if(predicate(value,index,array)){result.push(value);indexes.push(index)}}basePullAt(array,indexes);return result}function rest(array){return drop(array,1)}function slice(array,start,end){var length=array?array.length:0;if(!length){return[]}if(end&&typeof end!="number"&&isIterateeCall(array,start,end)){start=0;end=length}return baseSlice(array,start,end)}var sortedIndex=createSortedIndex();var sortedLastIndex=createSortedIndex(true);function take(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}return baseSlice(array,0,n<0?0:n)}function takeRight(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}n=length-(+n||0);return baseSlice(array,n<0?0:n)}function takeRightWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),false,true):[]}function takeWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3)):[]}var union=restParam(function(arrays){return baseUniq(baseFlatten(arrays,false,true))});function uniq(array,isSorted,iteratee,thisArg){var length=array?array.length:0;if(!length){return[]}if(isSorted!=null&&typeof isSorted!="boolean"){thisArg=iteratee;iteratee=isIterateeCall(array,isSorted,thisArg)?undefined:isSorted;isSorted=false}var callback=getCallback();if(!(iteratee==null&&callback===baseCallback)){iteratee=callback(iteratee,thisArg,3)}return isSorted&&getIndexOf()==baseIndexOf?sortedUniq(array,iteratee):baseUniq(array,iteratee)}function unzip(array){if(!(array&&array.length)){return[]}var index=-1,length=0;array=arrayFilter(array,function(group){if(isArrayLike(group)){length=nativeMax(group.length,length);return true}});var result=Array(length);while(++index<length){result[index]=arrayMap(array,baseProperty(index))}return result}function unzipWith(array,iteratee,thisArg){var length=array?array.length:0;if(!length){return[]}var result=unzip(array);if(iteratee==null){return result}iteratee=bindCallback(iteratee,thisArg,4);return arrayMap(result,function(group){return arrayReduce(group,iteratee,undefined,true)})}var without=restParam(function(array,values){return isArrayLike(array)?baseDifference(array,values):[]});function xor(){var index=-1,length=arguments.length;while(++index<length){var array=arguments[index];if(isArrayLike(array)){var result=result?arrayPush(baseDifference(result,array),baseDifference(array,result)):array}}return result?baseUniq(result):[]}var zip=restParam(unzip);function zipObject(props,values){var index=-1,length=props?props.length:0,result={};if(length&&!values&&!isArray(props[0])){values=[]}while(++index<length){var key=props[index];if(values){result[key]=values[index]}else if(key){result[key[0]]=key[1]}}return result}var zipWith=restParam(function(arrays){var length=arrays.length,iteratee=length>2?arrays[length-2]:undefined,thisArg=length>1?arrays[length-1]:undefined;if(length>2&&typeof iteratee=="function"){length-=2}else{iteratee=length>1&&typeof thisArg=="function"?(--length,thisArg):undefined;thisArg=undefined}arrays.length=length;return unzipWith(arrays,iteratee,thisArg)});function chain(value){var result=lodash(value);result.__chain__=true;return result}function tap(value,interceptor,thisArg){interceptor.call(thisArg,value);return value}function thru(value,interceptor,thisArg){return interceptor.call(thisArg,value)}function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}var wrapperConcat=restParam(function(values){values=baseFlatten(values);return this.thru(function(array){return arrayConcat(isArray(array)?array:[toObject(array)],values)})});function wrapperPlant(value){var result,parent=this;while(parent instanceof baseLodash){var clone=wrapperClone(parent);if(result){previous.__wrapped__=clone}else{result=clone}var previous=clone;parent=parent.__wrapped__}previous.__wrapped__=value;return result}function wrapperReverse(){var value=this.__wrapped__;var interceptor=function(value){return wrapped&&wrapped.__dir__<0?value:value.reverse()};if(value instanceof LazyWrapper){var wrapped=value;if(this.__actions__.length){wrapped=new LazyWrapper(this)}wrapped=wrapped.reverse();wrapped.__actions__.push({func:thru,args:[interceptor],thisArg:undefined});return new LodashWrapper(wrapped,this.__chain__)}return this.thru(interceptor)}function wrapperToString(){return this.value()+""}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}var at=restParam(function(collection,props){return baseAt(collection,baseFlatten(props))});var countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:result[key]=1});function every(collection,predicate,thisArg){var func=isArray(collection)?arrayEvery:baseEvery;if(thisArg&&isIterateeCall(collection,predicate,thisArg)){predicate=undefined}if(typeof predicate!="function"||thisArg!==undefined){predicate=getCallback(predicate,thisArg,3)}return func(collection,predicate)}function filter(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;predicate=getCallback(predicate,thisArg,3);return func(collection,predicate)}var find=createFind(baseEach);var findLast=createFind(baseEachRight,true);function findWhere(collection,source){return find(collection,baseMatches(source))}var forEach=createForEach(arrayEach,baseEach);var forEachRight=createForEach(arrayEachRight,baseEachRight);var groupBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){result[key].push(value)}else{result[key]=[value]}});function includes(collection,target,fromIndex,guard){var length=collection?getLength(collection):0;if(!isLength(length)){collection=values(collection);length=collection.length}if(typeof fromIndex!="number"||guard&&isIterateeCall(target,fromIndex,guard)){fromIndex=0}else{fromIndex=fromIndex<0?nativeMax(length+fromIndex,0):fromIndex||0}return typeof collection=="string"||!isArray(collection)&&isString(collection)?fromIndex<=length&&collection.indexOf(target,fromIndex)>-1:!!length&&getIndexOf(collection,target,fromIndex)>-1}var indexBy=createAggregator(function(result,value,key){result[key]=value});var invoke=restParam(function(collection,path,args){var index=-1,isFunc=typeof path=="function",isProp=isKey(path),result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value){var func=isFunc?path:isProp&&value!=null?value[path]:undefined;result[++index]=func?func.apply(value,args):invokePath(value,path,args)});return result});function map(collection,iteratee,thisArg){var func=isArray(collection)?arrayMap:baseMap;iteratee=getCallback(iteratee,thisArg,3);return func(collection,iteratee)}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]});function pluck(collection,path){return map(collection,property(path))}var reduce=createReduce(arrayReduce,baseEach);var reduceRight=createReduce(arrayReduceRight,baseEachRight);function reject(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;predicate=getCallback(predicate,thisArg,3);return func(collection,function(value,index,collection){return!predicate(value,index,collection)})}function sample(collection,n,guard){if(guard?isIterateeCall(collection,n,guard):n==null){collection=toIterable(collection);var length=collection.length;return length>0?collection[baseRandom(0,length-1)]:undefined}var index=-1,result=toArray(collection),length=result.length,lastIndex=length-1;n=nativeMin(n<0?0:+n||0,length);while(++index<n){var rand=baseRandom(index,lastIndex),value=result[rand];result[rand]=result[index];result[index]=value}result.length=n;return result}function shuffle(collection){return sample(collection,POSITIVE_INFINITY)}function size(collection){var length=collection?getLength(collection):0;return isLength(length)?length:keys(collection).length}function some(collection,predicate,thisArg){var func=isArray(collection)?arraySome:baseSome;if(thisArg&&isIterateeCall(collection,predicate,thisArg)){predicate=undefined}if(typeof predicate!="function"||thisArg!==undefined){predicate=getCallback(predicate,thisArg,3)}return func(collection,predicate)}function sortBy(collection,iteratee,thisArg){if(collection==null){return[]}if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=undefined}var index=-1;iteratee=getCallback(iteratee,thisArg,3);var result=baseMap(collection,function(value,key,collection){return{criteria:iteratee(value,key,collection),index:++index,value:value}});return baseSortBy(result,compareAscending)}var sortByAll=restParam(function(collection,iteratees){if(collection==null){return[]}var guard=iteratees[2];if(guard&&isIterateeCall(iteratees[0],iteratees[1],guard)){iteratees.length=1}return baseSortByOrder(collection,baseFlatten(iteratees),[])});function sortByOrder(collection,iteratees,orders,guard){if(collection==null){return[]}if(guard&&isIterateeCall(iteratees,orders,guard)){orders=undefined}if(!isArray(iteratees)){iteratees=iteratees==null?[]:[iteratees]}if(!isArray(orders)){orders=orders==null?[]:[orders]}return baseSortByOrder(collection,iteratees,orders)}function where(collection,source){return filter(collection,baseMatches(source))}var now=nativeNow||function(){return(new Date).getTime()};function after(n,func){if(typeof func!="function"){if(typeof n=="function"){var temp=n;n=func;func=temp}else{throw new TypeError(FUNC_ERROR_TEXT)}}n=nativeIsFinite(n=+n)?n:0;return function(){if(--n<1){return func.apply(this,arguments)}}}function ary(func,n,guard){if(guard&&isIterateeCall(func,n,guard)){n=undefined}n=func&&n==null?func.length:nativeMax(+n||0,0);return createWrapper(func,ARY_FLAG,undefined,undefined,undefined,undefined,n)}function before(n,func){var result;if(typeof func!="function"){if(typeof n=="function"){var temp=n;n=func;func=temp}else{throw new TypeError(FUNC_ERROR_TEXT)}}return function(){if(--n>0){result=func.apply(this,arguments)}if(n<=1){func=undefined}return result}}var bind=restParam(function(func,thisArg,partials){var bitmask=BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,bind.placeholder);bitmask|=PARTIAL_FLAG}return createWrapper(func,bitmask,thisArg,partials,holders)});var bindAll=restParam(function(object,methodNames){methodNames=methodNames.length?baseFlatten(methodNames):functions(object);var index=-1,length=methodNames.length;while(++index<length){var key=methodNames[index];object[key]=createWrapper(object[key],BIND_FLAG,object)}return object});var bindKey=restParam(function(object,key,partials){var bitmask=BIND_FLAG|BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,bindKey.placeholder);bitmask|=PARTIAL_FLAG}return createWrapper(key,bitmask,object,partials,holders)});var curry=createCurry(CURRY_FLAG);var curryRight=createCurry(CURRY_RIGHT_FLAG);function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}wait=wait<0?0:+wait||0;if(options===true){var leading=true;trailing=false}else if(isObject(options)){leading=!!options.leading;maxWait="maxWait"in options&&nativeMax(+options.maxWait||0,wait);trailing="trailing"in options?!!options.trailing:trailing}function cancel(){if(timeoutId){clearTimeout(timeoutId)}if(maxTimeoutId){clearTimeout(maxTimeoutId)}lastCalled=0;maxTimeoutId=timeoutId=trailingCall=undefined}function complete(isCalled,id){if(id){clearTimeout(id)}maxTimeoutId=timeoutId=trailingCall=undefined;if(isCalled){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=undefined}}}function delayed(){var remaining=wait-(now()-stamp);if(remaining<=0||remaining>wait){complete(trailingCall,maxTimeoutId)}else{timeoutId=setTimeout(delayed,remaining)}}function maxDelayed(){complete(trailing,timeoutId)}function debounced(){args=arguments;stamp=now();thisArg=this;trailingCall=trailing&&(timeoutId||!leading);if(maxWait===false){var leadingCall=leading&&!timeoutId}else{if(!maxTimeoutId&&!leading){lastCalled=stamp}var remaining=maxWait-(stamp-lastCalled),isCalled=remaining<=0||remaining>maxWait;if(isCalled){if(maxTimeoutId){maxTimeoutId=clearTimeout(maxTimeoutId)}lastCalled=stamp;result=func.apply(thisArg,args)}else if(!maxTimeoutId){maxTimeoutId=setTimeout(maxDelayed,remaining)}}if(isCalled&&timeoutId){timeoutId=clearTimeout(timeoutId)}else if(!timeoutId&&wait!==maxWait){timeoutId=setTimeout(delayed,wait)}if(leadingCall){isCalled=true;result=func.apply(thisArg,args)}if(isCalled&&!timeoutId&&!maxTimeoutId){args=thisArg=undefined}return result}debounced.cancel=cancel;return debounced}var defer=restParam(function(func,args){return baseDelay(func,1,args)});var delay=restParam(function(func,wait,args){return baseDelay(func,wait,args)});var flow=createFlow();var flowRight=createFlow(true);function memoize(func,resolver){if(typeof func!="function"||resolver&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);memoized.cache=cache.set(key,result);return result};memoized.cache=new memoize.Cache;return memoized}var modArgs=restParam(function(func,transforms){transforms=baseFlatten(transforms);if(typeof func!="function"||!arrayEvery(transforms,baseIsFunction)){throw new TypeError(FUNC_ERROR_TEXT)}var length=transforms.length;return restParam(function(args){var index=nativeMin(args.length,length);while(index--){args[index]=transforms[index](args[index])}return func.apply(this,args)})});function negate(predicate){if(typeof predicate!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return function(){return!predicate.apply(this,arguments)}}function once(func){return before(2,func)}var partial=createPartial(PARTIAL_FLAG);var partialRight=createPartial(PARTIAL_RIGHT_FLAG);var rearg=restParam(function(func,indexes){return createWrapper(func,REARG_FLAG,undefined,undefined,undefined,baseFlatten(indexes))});function restParam(func,start){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=nativeMax(start===undefined?func.length-1:+start||0,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);while(++index<length){rest[index]=args[start+index]}switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);index=-1;while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=rest;return func.apply(this,otherArgs)}}function spread(func){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return function(array){return func.apply(this,array)}}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(options===false){leading=false}else if(isObject(options)){leading="leading"in options?!!options.leading:leading;trailing="trailing"in options?!!options.trailing:trailing}return debounce(func,wait,{leading:leading,maxWait:+wait,trailing:trailing})}function wrap(value,wrapper){wrapper=wrapper==null?identity:wrapper;return createWrapper(wrapper,PARTIAL_FLAG,undefined,[value],[])}function clone(value,isDeep,customizer,thisArg){if(isDeep&&typeof isDeep!="boolean"&&isIterateeCall(value,isDeep,customizer)){isDeep=false}else if(typeof isDeep=="function"){thisArg=customizer;customizer=isDeep;isDeep=false}return typeof customizer=="function"?baseClone(value,isDeep,bindCallback(customizer,thisArg,1)):baseClone(value,isDeep)}function cloneDeep(value,customizer,thisArg){return typeof customizer=="function"?baseClone(value,true,bindCallback(customizer,thisArg,1)):baseClone(value,true)}function gt(value,other){return value>other}function gte(value,other){return value>=other}function isArguments(value){return isObjectLike(value)&&isArrayLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")}var isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag};function isBoolean(value){return value===true||value===false||isObjectLike(value)&&objToString.call(value)==boolTag}function isDate(value){return isObjectLike(value)&&objToString.call(value)==dateTag}function isElement(value){return!!value&&value.nodeType===1&&isObjectLike(value)&&!isPlainObject(value)}function isEmpty(value){if(value==null){return true}if(isArrayLike(value)&&(isArray(value)||isString(value)||isArguments(value)||isObjectLike(value)&&isFunction(value.splice))){return!value.length}return!keys(value).length}function isEqual(value,other,customizer,thisArg){customizer=typeof customizer=="function"?bindCallback(customizer,thisArg,3):undefined;var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,customizer):!!result}function isError(value){return isObjectLike(value)&&typeof value.message=="string"&&objToString.call(value)==errorTag}function isFinite(value){return typeof value=="number"&&nativeIsFinite(value)}function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}function isMatch(object,source,customizer,thisArg){customizer=typeof customizer=="function"?bindCallback(customizer,thisArg,3):undefined;return baseIsMatch(object,getMatchData(source),customizer)}function isNaN(value){return isNumber(value)&&value!=+value}function isNative(value){if(value==null){return false}if(isFunction(value)){return reIsNative.test(fnToString.call(value))}return isObjectLike(value)&&reIsHostCtor.test(value)}function isNull(value){return value===null}function isNumber(value){return typeof value=="number"||isObjectLike(value)&&objToString.call(value)==numberTag}function isPlainObject(value){var Ctor;if(!(isObjectLike(value)&&objToString.call(value)==objectTag&&!isArguments(value))||!hasOwnProperty.call(value,"constructor")&&(Ctor=value.constructor,typeof Ctor=="function"&&!(Ctor instanceof Ctor))){return false}var result;baseForIn(value,function(subValue,key){result=key});return result===undefined||hasOwnProperty.call(value,result)}function isRegExp(value){return isObject(value)&&objToString.call(value)==regexpTag}function isString(value){return typeof value=="string"||isObjectLike(value)&&objToString.call(value)==stringTag}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)]}function isUndefined(value){return value===undefined}function lt(value,other){return value<other}function lte(value,other){return value<=other}function toArray(value){var length=value?getLength(value):0;if(!isLength(length)){return values(value)}if(!length){return[]}return arrayCopy(value)}function toPlainObject(value){return baseCopy(value,keysIn(value))}var merge=createAssigner(baseMerge);var assign=createAssigner(function(object,source,customizer){return customizer?assignWith(object,source,customizer):baseAssign(object,source)});function create(prototype,properties,guard){var result=baseCreate(prototype);if(guard&&isIterateeCall(prototype,properties,guard)){properties=undefined}return properties?baseAssign(result,properties):result}var defaults=createDefaults(assign,assignDefaults);var defaultsDeep=createDefaults(merge,mergeDefaults);var findKey=createFindKey(baseForOwn);var findLastKey=createFindKey(baseForOwnRight);var forIn=createForIn(baseFor);var forInRight=createForIn(baseForRight);var forOwn=createForOwn(baseForOwn);var forOwnRight=createForOwn(baseForOwnRight);function functions(object){return baseFunctions(object,keysIn(object))}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,toPath(path),path+"");return result===undefined?defaultValue:result}function has(object,path){if(object==null){return false}var result=hasOwnProperty.call(object,path);if(!result&&!isKey(path)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));if(object==null){return false}path=last(path);result=hasOwnProperty.call(object,path)}return result||isLength(object.length)&&isIndex(path,object.length)&&(isArray(object)||isArguments(object))}function invert(object,multiValue,guard){if(guard&&isIterateeCall(object,multiValue,guard)){multiValue=undefined}var index=-1,props=keys(object),length=props.length,result={};while(++index<length){var key=props[index],value=object[key];if(multiValue){if(hasOwnProperty.call(result,value)){result[value].push(key)}else{result[value]=[key]}}else{result[value]=key}}return result}var keys=!nativeKeys?shimKeys:function(object){var Ctor=object==null?undefined:object.constructor;if(typeof Ctor=="function"&&Ctor.prototype===object||typeof object!="function"&&isArrayLike(object)){return shimKeys(object)}return isObject(object)?nativeKeys(object):[]};function keysIn(object){if(object==null){return[]}if(!isObject(object)){object=Object(object)}var length=object.length;length=length&&isLength(length)&&(isArray(object)||isArguments(object))&&length||0;var Ctor=object.constructor,index=-1,isProto=typeof Ctor=="function"&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;while(++index<length){result[index]=index+""}for(var key in object){if(!(skipIndexes&&isIndex(key,length))&&!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}var mapKeys=createObjectMapper(true);var mapValues=createObjectMapper();var omit=restParam(function(object,props){if(object==null){return{}}if(typeof props[0]!="function"){var props=arrayMap(baseFlatten(props),String);return pickByArray(object,baseDifference(keysIn(object),props))}var predicate=bindCallback(props[0],props[1],3);return pickByCallback(object,function(value,key,object){return!predicate(value,key,object)})});function pairs(object){object=toObject(object);var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){var key=props[index];result[index]=[key,object[key]]}return result}var pick=restParam(function(object,props){if(object==null){return{}}return typeof props[0]=="function"?pickByCallback(object,bindCallback(props[0],props[1],3)):pickByArray(object,baseFlatten(props))});function result(object,path,defaultValue){var result=object==null?undefined:object[path];if(result===undefined){if(object!=null&&!isKey(path,object)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));result=object==null?undefined:object[last(path)]}result=result===undefined?defaultValue:result}return isFunction(result)?result.call(object):result}function set(object,path,value){if(object==null){return object}var pathKey=path+"";path=object[pathKey]!=null||isKey(path,object)?[pathKey]:toPath(path);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=path[index];if(isObject(nested)){if(index==lastIndex){nested[key]=value}else if(nested[key]==null){nested[key]=isIndex(path[index+1])?[]:{}}}nested=nested[key]}return object}function transform(object,iteratee,accumulator,thisArg){var isArr=isArray(object)||isTypedArray(object);iteratee=getCallback(iteratee,thisArg,4);if(accumulator==null){if(isArr||isObject(object)){var Ctor=object.constructor;if(isArr){accumulator=isArray(object)?new Ctor:[]}else{accumulator=baseCreate(isFunction(Ctor)?Ctor.prototype:undefined)}}else{accumulator={}}}(isArr?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)});return accumulator}function values(object){return baseValues(object,keys(object))}function valuesIn(object){return baseValues(object,keysIn(object))}function inRange(value,start,end){start=+start||0;if(end===undefined){end=start;start=0}else{end=+end||0}return value>=nativeMin(start,end)&&value<nativeMax(start,end)}function random(min,max,floating){if(floating&&isIterateeCall(min,max,floating)){max=floating=undefined}var noMin=min==null,noMax=max==null;if(floating==null){if(noMax&&typeof min=="boolean"){floating=min;min=1}else if(typeof max=="boolean"){floating=max;noMax=true}}if(noMin&&noMax){max=1;noMax=false}min=+min||0;if(noMax){max=min;min=0}else{max=+max||0}if(floating||min%1||max%1){var rand=nativeRandom();return nativeMin(min+rand*(max-min+parseFloat("1e-"+((rand+"").length-1))),max)}return baseRandom(min,max)}var camelCase=createCompounder(function(result,word,index){word=word.toLowerCase();return result+(index?word.charAt(0).toUpperCase()+word.slice(1):word)});function capitalize(string){string=baseToString(string);return string&&string.charAt(0).toUpperCase()+string.slice(1)}function deburr(string){string=baseToString(string);return string&&string.replace(reLatin1,deburrLetter).replace(reComboMark,"")}function endsWith(string,target,position){string=baseToString(string);target=target+"";var length=string.length;position=position===undefined?length:nativeMin(position<0?0:+position||0,length);position-=target.length;return position>=0&&string.indexOf(target,position)==position}function escape(string){string=baseToString(string);return string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}function escapeRegExp(string){string=baseToString(string);return string&&reHasRegExpChars.test(string)?string.replace(reRegExpChars,escapeRegExpChar):string||"(?:)"}var kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()});function pad(string,length,chars){string=baseToString(string);length=+length;var strLength=string.length;if(strLength>=length||!nativeIsFinite(length)){return string}var mid=(length-strLength)/2,leftLength=nativeFloor(mid),rightLength=nativeCeil(mid);chars=createPadding("",rightLength,chars);return chars.slice(0,leftLength)+string+chars}var padLeft=createPadDir();var padRight=createPadDir(true);function parseInt(string,radix,guard){if(guard?isIterateeCall(string,radix,guard):radix==null){radix=0}else if(radix){radix=+radix}string=trim(string);return nativeParseInt(string,radix||(reHasHexPrefix.test(string)?16:10))}function repeat(string,n){var result="";string=baseToString(string);n=+n;if(n<1||!string||!nativeIsFinite(n)){return result}do{if(n%2){result+=string}n=nativeFloor(n/2);string+=string}while(n);return result}var snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()});var startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+(word.charAt(0).toUpperCase()+word.slice(1))});function startsWith(string,target,position){string=baseToString(string);position=position==null?0:nativeMin(position<0?0:+position||0,string.length);return string.lastIndexOf(target,position)==position}function template(string,options,otherOptions){var settings=lodash.templateSettings;if(otherOptions&&isIterateeCall(string,options,otherOptions)){options=otherOptions=undefined}string=baseToString(string);options=assignWith(baseAssign({},otherOptions||options),settings,assignOwnDefaults);var imports=assignWith(baseAssign({},options.imports),settings.imports,assignOwnDefaults),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys);var isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");var sourceURL="//# sourceURL="+("sourceURL"in options?options.sourceURL:"lodash.templateSources["+ ++templateCounter+"]")+"\n";string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){isEscaping=true;source+="' +\n__e("+escapeValue+") +\n'"}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '"}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"}index=offset+match.length;return match});source+="';\n";var variable=options.variable;if(!variable){source="with (obj) {\n"+source+"\n}\n"}source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;");source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)});result.source=source;if(isError(result)){throw result}return result}function trim(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(trimmedLeftIndex(string),trimmedRightIndex(string)+1)}chars=chars+"";return string.slice(charsLeftIndex(string,chars),charsRightIndex(string,chars)+1)}function trimLeft(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(trimmedLeftIndex(string))}return string.slice(charsLeftIndex(string,chars+""))}function trimRight(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(0,trimmedRightIndex(string)+1)}return string.slice(0,charsRightIndex(string,chars+"")+1)}function trunc(string,options,guard){if(guard&&isIterateeCall(string,options,guard)){options=undefined}var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(options!=null){if(isObject(options)){var separator="separator"in options?options.separator:separator;length="length"in options?+options.length||0:length;omission="omission"in options?baseToString(options.omission):omission}else{length=+options||0}}string=baseToString(string);if(length>=string.length){return string}var end=length-omission.length;if(end<1){return omission}var result=string.slice(0,end);if(separator==null){return result+omission}if(isRegExp(separator)){if(string.slice(end).search(separator)){var match,newEnd,substring=string.slice(0,end);if(!separator.global){separator=RegExp(separator.source,(reFlags.exec(separator)||"")+"g")}separator.lastIndex=0;while(match=separator.exec(substring)){newEnd=match.index}result=result.slice(0,newEnd==null?end:newEnd)}}else if(string.indexOf(separator,end)!=end){var index=result.lastIndexOf(separator);if(index>-1){result=result.slice(0,index)}}return result+omission}function unescape(string){string=baseToString(string);return string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}function words(string,pattern,guard){if(guard&&isIterateeCall(string,pattern,guard)){pattern=undefined}string=baseToString(string);return string.match(pattern||reWords)||[]}var attempt=restParam(function(func,args){try{return func.apply(undefined,args)}catch(e){return isError(e)?e:new Error(e)}});function callback(func,thisArg,guard){if(guard&&isIterateeCall(func,thisArg,guard)){thisArg=undefined}return isObjectLike(func)?matches(func):baseCallback(func,thisArg)}function constant(value){return function(){return value}}function identity(value){return value}function matches(source){return baseMatches(baseClone(source,true))}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,true))}var method=restParam(function(path,args){return function(object){return invokePath(object,path,args)}});var methodOf=restParam(function(object,args){return function(path){return invokePath(object,path,args)}});function mixin(object,source,options){if(options==null){var isObj=isObject(source),props=isObj?keys(source):undefined,methodNames=props&&props.length?baseFunctions(source,props):undefined;if(!(methodNames?methodNames.length:isObj)){methodNames=false;options=source;source=object;object=this}}if(!methodNames){methodNames=baseFunctions(source,keys(source))}var chain=true,index=-1,isFunc=isFunction(object),length=methodNames.length;if(options===false){chain=false}else if(isObject(options)&&"chain"in options){chain=options.chain}while(++index<length){var methodName=methodNames[index],func=source[methodName];object[methodName]=func;if(isFunc){object.prototype[methodName]=function(func){return function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=arrayCopy(this.__actions__);actions.push({func:func,args:arguments,thisArg:object});result.__chain__=chainAll;return result}return func.apply(object,arrayPush([this.value()],arguments))}}(func)}}return object}function noConflict(){root._=oldDash;return this}function noop(){}function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path)}function propertyOf(object){return function(path){return baseGet(object,toPath(path),path+"")}}function range(start,end,step){if(step&&isIterateeCall(start,end,step)){end=step=undefined}start=+start||0;step=step==null?1:+step||0;if(end==null){end=start;start=0}else{end=+end||0}var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);while(++index<length){result[index]=start;start+=step}return result}function times(n,iteratee,thisArg){n=nativeFloor(n);if(n<1||!nativeIsFinite(n)){return[]}var index=-1,result=Array(nativeMin(n,MAX_ARRAY_LENGTH));iteratee=bindCallback(iteratee,thisArg,1);while(++index<n){if(index<MAX_ARRAY_LENGTH){result[index]=iteratee(index)}else{iteratee(index)}}return result}function uniqueId(prefix){var id=++idCounter;return baseToString(prefix)+id}function add(augend,addend){return(+augend||0)+(+addend||0)}var ceil=createRound("ceil");var floor=createRound("floor");var max=createExtremum(gt,NEGATIVE_INFINITY);var min=createExtremum(lt,POSITIVE_INFINITY);var round=createRound("round");function sum(collection,iteratee,thisArg){if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=undefined}iteratee=getCallback(iteratee,thisArg,3);return iteratee.length==1?arraySum(isArray(collection)?collection:toIterable(collection),iteratee):baseSum(collection,iteratee)}lodash.prototype=baseLodash.prototype;LodashWrapper.prototype=baseCreate(baseLodash.prototype);LodashWrapper.prototype.constructor=LodashWrapper;LazyWrapper.prototype=baseCreate(baseLodash.prototype);LazyWrapper.prototype.constructor=LazyWrapper;MapCache.prototype["delete"]=mapDelete;MapCache.prototype.get=mapGet;MapCache.prototype.has=mapHas;MapCache.prototype.set=mapSet;SetCache.prototype.push=cachePush;memoize.Cache=MapCache;lodash.after=after;lodash.ary=ary;lodash.assign=assign;lodash.at=at;lodash.before=before;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.callback=callback;lodash.chain=chain;lodash.chunk=chunk;lodash.compact=compact;lodash.constant=constant;lodash.countBy=countBy;lodash.create=create;lodash.curry=curry;lodash.curryRight=curryRight;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defaultsDeep=defaultsDeep;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.drop=drop;lodash.dropRight=dropRight;lodash.dropRightWhile=dropRightWhile;lodash.dropWhile=dropWhile;lodash.fill=fill;lodash.filter=filter;lodash.flatten=flatten;lodash.flattenDeep=flattenDeep;lodash.flow=flow;lodash.flowRight=flowRight;lodash.forEach=forEach;lodash.forEachRight=forEachRight;lodash.forIn=forIn;lodash.forInRight=forInRight;lodash.forOwn=forOwn;lodash.forOwnRight=forOwnRight;lodash.functions=functions;lodash.groupBy=groupBy;lodash.indexBy=indexBy;lodash.initial=initial;lodash.intersection=intersection;lodash.invert=invert;lodash.invoke=invoke;lodash.keys=keys;lodash.keysIn=keysIn;lodash.map=map;lodash.mapKeys=mapKeys;lodash.mapValues=mapValues;lodash.matches=matches;lodash.matchesProperty=matchesProperty;lodash.memoize=memoize;lodash.merge=merge;lodash.method=method;lodash.methodOf=methodOf;lodash.mixin=mixin;lodash.modArgs=modArgs;lodash.negate=negate;lodash.omit=omit;lodash.once=once;lodash.pairs=pairs;lodash.partial=partial;lodash.partialRight=partialRight;lodash.partition=partition;lodash.pick=pick;lodash.pluck=pluck;lodash.property=property;lodash.propertyOf=propertyOf;lodash.pull=pull;lodash.pullAt=pullAt;lodash.range=range;lodash.rearg=rearg;lodash.reject=reject;lodash.remove=remove;lodash.rest=rest;lodash.restParam=restParam;lodash.set=set;lodash.shuffle=shuffle;lodash.slice=slice;lodash.sortBy=sortBy;lodash.sortByAll=sortByAll;lodash.sortByOrder=sortByOrder;lodash.spread=spread;lodash.take=take;lodash.takeRight=takeRight;lodash.takeRightWhile=takeRightWhile;lodash.takeWhile=takeWhile;lodash.tap=tap;lodash.throttle=throttle;lodash.thru=thru;lodash.times=times;lodash.toArray=toArray;lodash.toPlainObject=toPlainObject;lodash.transform=transform;lodash.union=union;lodash.uniq=uniq;lodash.unzip=unzip;lodash.unzipWith=unzipWith;lodash.values=values;lodash.valuesIn=valuesIn;lodash.where=where;lodash.without=without;lodash.wrap=wrap;lodash.xor=xor;lodash.zip=zip;lodash.zipObject=zipObject;lodash.zipWith=zipWith;lodash.backflow=flowRight;lodash.collect=map;lodash.compose=flowRight;lodash.each=forEach;lodash.eachRight=forEachRight;lodash.extend=assign;lodash.iteratee=callback;lodash.methods=functions;lodash.object=zipObject;lodash.select=filter;lodash.tail=rest;lodash.unique=uniq;mixin(lodash,lodash);lodash.add=add;lodash.attempt=attempt;lodash.camelCase=camelCase;lodash.capitalize=capitalize;lodash.ceil=ceil;lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.deburr=deburr;lodash.endsWith=endsWith;lodash.escape=escape;lodash.escapeRegExp=escapeRegExp;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.findLast=findLast;lodash.findLastIndex=findLastIndex;lodash.findLastKey=findLastKey;lodash.findWhere=findWhere;lodash.first=first;lodash.floor=floor;lodash.get=get;lodash.gt=gt;lodash.gte=gte;lodash.has=has;lodash.identity=identity;lodash.includes=includes;lodash.indexOf=indexOf;lodash.inRange=inRange;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isBoolean=isBoolean;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isError=isError;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isMatch=isMatch;lodash.isNaN=isNaN;lodash.isNative=isNative;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isString=isString;lodash.isTypedArray=isTypedArray;lodash.isUndefined=isUndefined;lodash.kebabCase=kebabCase;lodash.last=last;lodash.lastIndexOf=lastIndexOf;lodash.lt=lt;lodash.lte=lte;lodash.max=max;lodash.min=min;lodash.noConflict=noConflict;lodash.noop=noop;lodash.now=now;lodash.pad=pad;lodash.padLeft=padLeft;lodash.padRight=padRight;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.repeat=repeat;lodash.result=result;lodash.round=round;lodash.runInContext=runInContext;lodash.size=size;lodash.snakeCase=snakeCase;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.sortedLastIndex=sortedLastIndex;lodash.startCase=startCase;lodash.startsWith=startsWith;lodash.sum=sum;lodash.template=template;lodash.trim=trim;lodash.trimLeft=trimLeft;lodash.trimRight=trimRight;lodash.trunc=trunc;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.words=words;lodash.all=every;lodash.any=some;lodash.contains=includes;lodash.eq=isEqual;lodash.detect=find;lodash.foldl=reduce;lodash.foldr=reduceRight;lodash.head=first;lodash.include=includes;lodash.inject=reduce;mixin(lodash,function(){var source={};baseForOwn(lodash,function(func,methodName){if(!lodash.prototype[methodName]){source[methodName]=func}});return source}(),false);lodash.sample=sample;lodash.prototype.sample=function(n){if(!this.__chain__&&n==null){return sample(this.value())}return this.thru(function(value){return sample(value,n)})};lodash.VERSION=VERSION;arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash});arrayEach(["drop","take"],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){var filtered=this.__filtered__;if(filtered&&!index){return new LazyWrapper(this)}n=n==null?1:nativeMax(nativeFloor(n)||0,0);var result=this.clone();if(filtered){result.__takeCount__=nativeMin(result.__takeCount__,n)}else{result.__views__.push({size:n,type:methodName+(result.__dir__<0?"Right":"")})}return result};LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()}});arrayEach(["filter","map","takeWhile"],function(methodName,index){var type=index+1,isFilter=type!=LAZY_MAP_FLAG;LazyWrapper.prototype[methodName]=function(iteratee,thisArg){var result=this.clone();result.__iteratees__.push({iteratee:getCallback(iteratee,thisArg,1),type:type});result.__filtered__=result.__filtered__||isFilter;return result}});arrayEach(["first","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}});arrayEach(["initial","rest"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1)}});arrayEach(["pluck","where"],function(methodName,index){var operationName=index?"filter":"map",createCallback=index?baseMatches:property;LazyWrapper.prototype[methodName]=function(value){return this[operationName](createCallback(value))}});LazyWrapper.prototype.compact=function(){return this.filter(identity)};LazyWrapper.prototype.reject=function(predicate,thisArg){predicate=getCallback(predicate,thisArg,1);return this.filter(function(value){return!predicate(value)})};LazyWrapper.prototype.slice=function(start,end){start=start==null?0:+start||0;var result=this;if(result.__filtered__&&(start>0||end<0)){return new LazyWrapper(result)}if(start<0){result=result.takeRight(-start)}else if(start){result=result.drop(start)}if(end!==undefined){end=+end||0;result=end<0?result.dropRight(-end):result.take(end-start)}return result};LazyWrapper.prototype.takeRightWhile=function(predicate,thisArg){return this.reverse().takeWhile(predicate,thisArg).reverse()};LazyWrapper.prototype.toArray=function(){return this.take(POSITIVE_INFINITY)};baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|map|reject)|While$/.test(methodName),retUnwrapped=/^(?:first|last)$/.test(methodName),lodashFunc=lodash[retUnwrapped?"take"+(methodName=="last"?"Right":""):methodName];if(!lodashFunc){return}lodash.prototype[methodName]=function(){var args=retUnwrapped?[1]:arguments,chainAll=this.__chain__,value=this.__wrapped__,isHybrid=!!this.__actions__.length,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value);if(useLazy&&checkIteratee&&typeof iteratee=="function"&&iteratee.length!=1){isLazy=useLazy=false}var interceptor=function(value){return retUnwrapped&&chainAll?lodashFunc(value,1)[0]:lodashFunc.apply(undefined,arrayPush([value],args))};var action={func:thru,args:[interceptor],thisArg:undefined},onlyLazy=isLazy&&!isHybrid;if(retUnwrapped&&!chainAll){if(onlyLazy){value=value.clone();value.__actions__.push(action);return func.call(value)}return lodashFunc.call(undefined,this.value())[0]}if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);result.__actions__.push(action);return new LodashWrapper(result,chainAll)}return this.thru(interceptor)}});arrayEach(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(methodName){var func=(/^(?:replace|split)$/.test(methodName)?stringProto:arrayProto)[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:join|pop|replace|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){return func.apply(this.value(),args)}return this[chainName](function(value){return func.apply(value,args)})}});baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name,names=realNames[key]||(realNames[key]=[]);names.push({name:methodName,func:lodashFunc})}});realNames[createHybridWrapper(undefined,BIND_KEY_FLAG).name]=[{name:"wrapper",func:undefined}];LazyWrapper.prototype.clone=lazyClone;LazyWrapper.prototype.reverse=lazyReverse;LazyWrapper.prototype.value=lazyValue;lodash.prototype.chain=wrapperChain;lodash.prototype.commit=wrapperCommit;lodash.prototype.concat=wrapperConcat;lodash.prototype.plant=wrapperPlant;lodash.prototype.reverse=wrapperReverse;lodash.prototype.toString=wrapperToString;lodash.prototype.run=lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue;lodash.prototype.collect=lodash.prototype.map;lodash.prototype.head=lodash.prototype.first;lodash.prototype.select=lodash.prototype.filter;lodash.prototype.tail=lodash.prototype.rest;return lodash}var _=runInContext();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){root._=_;define(function(){return _})}else if(freeExports&&freeModule){if(moduleExports){(freeModule.exports=_)._=_}else{freeExports._=_}}else{root._=_}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],121:[function(require,module,exports){var baseCreate=require(128),baseLodash=require(132);var POSITIVE_INFINITY=Number.POSITIVE_INFINITY;function LazyWrapper(value){this.__wrapped__=value;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=POSITIVE_INFINITY;this.__views__=[]}LazyWrapper.prototype=baseCreate(baseLodash.prototype);LazyWrapper.prototype.constructor=LazyWrapper;module.exports=LazyWrapper},{128:128,132:132}],122:[function(require,module,exports){var baseCreate=require(128),baseLodash=require(132);function LodashWrapper(value,chainAll,actions){this.__wrapped__=value;this.__actions__=actions||[];this.__chain__=!!chainAll}LodashWrapper.prototype=baseCreate(baseLodash.prototype);LodashWrapper.prototype.constructor=LodashWrapper;module.exports=LodashWrapper},{128:128,132:132}],123:[function(require,module,exports){function arrayCopy(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}module.exports=arrayCopy},{}],124:[function(require,module,exports){function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index]}return array}module.exports=arrayPush},{}],125:[function(require,module,exports){var keys=require(173);function assignWith(object,source,customizer){var index=-1,props=keys(source),length=props.length;while(++index<length){var key=props[index],value=object[key],result=customizer(value,source[key],key,object,source);if((result===result?result!==value:value===value)||value===undefined&&!(key in object)){object[key]=result}}return object}module.exports=assignWith},{173:173}],126:[function(require,module,exports){var baseCopy=require(127),keys=require(173);function baseAssign(object,source){return source==null?object:baseCopy(source,keys(source),object)}module.exports=baseAssign},{127:127,173:173}],127:[function(require,module,exports){function baseCopy(source,props,object){object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];object[key]=source[key]}return object}module.exports=baseCopy},{}],128:[function(require,module,exports){var isObject=require(169);var baseCreate=function(){function object(){}return function(prototype){if(isObject(prototype)){object.prototype=prototype;var result=new object;object.prototype=undefined}return result||{}}}();module.exports=baseCreate},{169:169}],129:[function(require,module,exports){var arrayPush=require(124),isArguments=require(164),isArray=require(165),isArrayLike=require(150),isObjectLike=require(155);function baseFlatten(array,isDeep,isStrict,result){result||(result=[]);var index=-1,length=array.length;while(++index<length){var value=array[index];if(isObjectLike(value)&&isArrayLike(value)&&(isStrict||isArray(value)||isArguments(value))){if(isDeep){baseFlatten(value,isDeep,isStrict,result)}else{arrayPush(result,value)}}else if(!isStrict){result[result.length]=value}}return result}module.exports=baseFlatten},{124:124,150:150,155:155,164:164,165:165}],130:[function(require,module,exports){var isFunction=require(166);function baseFunctions(object,props){var index=-1,length=props.length,resIndex=-1,result=[];while(++index<length){var key=props[index];if(isFunction(object[key])){result[++resIndex]=key}}return result}module.exports=baseFunctions},{166:166}],131:[function(require,module,exports){var indexOfNaN=require(149);function baseIndexOf(array,value,fromIndex){if(value!==value){return indexOfNaN(array,fromIndex)}var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index}}return-1}module.exports=baseIndexOf},{149:149}],132:[function(require,module,exports){function baseLodash(){}module.exports=baseLodash},{}],133:[function(require,module,exports){function baseProperty(key){return function(object){return object==null?undefined:object[key]}}module.exports=baseProperty},{}],134:[function(require,module,exports){var identity=require(176),metaMap=require(157);var baseSetData=!metaMap?identity:function(func,data){metaMap.set(func,data);return func};module.exports=baseSetData},{157:157,176:176}],135:[function(require,module,exports){function baseValues(object,props){var index=-1,length=props.length,result=Array(length);while(++index<length){result[index]=object[props[index]]}return result}module.exports=baseValues},{}],136:[function(require,module,exports){var identity=require(176);function bindCallback(func,thisArg,argCount){if(typeof func!="function"){return identity}if(thisArg===undefined){return func}switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}module.exports=bindCallback},{176:176}],137:[function(require,module,exports){var nativeMax=Math.max;function composeArgs(args,partials,holders){var holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),leftIndex=-1,leftLength=partials.length,result=Array(leftLength+argsLength);while(++leftIndex<leftLength){result[leftIndex]=partials[leftIndex]}while(++argsIndex<holdersLength){result[holders[argsIndex]]=args[argsIndex]}while(argsLength--){result[leftIndex++]=args[argsIndex++]}return result}module.exports=composeArgs},{}],138:[function(require,module,exports){var nativeMax=Math.max;function composeArgsRight(args,partials,holders){var holdersIndex=-1,holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),rightIndex=-1,rightLength=partials.length,result=Array(argsLength+rightLength);while(++argsIndex<argsLength){result[argsIndex]=args[argsIndex]}var offset=argsIndex;while(++rightIndex<rightLength){result[offset+rightIndex]=partials[rightIndex]}while(++holdersIndex<holdersLength){result[offset+holders[holdersIndex]]=args[argsIndex++]}return result}module.exports=composeArgsRight},{}],139:[function(require,module,exports){var bindCallback=require(136),isIterateeCall=require(152),restParam=require(119);function createAssigner(assigner){return restParam(function(object,sources){var index=-1,length=object==null?0:sources.length,customizer=length>2?sources[length-2]:undefined,guard=length>2?sources[2]:undefined,thisArg=length>1?sources[length-1]:undefined;if(typeof customizer=="function"){customizer=bindCallback(customizer,thisArg,5);length-=2}else{customizer=typeof thisArg=="function"?thisArg:undefined;length-=customizer?1:0}if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}while(++index<length){var source=sources[index];if(source){assigner(object,source,customizer)}}return object})}module.exports=createAssigner},{119:119,136:136,152:152}],140:[function(require,module,exports){(function(global){var createCtorWrapper=require(141);function createBindWrapper(func,thisArg){var Ctor=createCtorWrapper(func);function wrapper(){var fn=this&&this!==global&&this instanceof wrapper?Ctor:func;return fn.apply(thisArg,arguments)}return wrapper}module.exports=createBindWrapper}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{141:141}],141:[function(require,module,exports){var baseCreate=require(128),isObject=require(169);function createCtorWrapper(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6])}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding}}module.exports=createCtorWrapper},{128:128,169:169}],142:[function(require,module,exports){(function(global){var arrayCopy=require(123),composeArgs=require(137),composeArgsRight=require(138),createCtorWrapper=require(141),isLaziable=require(153),reorder=require(159),replaceHolders=require(160),setData=require(161);var BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_BOUND_FLAG=4,CURRY_FLAG=8,CURRY_RIGHT_FLAG=16,PARTIAL_FLAG=32,PARTIAL_RIGHT_FLAG=64,ARY_FLAG=128;var nativeMax=Math.max;function createHybridWrapper(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&ARY_FLAG,isBind=bitmask&BIND_FLAG,isBindKey=bitmask&BIND_KEY_FLAG,isCurry=bitmask&CURRY_FLAG,isCurryBound=bitmask&CURRY_BOUND_FLAG,isCurryRight=bitmask&CURRY_RIGHT_FLAG,Ctor=isBindKey?undefined:createCtorWrapper(func);function wrapper(){var length=arguments.length,index=length,args=Array(length);while(index--){args[index]=arguments[index]}if(partials){args=composeArgs(args,partials,holders)}if(partialsRight){args=composeArgsRight(args,partialsRight,holdersRight)}if(isCurry||isCurryRight){var placeholder=wrapper.placeholder,argsHolders=replaceHolders(args,placeholder);length-=argsHolders.length;if(length<arity){var newArgPos=argPos?arrayCopy(argPos):undefined,newArity=nativeMax(arity-length,0),newsHolders=isCurry?argsHolders:undefined,newHoldersRight=isCurry?undefined:argsHolders,newPartials=isCurry?args:undefined,newPartialsRight=isCurry?undefined:args;bitmask|=isCurry?PARTIAL_FLAG:PARTIAL_RIGHT_FLAG;bitmask&=~(isCurry?PARTIAL_RIGHT_FLAG:PARTIAL_FLAG);if(!isCurryBound){bitmask&=~(BIND_FLAG|BIND_KEY_FLAG)}var newData=[func,bitmask,thisArg,newPartials,newsHolders,newPartialsRight,newHoldersRight,newArgPos,ary,newArity],result=createHybridWrapper.apply(undefined,newData);if(isLaziable(func)){setData(result,newData)}result.placeholder=placeholder;return result}}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;if(argPos){args=reorder(args,argPos)}if(isAry&&ary<args.length){args.length=ary}if(this&&this!==global&&this instanceof wrapper){fn=Ctor||createCtorWrapper(func)}return fn.apply(thisBinding,args)}return wrapper}module.exports=createHybridWrapper}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{123:123,137:137,138:138,141:141,153:153,159:159,160:160,161:161}],143:[function(require,module,exports){(function(global){var createCtorWrapper=require(141);var BIND_FLAG=1;function createPartialWrapper(func,bitmask,thisArg,partials){var isBind=bitmask&BIND_FLAG,Ctor=createCtorWrapper(func);function wrapper(){var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength);while(++leftIndex<leftLength){args[leftIndex]=partials[leftIndex]}while(argsLength--){args[leftIndex++]=arguments[++argsIndex]}var fn=this&&this!==global&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,args)}return wrapper}module.exports=createPartialWrapper}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{141:141}],144:[function(require,module,exports){var baseSetData=require(134),createBindWrapper=require(140),createHybridWrapper=require(142),createPartialWrapper=require(143),getData=require(145),mergeData=require(156),setData=require(161);var BIND_FLAG=1,BIND_KEY_FLAG=2,PARTIAL_FLAG=32,PARTIAL_RIGHT_FLAG=64;var FUNC_ERROR_TEXT="Expected a function";var nativeMax=Math.max;function createWrapper(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&BIND_KEY_FLAG;if(!isBindKey&&typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var length=partials?partials.length:0;if(!length){bitmask&=~(PARTIAL_FLAG|PARTIAL_RIGHT_FLAG);partials=holders=undefined}length-=holders?holders.length:0;if(bitmask&PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined}var data=isBindKey?undefined:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data){mergeData(newData,data);bitmask=newData[1];arity=newData[9]}newData[9]=arity==null?isBindKey?0:func.length:nativeMax(arity-length,0)||0;if(bitmask==BIND_FLAG){var result=createBindWrapper(newData[0],newData[2])}else if((bitmask==PARTIAL_FLAG||bitmask==(BIND_FLAG|PARTIAL_FLAG))&&!newData[4].length){result=createPartialWrapper.apply(undefined,newData)}else{result=createHybridWrapper.apply(undefined,newData)}var setter=data?baseSetData:setData;return setter(result,newData)}module.exports=createWrapper},{134:134,140:140,142:142,143:143,145:145,156:156,161:161}],145:[function(require,module,exports){var metaMap=require(157),noop=require(177);var getData=!metaMap?noop:function(func){return metaMap.get(func)};module.exports=getData},{157:157,177:177}],146:[function(require,module,exports){var realNames=require(158);function getFuncName(func){var result=func.name+"",array=realNames[result],length=array?array.length:0;while(length--){var data=array[length],otherFunc=data.func;if(otherFunc==null||otherFunc==func){return data.name}}return result}module.exports=getFuncName},{158:158}],147:[function(require,module,exports){var baseProperty=require(133);var getLength=baseProperty("length");module.exports=getLength},{133:133}],148:[function(require,module,exports){var isNative=require(167);function getNative(object,key){var value=object==null?undefined:object[key];return isNative(value)?value:undefined}module.exports=getNative},{167:167}],149:[function(require,module,exports){function indexOfNaN(array,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?0:-1);while(fromRight?index--:++index<length){var other=array[index];if(other!==other){return index}}return-1}module.exports=indexOfNaN},{}],150:[function(require,module,exports){var getLength=require(147),isLength=require(154);function isArrayLike(value){return value!=null&&isLength(getLength(value))}module.exports=isArrayLike},{147:147,154:154}],151:[function(require,module,exports){var reIsUint=/^\d+$/;var MAX_SAFE_INTEGER=9007199254740991;function isIndex(value,length){value=typeof value=="number"||reIsUint.test(value)?+value:-1;length=length==null?MAX_SAFE_INTEGER:length;return value>-1&&value%1==0&&value<length}module.exports=isIndex},{}],152:[function(require,module,exports){var isArrayLike=require(150),isIndex=require(151),isObject=require(169);function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){var other=object[index];return value===value?value===other:other!==other}return false}module.exports=isIterateeCall},{150:150,151:151,169:169}],153:[function(require,module,exports){var LazyWrapper=require(121),getData=require(145),getFuncName=require(146),lodash=require(114);function isLaziable(func){var funcName=getFuncName(func),other=lodash[funcName];if(typeof other!="function"||!(funcName in LazyWrapper.prototype)){return false}if(func===other){return true}var data=getData(other);return!!data&&func===data[0]}module.exports=isLaziable},{114:114,121:121,145:145,146:146}],154:[function(require,module,exports){var MAX_SAFE_INTEGER=9007199254740991;function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}module.exports=isLength},{}],155:[function(require,module,exports){function isObjectLike(value){return!!value&&typeof value=="object"}module.exports=isObjectLike},{}],156:[function(require,module,exports){var arrayCopy=require(123),composeArgs=require(137),composeArgsRight=require(138),replaceHolders=require(160);var BIND_FLAG=1,CURRY_BOUND_FLAG=4,CURRY_FLAG=8,ARY_FLAG=128,REARG_FLAG=256;var PLACEHOLDER="__lodash_placeholder__";var nativeMin=Math.min;function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<ARY_FLAG;var isCombo=srcBitmask==ARY_FLAG&&bitmask==CURRY_FLAG||srcBitmask==ARY_FLAG&&bitmask==REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(ARY_FLAG|REARG_FLAG)&&bitmask==CURRY_FLAG;if(!(isCommon||isCombo)){return data}if(srcBitmask&BIND_FLAG){data[2]=source[2];newBitmask|=bitmask&BIND_FLAG?0:CURRY_BOUND_FLAG}var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):arrayCopy(value);data[4]=partials?replaceHolders(data[3],PLACEHOLDER):arrayCopy(source[4])}value=source[5];if(value){partials=data[5];data[5]=partials?composeArgsRight(partials,value,source[6]):arrayCopy(value);data[6]=partials?replaceHolders(data[5],PLACEHOLDER):arrayCopy(source[6])}value=source[7];if(value){data[7]=arrayCopy(value)}if(srcBitmask&ARY_FLAG){data[8]=data[8]==null?source[8]:nativeMin(data[8],source[8])}if(data[9]==null){data[9]=source[9]}data[0]=source[0];data[1]=newBitmask;return data}module.exports=mergeData},{123:123,137:137,138:138,160:160}],157:[function(require,module,exports){(function(global){var getNative=require(148);var WeakMap=getNative(global,"WeakMap");var metaMap=WeakMap&&new WeakMap;module.exports=metaMap}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{148:148}],158:[function(require,module,exports){var realNames={};module.exports=realNames},{}],159:[function(require,module,exports){var arrayCopy=require(123),isIndex=require(151);var nativeMin=Math.min;function reorder(array,indexes){var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=arrayCopy(array);while(length--){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}module.exports=reorder},{123:123,151:151}],160:[function(require,module,exports){var PLACEHOLDER="__lodash_placeholder__";function replaceHolders(array,placeholder){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){if(array[index]===placeholder){array[index]=PLACEHOLDER;result[++resIndex]=index}}return result}module.exports=replaceHolders},{}],161:[function(require,module,exports){var baseSetData=require(134),now=require(116);var HOT_COUNT=150,HOT_SPAN=16;var setData=function(){var count=0,lastCalled=0;return function(key,value){var stamp=now(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return key}}else{count=0}return baseSetData(key,value)}}();module.exports=setData},{116:116,134:134}],162:[function(require,module,exports){var isArguments=require(164),isArray=require(165),isIndex=require(151),isLength=require(154),keysIn=require(174);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function shimKeys(object){var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length;var allowIndexes=!!length&&isLength(length)&&(isArray(object)||isArguments(object));var index=-1,result=[];while(++index<propsLength){var key=props[index];if(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key)){result.push(key)}}return result}module.exports=shimKeys},{151:151,154:154,164:164,165:165,174:174}],163:[function(require,module,exports){var LazyWrapper=require(121),LodashWrapper=require(122),arrayCopy=require(123);function wrapperClone(wrapper){return wrapper instanceof LazyWrapper?wrapper.clone():new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__,arrayCopy(wrapper.__actions__))}module.exports=wrapperClone},{121:121,122:122,123:123}],164:[function(require,module,exports){var isArrayLike=require(150),isObjectLike=require(155);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var propertyIsEnumerable=objectProto.propertyIsEnumerable;function isArguments(value){return isObjectLike(value)&&isArrayLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")}module.exports=isArguments},{150:150,155:155}],165:[function(require,module,exports){var getNative=require(148),isLength=require(154),isObjectLike=require(155);var arrayTag="[object Array]";var objectProto=Object.prototype;var objToString=objectProto.toString;var nativeIsArray=getNative(Array,"isArray");var isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag};module.exports=isArray},{148:148,154:154,155:155}],166:[function(require,module,exports){var isObject=require(169);var funcTag="[object Function]";var objectProto=Object.prototype;var objToString=objectProto.toString;function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}module.exports=isFunction},{169:169}],167:[function(require,module,exports){var isFunction=require(166),isObjectLike=require(155);var reIsHostCtor=/^\[object .+?Constructor\]$/;var objectProto=Object.prototype;var fnToString=Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function isNative(value){if(value==null){return false}if(isFunction(value)){return reIsNative.test(fnToString.call(value))}return isObjectLike(value)&&reIsHostCtor.test(value)}module.exports=isNative},{155:155,166:166}],168:[function(require,module,exports){var isObjectLike=require(155);var numberTag="[object Number]";var objectProto=Object.prototype;var objToString=objectProto.toString;function isNumber(value){return typeof value=="number"||isObjectLike(value)&&objToString.call(value)==numberTag}module.exports=isNumber},{155:155}],169:[function(require,module,exports){function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}module.exports=isObject},{}],170:[function(require,module,exports){var isObjectLike=require(155);var stringTag="[object String]";var objectProto=Object.prototype;var objToString=objectProto.toString;function isString(value){return typeof value=="string"||isObjectLike(value)&&objToString.call(value)==stringTag}module.exports=isString},{155:155}],171:[function(require,module,exports){var assignWith=require(125),baseAssign=require(126),createAssigner=require(139);var assign=createAssigner(function(object,source,customizer){return customizer?assignWith(object,source,customizer):baseAssign(object,source)});module.exports=assign},{125:125,126:126,139:139}],172:[function(require,module,exports){var baseFunctions=require(130),keysIn=require(174);function functions(object){return baseFunctions(object,keysIn(object))}module.exports=functions},{130:130,174:174}],173:[function(require,module,exports){var getNative=require(148),isArrayLike=require(150),isObject=require(169),shimKeys=require(162);var nativeKeys=getNative(Object,"keys");var keys=!nativeKeys?shimKeys:function(object){var Ctor=object==null?undefined:object.constructor;if(typeof Ctor=="function"&&Ctor.prototype===object||typeof object!="function"&&isArrayLike(object)){return shimKeys(object)}return isObject(object)?nativeKeys(object):[]};module.exports=keys},{148:148,150:150,162:162,169:169}],174:[function(require,module,exports){var isArguments=require(164),isArray=require(165),isIndex=require(151),isLength=require(154),isObject=require(169);var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;function keysIn(object){if(object==null){return[]}if(!isObject(object)){object=Object(object)}var length=object.length;length=length&&isLength(length)&&(isArray(object)||isArguments(object))&&length||0;var Ctor=object.constructor,index=-1,isProto=typeof Ctor=="function"&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;while(++index<length){result[index]=index+""}for(var key in object){if(!(skipIndexes&&isIndex(key,length))&&!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}module.exports=keysIn},{151:151,154:154,164:164,165:165,169:169}],175:[function(require,module,exports){var baseValues=require(135),keys=require(173);function values(object){return baseValues(object,keys(object))}module.exports=values},{135:135,173:173}],176:[function(require,module,exports){function identity(value){return value}module.exports=identity},{}],177:[function(require,module,exports){function noop(){}module.exports=noop},{}],178:[function(require,module,exports){(function(process){(function(definition){if(typeof bootstrap==="function"){bootstrap("promise",definition)}else if(typeof exports==="object"){module.exports=definition()}else if(typeof define==="function"&&define.amd){define(definition)}else if(typeof ses!=="undefined"){if(!ses.ok()){return}else{ses.makeQ=definition}}else{Q=definition()}})(function(){"use strict";var hasStacks=false;try{throw new Error}catch(e){hasStacks=!!e.stack}var qStartingLine=captureLine();var qFileName;var noop=function(){};var nextTick=function(){var head={task:void 0,next:null};var tail=head;var flushing=false;var requestTick=void 0;var isNodeJS=false;function flush(){while(head.next){head=head.next;var task=head.task;head.task=void 0;var domain=head.domain;if(domain){head.domain=void 0;domain.enter()}try{task()}catch(e){if(isNodeJS){if(domain){domain.exit()}setTimeout(flush,0);if(domain){domain.enter()}throw e}else{setTimeout(function(){throw e},0)}}if(domain){domain.exit()}}flushing=false}nextTick=function(task){tail=tail.next={task:task,domain:isNodeJS&&process.domain,next:null};if(!flushing){flushing=true;requestTick()}};if(typeof process!=="undefined"&&process.nextTick){isNodeJS=true;requestTick=function(){process.nextTick(flush)}}else if(typeof setImmediate==="function"){if(typeof window!=="undefined"){requestTick=setImmediate.bind(window,flush)}else{requestTick=function(){setImmediate(flush)}}}else if(typeof MessageChannel!=="undefined"){var channel=new MessageChannel;channel.port1.onmessage=function(){requestTick=requestPortTick;channel.port1.onmessage=flush;flush()};var requestPortTick=function(){channel.port2.postMessage(0)};requestTick=function(){setTimeout(flush,0);requestPortTick()}}else{requestTick=function(){setTimeout(flush,0)}}return nextTick}();var call=Function.call;function uncurryThis(f){return function(){return call.apply(f,arguments)}}var array_slice=uncurryThis(Array.prototype.slice);var array_reduce=uncurryThis(Array.prototype.reduce||function(callback,basis){var index=0,length=this.length;if(arguments.length===1){do{if(index in this){basis=this[index++];break}if(++index>=length){throw new TypeError}}while(1)}for(;index<length;index++){if(index in this){basis=callback(basis,this[index],index)}}return basis});var array_indexOf=uncurryThis(Array.prototype.indexOf||function(value){for(var i=0;i<this.length;i++){if(this[i]===value){return i}}return-1});var array_map=uncurryThis(Array.prototype.map||function(callback,thisp){var self=this;var collect=[];array_reduce(self,function(undefined,value,index){collect.push(callback.call(thisp,value,index,self))},void 0);return collect});var object_create=Object.create||function(prototype){function Type(){}Type.prototype=prototype;return new Type};var object_hasOwnProperty=uncurryThis(Object.prototype.hasOwnProperty);var object_keys=Object.keys||function(object){var keys=[];for(var key in object){if(object_hasOwnProperty(object,key)){keys.push(key)}}return keys};var object_toString=uncurryThis(Object.prototype.toString);function isObject(value){return value===Object(value)}function isStopIteration(exception){return object_toString(exception)==="[object StopIteration]"||exception instanceof QReturnValue}var QReturnValue;if(typeof ReturnValue!=="undefined"){QReturnValue=ReturnValue}else{QReturnValue=function(value){this.value=value}}var STACK_JUMP_SEPARATOR="From previous event:";function makeStackTraceLong(error,promise){if(hasStacks&&promise.stack&&typeof error==="object"&&error!==null&&error.stack&&error.stack.indexOf(STACK_JUMP_SEPARATOR)===-1){var stacks=[];for(var p=promise;!!p;p=p.source){if(p.stack){stacks.unshift(p.stack)}}stacks.unshift(error.stack);var concatedStacks=stacks.join("\n"+STACK_JUMP_SEPARATOR+"\n");error.stack=filterStackString(concatedStacks)}}function filterStackString(stackString){var lines=stackString.split("\n");var desiredLines=[];for(var i=0;i<lines.length;++i){var line=lines[i];if(!isInternalFrame(line)&&!isNodeFrame(line)&&line){desiredLines.push(line)}}return desiredLines.join("\n")}function isNodeFrame(stackLine){return stackLine.indexOf("(module.js:")!==-1||stackLine.indexOf("(node.js:")!==-1}function getFileNameAndLineNumber(stackLine){var attempt1=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(stackLine);if(attempt1){return[attempt1[1],Number(attempt1[2])]}var attempt2=/at ([^ ]+):(\d+):(?:\d+)$/.exec(stackLine);if(attempt2){return[attempt2[1],Number(attempt2[2])]}var attempt3=/.*@(.+):(\d+)$/.exec(stackLine);if(attempt3){return[attempt3[1],Number(attempt3[2])]}}function isInternalFrame(stackLine){var fileNameAndLineNumber=getFileNameAndLineNumber(stackLine);if(!fileNameAndLineNumber){return false}var fileName=fileNameAndLineNumber[0];var lineNumber=fileNameAndLineNumber[1];return fileName===qFileName&&lineNumber>=qStartingLine&&lineNumber<=qEndingLine}function captureLine(){if(!hasStacks){return}try{throw new Error}catch(e){var lines=e.stack.split("\n");var firstLine=lines[0].indexOf("@")>0?lines[1]:lines[2];var fileNameAndLineNumber=getFileNameAndLineNumber(firstLine);if(!fileNameAndLineNumber){return}qFileName=fileNameAndLineNumber[0];return fileNameAndLineNumber[1]}}function deprecate(callback,name,alternative){return function(){if(typeof console!=="undefined"&&typeof console.warn==="function"){console.warn(name+" is deprecated, use "+alternative+" instead.",new Error("").stack)}return callback.apply(callback,arguments)}}function Q(value){if(isPromise(value)){return value}if(isPromiseAlike(value)){return coerce(value)}else{return fulfill(value)}}Q.resolve=Q;Q.nextTick=nextTick;Q.longStackSupport=false;Q.defer=defer;function defer(){var messages=[],progressListeners=[],resolvedPromise;var deferred=object_create(defer.prototype);var promise=object_create(Promise.prototype);promise.promiseDispatch=function(resolve,op,operands){var args=array_slice(arguments);if(messages){messages.push(args);if(op==="when"&&operands[1]){progressListeners.push(operands[1])}}else{nextTick(function(){resolvedPromise.promiseDispatch.apply(resolvedPromise,args)})}};promise.valueOf=function(){if(messages){return promise}var nearerValue=nearer(resolvedPromise);if(isPromise(nearerValue)){resolvedPromise=nearerValue}return nearerValue};promise.inspect=function(){if(!resolvedPromise){return{state:"pending"}}return resolvedPromise.inspect()};if(Q.longStackSupport&&hasStacks){try{throw new Error}catch(e){promise.stack=e.stack.substring(e.stack.indexOf("\n")+1)}}function become(newPromise){resolvedPromise=newPromise;promise.source=newPromise;array_reduce(messages,function(undefined,message){nextTick(function(){newPromise.promiseDispatch.apply(newPromise,message)})},void 0);messages=void 0;progressListeners=void 0}deferred.promise=promise;deferred.resolve=function(value){if(resolvedPromise){return}become(Q(value))};deferred.fulfill=function(value){if(resolvedPromise){return}become(fulfill(value))};deferred.reject=function(reason){if(resolvedPromise){return}become(reject(reason))};deferred.notify=function(progress){if(resolvedPromise){return}array_reduce(progressListeners,function(undefined,progressListener){nextTick(function(){progressListener(progress)})},void 0)};return deferred}defer.prototype.makeNodeResolver=function(){var self=this;return function(error,value){if(error){self.reject(error)}else if(arguments.length>2){self.resolve(array_slice(arguments,1))}else{self.resolve(value)}}};Q.Promise=promise;Q.promise=promise;function promise(resolver){if(typeof resolver!=="function"){throw new TypeError("resolver must be a function.")}var deferred=defer();try{resolver(deferred.resolve,deferred.reject,deferred.notify)}catch(reason){deferred.reject(reason)}return deferred.promise}promise.race=race;promise.all=all;promise.reject=reject;promise.resolve=Q;Q.passByCopy=function(object){return object};Promise.prototype.passByCopy=function(){return this};Q.join=function(x,y){return Q(x).join(y)};Promise.prototype.join=function(that){return Q([this,that]).spread(function(x,y){if(x===y){return x}else{throw new Error("Can't join: not the same: "+x+" "+y)}})};Q.race=race;function race(answerPs){return promise(function(resolve,reject){for(var i=0,len=answerPs.length;i<len;i++){Q(answerPs[i]).then(resolve,reject)}})}Promise.prototype.race=function(){return this.then(Q.race)};Q.makePromise=Promise;function Promise(descriptor,fallback,inspect){if(fallback===void 0){fallback=function(op){return reject(new Error("Promise does not support operation: "+op))}}if(inspect===void 0){inspect=function(){return{state:"unknown"}}}var promise=object_create(Promise.prototype);promise.promiseDispatch=function(resolve,op,args){var result;try{if(descriptor[op]){result=descriptor[op].apply(promise,args)}else{result=fallback.call(promise,op,args)}}catch(exception){result=reject(exception)}if(resolve){resolve(result)}};promise.inspect=inspect;if(inspect){var inspected=inspect();if(inspected.state==="rejected"){promise.exception=inspected.reason}promise.valueOf=function(){var inspected=inspect();if(inspected.state==="pending"||inspected.state==="rejected"){return promise}return inspected.value}}return promise}Promise.prototype.toString=function(){return"[object Promise]"};Promise.prototype.then=function(fulfilled,rejected,progressed){var self=this;var deferred=defer();var done=false;function _fulfilled(value){try{return typeof fulfilled==="function"?fulfilled(value):value}catch(exception){return reject(exception)}}function _rejected(exception){if(typeof rejected==="function"){makeStackTraceLong(exception,self);try{return rejected(exception)}catch(newException){return reject(newException)}}return reject(exception)}function _progressed(value){return typeof progressed==="function"?progressed(value):value}nextTick(function(){self.promiseDispatch(function(value){if(done){return}done=true;deferred.resolve(_fulfilled(value))},"when",[function(exception){if(done){return}done=true;deferred.resolve(_rejected(exception))}])});self.promiseDispatch(void 0,"when",[void 0,function(value){var newValue;var threw=false;try{newValue=_progressed(value)}catch(e){threw=true;if(Q.onerror){Q.onerror(e)}else{throw e}}if(!threw){deferred.notify(newValue)}}]);return deferred.promise};Q.when=when;function when(value,fulfilled,rejected,progressed){return Q(value).then(fulfilled,rejected,progressed)}Promise.prototype.thenResolve=function(value){return this.then(function(){return value})};Q.thenResolve=function(promise,value){return Q(promise).thenResolve(value)};Promise.prototype.thenReject=function(reason){return this.then(function(){throw reason})};Q.thenReject=function(promise,reason){return Q(promise).thenReject(reason)};Q.nearer=nearer;function nearer(value){if(isPromise(value)){var inspected=value.inspect();if(inspected.state==="fulfilled"){return inspected.value}}return value}Q.isPromise=isPromise;function isPromise(object){return isObject(object)&&typeof object.promiseDispatch==="function"&&typeof object.inspect==="function"}Q.isPromiseAlike=isPromiseAlike;function isPromiseAlike(object){return isObject(object)&&typeof object.then==="function"}Q.isPending=isPending;function isPending(object){return isPromise(object)&&object.inspect().state==="pending"}Promise.prototype.isPending=function(){return this.inspect().state==="pending"};Q.isFulfilled=isFulfilled;function isFulfilled(object){return!isPromise(object)||object.inspect().state==="fulfilled"}Promise.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"};Q.isRejected=isRejected;function isRejected(object){return isPromise(object)&&object.inspect().state==="rejected"}Promise.prototype.isRejected=function(){return this.inspect().state==="rejected"};var unhandledReasons=[];var unhandledRejections=[];var trackUnhandledRejections=true;function resetUnhandledRejections(){unhandledReasons.length=0;unhandledRejections.length=0;if(!trackUnhandledRejections){trackUnhandledRejections=true}}function trackRejection(promise,reason){if(!trackUnhandledRejections){return}unhandledRejections.push(promise);if(reason&&typeof reason.stack!=="undefined"){unhandledReasons.push(reason.stack)}else{unhandledReasons.push("(no stack) "+reason)}}function untrackRejection(promise){if(!trackUnhandledRejections){return}var at=array_indexOf(unhandledRejections,promise);if(at!==-1){unhandledRejections.splice(at,1);unhandledReasons.splice(at,1)}}Q.resetUnhandledRejections=resetUnhandledRejections;Q.getUnhandledReasons=function(){return unhandledReasons.slice()};Q.stopUnhandledRejectionTracking=function(){resetUnhandledRejections();trackUnhandledRejections=false};resetUnhandledRejections();Q.reject=reject;function reject(reason){var rejection=Promise({when:function(rejected){if(rejected){untrackRejection(this)}return rejected?rejected(reason):this}},function fallback(){return this},function inspect(){return{state:"rejected",reason:reason}});trackRejection(rejection,reason);return rejection}Q.fulfill=fulfill;function fulfill(value){return Promise({when:function(){return value},get:function(name){return value[name]},set:function(name,rhs){value[name]=rhs},"delete":function(name){delete value[name]},post:function(name,args){if(name===null||name===void 0){return value.apply(void 0,args)}else{return value[name].apply(value,args)}},apply:function(thisp,args){return value.apply(thisp,args)},keys:function(){return object_keys(value)}},void 0,function inspect(){return{state:"fulfilled",value:value}})}function coerce(promise){var deferred=defer();nextTick(function(){try{promise.then(deferred.resolve,deferred.reject,deferred.notify)}catch(exception){deferred.reject(exception)}});return deferred.promise}Q.master=master;function master(object){return Promise({isDef:function(){}},function fallback(op,args){return dispatch(object,op,args)},function(){return Q(object).inspect()})}Q.spread=spread;function spread(value,fulfilled,rejected){return Q(value).spread(fulfilled,rejected)}Promise.prototype.spread=function(fulfilled,rejected){return this.all().then(function(array){return fulfilled.apply(void 0,array)},rejected)};Q.async=async;function async(makeGenerator){return function(){function continuer(verb,arg){var result;if(typeof StopIteration==="undefined"){try{result=generator[verb](arg)}catch(exception){return reject(exception)}if(result.done){return result.value}else{return when(result.value,callback,errback)}}else{try{result=generator[verb](arg)}catch(exception){if(isStopIteration(exception)){return exception.value}else{return reject(exception)}}return when(result,callback,errback)}}var generator=makeGenerator.apply(this,arguments);var callback=continuer.bind(continuer,"next");var errback=continuer.bind(continuer,"throw");return callback()}}Q.spawn=spawn;function spawn(makeGenerator){Q.done(Q.async(makeGenerator)())}Q["return"]=_return;function _return(value){throw new QReturnValue(value)}Q.promised=promised;function promised(callback){return function(){return spread([this,all(arguments)],function(self,args){return callback.apply(self,args)})}}Q.dispatch=dispatch;function dispatch(object,op,args){return Q(object).dispatch(op,args)}Promise.prototype.dispatch=function(op,args){var self=this;var deferred=defer();nextTick(function(){self.promiseDispatch(deferred.resolve,op,args)});return deferred.promise};Q.get=function(object,key){return Q(object).dispatch("get",[key])};Promise.prototype.get=function(key){return this.dispatch("get",[key])};Q.set=function(object,key,value){return Q(object).dispatch("set",[key,value])};Promise.prototype.set=function(key,value){return this.dispatch("set",[key,value])};Q.del=Q["delete"]=function(object,key){return Q(object).dispatch("delete",[key])};Promise.prototype.del=Promise.prototype["delete"]=function(key){return this.dispatch("delete",[key])};Q.mapply=Q.post=function(object,name,args){return Q(object).dispatch("post",[name,args])};Promise.prototype.mapply=Promise.prototype.post=function(name,args){return this.dispatch("post",[name,args])};Q.send=Q.mcall=Q.invoke=function(object,name){return Q(object).dispatch("post",[name,array_slice(arguments,2)])};Promise.prototype.send=Promise.prototype.mcall=Promise.prototype.invoke=function(name){return this.dispatch("post",[name,array_slice(arguments,1)])};Q.fapply=function(object,args){return Q(object).dispatch("apply",[void 0,args])};Promise.prototype.fapply=function(args){return this.dispatch("apply",[void 0,args])};Q["try"]=Q.fcall=function(object){return Q(object).dispatch("apply",[void 0,array_slice(arguments,1)])};Promise.prototype.fcall=function(){return this.dispatch("apply",[void 0,array_slice(arguments)])};Q.fbind=function(object){var promise=Q(object);var args=array_slice(arguments,1);return function fbound(){return promise.dispatch("apply",[this,args.concat(array_slice(arguments))])}};Promise.prototype.fbind=function(){var promise=this;var args=array_slice(arguments);return function fbound(){return promise.dispatch("apply",[this,args.concat(array_slice(arguments))])}};Q.keys=function(object){return Q(object).dispatch("keys",[])};Promise.prototype.keys=function(){return this.dispatch("keys",[])};Q.all=all;function all(promises){return when(promises,function(promises){var countDown=0;var deferred=defer();array_reduce(promises,function(undefined,promise,index){var snapshot;if(isPromise(promise)&&(snapshot=promise.inspect()).state==="fulfilled"){promises[index]=snapshot.value}else{++countDown;when(promise,function(value){promises[index]=value;if(--countDown===0){deferred.resolve(promises)}},deferred.reject,function(progress){deferred.notify({index:index,value:progress})})}},void 0);if(countDown===0){deferred.resolve(promises)}return deferred.promise})}Promise.prototype.all=function(){return all(this)};Q.allResolved=deprecate(allResolved,"allResolved","allSettled");function allResolved(promises){return when(promises,function(promises){promises=array_map(promises,Q);return when(all(array_map(promises,function(promise){return when(promise,noop,noop)})),function(){return promises})})}Promise.prototype.allResolved=function(){return allResolved(this)};Q.allSettled=allSettled;function allSettled(promises){return Q(promises).allSettled()}Promise.prototype.allSettled=function(){return this.then(function(promises){return all(array_map(promises,function(promise){promise=Q(promise);function regardless(){return promise.inspect()}return promise.then(regardless,regardless)}))})};Q.fail=Q["catch"]=function(object,rejected){return Q(object).then(void 0,rejected)};Promise.prototype.fail=Promise.prototype["catch"]=function(rejected){return this.then(void 0,rejected)};Q.progress=progress;function progress(object,progressed){return Q(object).then(void 0,void 0,progressed)}Promise.prototype.progress=function(progressed){return this.then(void 0,void 0,progressed)};Q.fin=Q["finally"]=function(object,callback){return Q(object)["finally"](callback)};Promise.prototype.fin=Promise.prototype["finally"]=function(callback){callback=Q(callback);return this.then(function(value){return callback.fcall().then(function(){return value})},function(reason){return callback.fcall().then(function(){throw reason})})};Q.done=function(object,fulfilled,rejected,progress){return Q(object).done(fulfilled,rejected,progress)};Promise.prototype.done=function(fulfilled,rejected,progress){var onUnhandledError=function(error){nextTick(function(){makeStackTraceLong(error,promise);if(Q.onerror){Q.onerror(error)}else{throw error}})};var promise=fulfilled||rejected||progress?this.then(fulfilled,rejected,progress):this;if(typeof process==="object"&&process&&process.domain){onUnhandledError=process.domain.bind(onUnhandledError)}promise.then(void 0,onUnhandledError)};Q.timeout=function(object,ms,message){return Q(object).timeout(ms,message)};Promise.prototype.timeout=function(ms,message){var deferred=defer();var timeoutId=setTimeout(function(){deferred.reject(new Error(message||"Timed out after "+ms+" ms"))},ms);this.then(function(value){clearTimeout(timeoutId);deferred.resolve(value)},function(exception){clearTimeout(timeoutId);deferred.reject(exception)},deferred.notify);return deferred.promise};Q.delay=function(object,timeout){if(timeout===void 0){timeout=object;object=void 0}return Q(object).delay(timeout)};Promise.prototype.delay=function(timeout){return this.then(function(value){var deferred=defer();setTimeout(function(){deferred.resolve(value)},timeout);return deferred.promise})};Q.nfapply=function(callback,args){return Q(callback).nfapply(args)};Promise.prototype.nfapply=function(args){var deferred=defer();var nodeArgs=array_slice(args);nodeArgs.push(deferred.makeNodeResolver());this.fapply(nodeArgs).fail(deferred.reject);return deferred.promise};Q.nfcall=function(callback){var args=array_slice(arguments,1);return Q(callback).nfapply(args)};Promise.prototype.nfcall=function(){var nodeArgs=array_slice(arguments);var deferred=defer();nodeArgs.push(deferred.makeNodeResolver());this.fapply(nodeArgs).fail(deferred.reject);return deferred.promise};Q.nfbind=Q.denodeify=function(callback){var baseArgs=array_slice(arguments,1);return function(){var nodeArgs=baseArgs.concat(array_slice(arguments));var deferred=defer();nodeArgs.push(deferred.makeNodeResolver());Q(callback).fapply(nodeArgs).fail(deferred.reject);return deferred.promise}};Promise.prototype.nfbind=Promise.prototype.denodeify=function(){var args=array_slice(arguments);args.unshift(this);return Q.denodeify.apply(void 0,args)};Q.nbind=function(callback,thisp){var baseArgs=array_slice(arguments,2);return function(){var nodeArgs=baseArgs.concat(array_slice(arguments));var deferred=defer();nodeArgs.push(deferred.makeNodeResolver());function bound(){return callback.apply(thisp,arguments)}Q(bound).fapply(nodeArgs).fail(deferred.reject);return deferred.promise}};Promise.prototype.nbind=function(){var args=array_slice(arguments,0);args.unshift(this);return Q.nbind.apply(void 0,args)};Q.nmapply=Q.npost=function(object,name,args){return Q(object).npost(name,args)};Promise.prototype.nmapply=Promise.prototype.npost=function(name,args){var nodeArgs=array_slice(args||[]);var deferred=defer();nodeArgs.push(deferred.makeNodeResolver());this.dispatch("post",[name,nodeArgs]).fail(deferred.reject);return deferred.promise};Q.nsend=Q.nmcall=Q.ninvoke=function(object,name){var nodeArgs=array_slice(arguments,2);var deferred=defer();nodeArgs.push(deferred.makeNodeResolver());Q(object).dispatch("post",[name,nodeArgs]).fail(deferred.reject);return deferred.promise};Promise.prototype.nsend=Promise.prototype.nmcall=Promise.prototype.ninvoke=function(name){var nodeArgs=array_slice(arguments,1);var deferred=defer();nodeArgs.push(deferred.makeNodeResolver());this.dispatch("post",[name,nodeArgs]).fail(deferred.reject);return deferred.promise};Q.nodeify=nodeify;function nodeify(object,nodeback){return Q(object).nodeify(nodeback)}Promise.prototype.nodeify=function(nodeback){if(nodeback){this.then(function(value){nextTick(function(){nodeback(null,value)})},function(error){nextTick(function(){nodeback(error)})})}else{return this}};var qEndingLine=captureLine();return Q})}).call(this,require(83))},{83:83}],179:[function(require,module,exports){"use strict";var bus=require(101);var events=require(181);var checkOrigin=require(180).checkOrigin;function BraintreeBus(options){options=options||{};this.channel=options.channel;if(!this.channel){throw new Error("Channel ID must be specified")}this.merchantUrl=options.merchantUrl;this._isDestroyed=false;this._isVerbose=false;this._listeners=[];this._log("new bus on channel "+this.channel,[location.href])}BraintreeBus.prototype.on=function(eventName,originalHandler){var namespacedEvent,args;var handler=originalHandler;var self=this;if(this._isDestroyed){return}if(this.merchantUrl){handler=function(){if(checkOrigin(this.origin,self.merchantUrl)){originalHandler.apply(this,arguments)}}}namespacedEvent=this._namespaceEvent(eventName);args=Array.prototype.slice.call(arguments);args[0]=namespacedEvent;args[1]=handler;this._log("on",args);bus.on.apply(bus,args);this._listeners.push({eventName:eventName,handler:handler,originalHandler:originalHandler})};BraintreeBus.prototype.emit=function(eventName){var args;if(this._isDestroyed){return}args=Array.prototype.slice.call(arguments);args[0]=this._namespaceEvent(eventName);this._log("emit",args);bus.emit.apply(bus,args)};BraintreeBus.prototype._offDirect=function(eventName){var args=Array.prototype.slice.call(arguments);if(this._isDestroyed){return}args[0]=this._namespaceEvent(eventName);this._log("off",args);bus.off.apply(bus,args)};BraintreeBus.prototype.off=function(eventName,originalHandler){var i,listener;var handler=originalHandler;if(this._isDestroyed){return}if(this.merchantUrl){for(i=0;i<this._listeners.length;i++){listener=this._listeners[i];if(listener.originalHandler===originalHandler){handler=listener.handler}}}this._offDirect(eventName,handler)};BraintreeBus.prototype._namespaceEvent=function(eventName){return["braintree",this.channel,eventName].join(":")};BraintreeBus.prototype.teardown=function(){var listener,i;for(i=0;i<this._listeners.length;i++){listener=this._listeners[i];this._offDirect(listener.eventName,listener.handler)}this._listeners.length=0;this._isDestroyed=true};BraintreeBus.prototype._log=function(functionName,args){if(this._isVerbose){console.log(functionName,args)}};BraintreeBus.events=events;module.exports=BraintreeBus},{101:101,180:180,181:181}],180:[function(require,module,exports){"use strict";var BT_ORIGIN_REGEX=/^https:\/\/([a-zA-Z0-9-]+\.)*(braintreepayments|braintreegateway|paypal)\.com(:\d{1,5})?$/;function checkOrigin(postMessageOrigin,merchantUrl){var merchantOrigin,merchantHost;var a=document.createElement("a");a.href=merchantUrl;if(a.protocol==="https:"){merchantHost=a.host.replace(/:443$/,"")}else if(a.protocol==="http:"){merchantHost=a.host.replace(/:80$/,"")}else{merchantHost=a.host}merchantOrigin=a.protocol+"//"+merchantHost;return merchantOrigin===postMessageOrigin||BT_ORIGIN_REGEX.test(postMessageOrigin)}module.exports={checkOrigin:checkOrigin}},{}],181:[function(require,module,exports){"use strict";var i,evnt;var eventList=["PAYMENT_METHOD_REQUEST","PAYMENT_METHOD_RECEIVED","PAYMENT_METHOD_GENERATED","PAYMENT_METHOD_NOT_GENERATED","PAYMENT_METHOD_CANCELLED","PAYMENT_METHOD_ERROR","CONFIGURATION_REQUEST","ROOT_METADATA_REQUEST","ERROR","WARNING","UI_POPUP_DID_OPEN","UI_POPUP_DID_CLOSE","UI_POPUP_FORCE_CLOSE","ASYNC_DEPENDENCY_INITIALIZING","ASYNC_DEPENDENCY_READY","USER_FORM_SUBMIT_REQUEST","SEND_ANALYTICS_EVENTS"];var eventEnum={};for(i=0;i<eventList.length;i++){evnt=eventList[i];eventEnum[evnt]=evnt}module.exports=eventEnum},{}],182:[function(require,module,exports){"use strict";var Coinbase=require(185);function create(options){var result=new Coinbase(options);return result.canCreateIntegration?result:null}module.exports={create:create}},{185:185}],183:[function(require,module,exports){(function(global){"use strict";function iOSSafariVersion(userAgent){userAgent=userAgent||global.navigator.userAgent;if(!/AppleWebKit\//.test(userAgent)){return null}if(!/Mobile\//.test(userAgent)){return null}return userAgent.replace(/.* OS ([0-9_]+) like Mac OS X.*/,"$1").replace(/_/g,".")}function ieVersion(UA){var userAgent=UA||global.navigator.userAgent;var result=null;var match=/MSIE.(\d+)/.exec(userAgent);if(/Trident/.test(userAgent)){result=11}if(match){result=parseInt(match[1],10)}return result}function androidVersion(UA){UA=UA||global.navigator.userAgent;if(!/Android/.test(UA)){return null}return UA.replace(/^.* Android ([0-9\.]+).*$/,"$1")}module.exports={ieVersion:ieVersion,iOSSafariVersion:iOSSafariVersion,androidVersion:androidVersion}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],184:[function(require,module,exports){"use strict";var busEvents=require(179).events;function tokenize(err,payload,coinbase){if(err){coinbase.bus.emit(busEvents.ERROR,err.error);coinbase.bus.emit(busEvents.SEND_ANALYTICS_EVENTS,"coinbase.generate.nonce.failed");return}coinbase.bus.emit(busEvents.PAYMENT_METHOD_GENERATED,payload);coinbase.bus.emit(busEvents.SEND_ANALYTICS_EVENTS,"coinbase.generate.nonce.succeeded")}module.exports={tokenize:tokenize}},{179:179}],185:[function(require,module,exports){(function(global){"use strict";var bind=require(117);var utils=require(82);var Destructor=require(94);var DOMComposer=require(189);var urlComposer=require(192);var callbacks=require(184);var constants=require(186);var detector=require(187);var Bus=require(179);function _getPopupParams(options){return{clientId:options.configuration.coinbase.clientId,redirectUrl:options.configuration.coinbase.redirectUrl,scopes:options.configuration.coinbase.scopes||constants.SCOPES,meta:{authorizations_merchant_account:options.configuration.coinbase.merchantAccount||""}}}function _error(bus){return function(message,type){bus.emit(Bus.events.ERROR,{type:type,message:message})}}function _optionsAreValid(options,bus){var cbOptions=(options||{}).coinbase;var busError=_error(bus);if(options.apiClient==null){busError("settings.apiClient is required for coinbase",constants.CONFIGURATION_ERROR)}else if(!options.configuration.coinbaseEnabled){busError("Coinbase is not enabled for your merchant account",constants.CONFIGURATION_ERROR)}else if(!cbOptions||!cbOptions.container&&!cbOptions.button){busError("Either options.coinbase.container or options.coinbase.button is required for Coinbase integrations",constants.CONFIGURATION_ERROR)}else if(cbOptions.container&&cbOptions.button){busError("options.coinbase.container and options.coinbase.button are mutually exclusive",constants.CONFIGURATION_ERROR)}else if(!detector.isSupportedBrowser()){busError("Coinbase is not supported by your browser. Please consider upgrading",constants.UNSUPPORTED_BROWSER_ERROR)}else{return true}return false}function Coinbase(options){var context,busOptions;var self=this;this.destructor=new Destructor;this.channel=options.channel;busOptions={channel:this.channel};try{if(options.coinbase.container){busOptions.merchantUrl=global.location.href}}catch(e){}this.bus=options.bus||new Bus(busOptions);this.canCreateIntegration=_optionsAreValid(options,this.bus);if(!this.canCreateIntegration){return}this.buttonId=options.coinbase.button||constants.BUTTON_ID;this.apiClient=options.apiClient;this.assetsUrl=options.configuration.assetsUrl;this.environment=options.configuration.coinbase.environment;this._onOAuthSuccess=bind(this._onOAuthSuccess,this);this._handleButtonClick=bind(this._handleButtonClick,this);this.popupParams=_getPopupParams(options);this.redirectDoneInterval=null;if(options.coinbase.container){context=utils.normalizeElement(options.coinbase.container);this._insertFrame(context)}else{global.braintreeCoinbasePopupCallback=this._onOAuthSuccess;context=document.body;utils.addEventListener(context,"click",this._handleButtonClick);this.bus.emit(Bus.events.SEND_ANALYTICS_EVENTS,"coinbase.initialized");this.destructor.registerFunctionForTeardown(function(){self._closePopup()});this.bus.on(constants.TEARDOWN_EVENT,bind(this.destructor.teardown,this.destructor))}}Coinbase.prototype._insertFrame=function(container){var self=this;var frame=DOMComposer.createFrame({channel:this.channel});this.bus.emit(Bus.events.ASYNC_DEPENDENCY_INITIALIZING);container.appendChild(frame);this.destructor.registerFunctionForTeardown(function(){container.removeChild(frame)});setTimeout(function(){frame.src=self.assetsUrl+"/coinbase/"+constants.VERSION+"/coinbase-frame.html#"+self.channel},0)};Coinbase.prototype._onOAuthSuccess=function(data){var self=this;if(!data.code){this.bus.emit(Bus.events.SEND_ANALYTICS_EVENTS,"coinbase.popup.denied");this._closePopup();return}this.bus.emit("coinbase:view:navigate","loading");this.bus.emit(Bus.events.SEND_ANALYTICS_EVENTS,"coinbase.popup.authorized");this.apiClient.tokenizeCoinbase({code:data.code,query:urlComposer.getQueryString()},function(err,payload){callbacks.tokenize.apply(null,[err,payload,self])});this._closePopup()};Coinbase.prototype._clearPollForRedirectDone=function(){if(this.redirectDoneInterval){clearInterval(this.redirectDoneInterval);this.redirectDoneInterval=null}};Coinbase.prototype._closePopup=function(popup){popup=popup||this.popup;if(popup==null){return}if(detector.shouldCloseFromParent()){popup.close()}this._popupCleanup()};Coinbase.prototype._popupCleanup=function(){this._clearPollForRedirectDone();this.bus.emit(Bus.events.UI_POPUP_DID_CLOSE,{source:constants.INTEGRATION_NAME})};Coinbase.prototype._pollForRedirectDone=function(popup){var self=this;var interval=setInterval(function(){var code;if(popup==null||popup.closed){self.bus.emit(Bus.events.SEND_ANALYTICS_EVENTS,"coinbase.popup.aborted");self._popupCleanup();return}try{if(popup.location.href==="about:blank"){throw new Error("Not finished loading")}code=utils.decodeQueryString(popup.location.search.replace(/^\?/,"")).code}catch(e){return}self._onOAuthSuccess({code:code})},100);this.redirectDoneInterval=interval;return interval};Coinbase.prototype._openPopup=function(){var popup;this.bus.emit(Bus.events.SEND_ANALYTICS_EVENTS,"coinbase.popup.started");popup=DOMComposer.createPopup(urlComposer.compose(this._getOAuthBaseUrl(),this.popupParams));popup.focus();this._pollForRedirectDone(popup);this.bus.emit(Bus.events.UI_POPUP_DID_OPEN,{source:constants.INTEGRATION_NAME});this.bus.on(Bus.events.UI_POPUP_FORCE_CLOSE,function(payload){if(payload.target===constants.INTEGRATION_NAME){popup.close()}});this.popup=popup};Coinbase.prototype._getOAuthBaseUrl=function(){var baseUrl;if(this.environment==="shared_sandbox"){baseUrl=constants.SANDBOX_OAUTH_BASE_URL}else{baseUrl=constants.PRODUCTION_OAUTH_BASE_URL}return baseUrl};Coinbase.prototype._handleButtonClick=function(event){var target=event.target||event.srcElement;while(true){if(target==null){return}if(target===event.currentTarget){return}if(target.id===this.buttonId){break}target=target.parentNode}if(event&&event.preventDefault){event.preventDefault()}else{event.returnValue=false}this._openPopup()};Coinbase.prototype.teardown=function(done){var self=this;if(!this.canCreateIntegration){done(null);return}this.bus.emit(constants.TEARDOWN_EVENT,function(){self.destructor.teardown(function(err){if(err){return done(err)}self.bus.teardown();done(null)})})};module.exports=Coinbase}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{117:117,179:179,184:184,186:186,187:187,189:189,192:192,82:82,94:94}],186:[function(require,module,exports){"use strict";module.exports={PRODUCTION_OAUTH_BASE_URL:"https://coinbase.com",SANDBOX_OAUTH_BASE_URL:"https://sandbox.coinbase.com",ORIGIN_URL:"https://www.coinbase.com",FRAME_NAME:"braintree-coinbase-frame",POPUP_NAME:"coinbase",BUTTON_ID:"bt-coinbase-button",SCOPES:"send",VERSION:"2.15.7",INTEGRATION_NAME:"Coinbase",CONFIGURATION_ERROR:"CONFIGURATION",UNSUPPORTED_BROWSER_ERROR:"UNSUPPORTED_BROWSER",TEARDOWN_EVENT:"coinbase:TEARDOWN"}},{}],187:[function(require,module,exports){"use strict";var browser=require(183);function isSupportedBrowser(){var version=browser.ieVersion();return!version||version>8}function shouldDisplayLollipopClose(){var version=browser.androidVersion();if(version==null){return false}return/^5/.test(version)}function shouldCloseFromParent(){return!(shouldDisplayLollipopClose()||shouldDisplayIOSClose())}function shouldDisplayIOSClose(){var version=browser.iOSSafariVersion();if(version==null){return false}return/^8\.0/.test(version)||/^8\.1$/.test(version)}module.exports={isSupportedBrowser:isSupportedBrowser,shouldCloseFromParent:shouldCloseFromParent,shouldDisplayIOSClose:shouldDisplayIOSClose,shouldDisplayLollipopClose:shouldDisplayLollipopClose}},{183:183}],188:[function(require,module,exports){"use strict";function createButton(config){var button=document.createElement("button");config=config||{};button.id=config.id||"coinbase-button";button.style.backgroundColor=config.backgroundColor||"#EEE";button.style.color=config.color||"#4597C3";button.style.border=config.border||"0";button.style.borderRadius=config.borderRadius||"6px";button.style.padding=config.padding||"12px";button.innerHTML=config.innerHTML||"coinbase";return button}module.exports={create:createButton}},{}],189:[function(require,module,exports){"use strict";var popup=require(191);var button=require(188);var frame=require(190);module.exports={createButton:button.create,createPopup:popup.create,createFrame:frame.create}},{188:188,190:190,191:191}],190:[function(require,module,exports){"use strict";var constants=require(186);var iframer=require(110);function createFrame(){return iframer({name:constants.FRAME_NAME,height:"70px",width:"100%",style:{padding:0,margin:0,border:0,outline:"none"}})}module.exports={create:createFrame}},{110:110,186:186}],191:[function(require,module,exports){(function(global){"use strict";var constants=require(186);function _stringifyParams(payload){var param;var params=[];for(param in payload){if(payload.hasOwnProperty(param)){params.push([param,payload[param]].join("="))}}return params.join(",")}function _getParams(){var baseWidth=580;var baseHeight=810;return _stringifyParams({width:baseWidth,height:baseHeight,left:(screen.width-baseWidth)/2,top:(screen.height-baseHeight)/4})}function createPopup(url){return global.open(url,constants.POPUP_NAME,_getParams())}module.exports={create:createPopup}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{186:186}],192:[function(require,module,exports){"use strict";var constants=require(186);function getQueryString(){return"version="+constants.VERSION}function compose(baseUrl,params){var key;var url=baseUrl+"/oauth/authorize?response_type=code";var redirectUri=params.redirectUrl+"?"+getQueryString();url+="&redirect_uri="+encodeURIComponent(redirectUri);url+="&client_id="+params.clientId;if(params.scopes){url+="&scope="+encodeURIComponent(params.scopes)}if(params.meta){for(key in params.meta){if(params.meta.hasOwnProperty(key)){url+="&meta["+encodeURIComponent(key)+"]="+encodeURIComponent(params.meta[key])}}}return url}module.exports={compose:compose,getQueryString:getQueryString}},{186:186}],193:[function(require,module,exports){"use strict";var RPC_METHOD_NAMES=["unlockCreditCard"];function APIProxyClient(rpcClient){this.rpcClient=rpcClient}RPC_METHOD_NAMES.forEach(function(methodName){APIProxyClient.prototype[methodName]=function(){var args=[];var params=Array.prototype.slice.call(arguments);var callback=params.splice(-1)[0];args=[methodName,params];if(typeof callback==="function"){args.push(callback)}else{params.push(callback)}this.rpcClient.invoke.apply(this.rpcClient,args)}});module.exports=APIProxyClient},{}],194:[function(require,module,exports){"use strict";var Backbone=require(1);var attachFastClick=require(99);require(113);require(98);require(97);require(213);Backbone.$=window.$;attachFastClick(document.body);module.exports={InlineFrame:require(198),ModalFrame:require(203)}},{1:1,113:113,198:198,203:203,213:213,97:97,98:98,99:99}],195:[function(require,module,exports){"use strict";var _=require(120);function Input(view){this.view=view;this.node=view.$el.find("input").get(0);this.validators=view.config.validatorRules}Input.prototype.isValid=function(options){var value=this.getValue();var isPartial=options?options.partial:false;var view=this.view;return _.chain(this.validators).map(function(validator){var validation=validator.call(view,value);return isPartial?validation.isPotentiallyValid:validation.isValid}).all().value()};Input.prototype.setValue=function(newValue){this.node.value=newValue};Input.prototype.getValue=function(){var value=this.node.value;if(!this.view.HAS_PLACEHOLDERS&&value===$(this.node).attr("placeholder")){return""}return value};module.exports=Input},{120:120}],196:[function(require,module,exports){(function(global){"use strict";var bind=require(117);var api=require(15);var BraintreeBus=require(179);var rpc=require(64);var paypal=require(240);var coinbase=require(182);var APIProxyClient=require(193);var SharedCustomerIdentificationService=require(211);function Frame(settings){var hash,channel;this.settings=settings;this.root=settings.root||window;this.target=settings.target||window.parent;this.container=settings.container;hash=this.root.location.hash;channel=hash.slice(1,hash.length);global.braintreeBus=new BraintreeBus({channel:channel});this.bus=new rpc.MessageBus(this.root,channel);this.rpcClient=new rpc.RPCClient(this.bus,this.target);this.rpcServer=new rpc.RPCServer(this.bus);this.apiProxyClient=new APIProxyClient(this.rpcClient);this.sharedCustomerIdentificationService=new SharedCustomerIdentificationService}Frame.prototype.initialize=function(){var sessionIdentifier=this.sharedCustomerIdentificationService.getIdentifier();this.bus.send(this.target,"ready");if(sessionIdentifier){this.rpcClient.invoke("receiveSharedCustomerIdentifier",[sessionIdentifier])}this.rpcClient.invoke("getConfiguration",[],bind(this.completeInitialization,this))};Frame.prototype.completeInitialization=function(payload){var paypalOptions=payload.paypalOptions||{};this.clientToken=api.parseClientToken(payload.clientToken);this.apiClient=api.configure({clientToken:this.clientToken,enableCORS:payload.enableCORS,analyticsConfiguration:payload.analyticsConfiguration,integration:"dropin"});this.hasPaypalEnabled=this.clientToken.paypalEnabled;if(this.hasPaypalEnabled){paypalOptions.container=document.body;paypalOptions.isDropin=true;paypalOptions.merchantHttps=payload.merchantHttps;this.ppClient=paypal.create(this.clientToken,paypalOptions,global.braintreeBus.channel);this.hasPaypalEnabled=this.ppClient!=null}this.hasCoinbaseEnabled=this.clientToken.coinbaseEnabled;if(this.hasCoinbaseEnabled){this.coinbaseIntegration=coinbase.create({channel:global.braintreeBus.channel,coinbase:{button:"coinbase-container"},apiClient:this.apiClient,configuration:this.clientToken});this.hasCoinbaseEnabled=this.coinbaseIntegration!=null}};module.exports=Frame}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{117:117,15:15,179:179,182:182,193:193,211:211,240:240,64:64}],197:[function(require,module,exports){"use strict";var _=require(120);var BaseRouter=require(222);var AddPaymentMethodView=require(199);var ShowPaymentMethodView=require(201);var CancelPopupView=require(224);var InlineFrameRouter=BaseRouter.extend({routes:{addPaymentMethod:"addPaymentMethod","showPaymentMethod(/:status)":"showPaymentMethod"},initialize:function(options){this.root=options.root;this.container=options.container;this.setViews();this.root.rpcServer.define("requestNonce",_.bind(this.handleNonceRequest,this));return this},setViews:function(){var self=this;this.views={addPaymentMethod:new AddPaymentMethodView({root:this.root}),showPaymentMethod:new ShowPaymentMethodView({root:this.root})};_.each(this.views,function(view){self.container.appendChild(view.el)});this.setGlobalViews()},setGlobalViews:function(){return new CancelPopupView},addPaymentMethod:function(){this.setCurrentView("addPaymentMethod")},showPaymentMethod:function(){this.setCurrentView("showPaymentMethod")},handleNonceRequest:function(callback){this.views[this.currentView].handleRequestNonce(callback)}});module.exports=InlineFrameRouter},{120:120,199:199,201:201,222:222,224:224}],198:[function(require,module,exports){(function(global){"use strict";var _=require(120);var Frame=require(196);var PaymentMethodCollection=require(218);var InlineFrameView=require(200);var InlineFrameRouter=require(197);var constants=require(219);function InlineFrame(settings){Frame.call(this,settings);this.initializedWithIdentifier=false;this.paymentMethodsCollection=new PaymentMethodCollection;this.router=new InlineFrameRouter({root:this,container:this.container});this.paymentMethodsCollection.on("reset",_.bind(this.onCollectionReset,this));global.braintreeBus.on(constants.INLINE_FRAME_TEARDOWN_EVENT,function(reply){global.destroyPopup();reply()})}InlineFrame.prototype=Object.create(Frame.prototype);InlineFrame.prototype.constructor=InlineFrame;InlineFrame.prototype.initialize=function(){Frame.prototype.initialize.call(this);this.rpcServer.define("receiveNewPaymentMethod",_.bind(this.receiveNewPaymentMethod,this));this.rpcServer.define("selectPaymentMethod",_.bind(this.receiveSelectedPaymentMethod,this));this.inlineFrameView=new InlineFrameView({rpcClient:this.rpcClient,rpcServer:this.rpcServer,container:this.container})};InlineFrame.prototype.completeInitialization=function(clientToken){Frame.prototype.completeInitialization.call(this,clientToken);this.apiClient.getCreditCards(_.bind(this.receivePaymentMethods,this))};InlineFrame.prototype.onCollectionReset=function(){var model=this.paymentMethodsCollection.getActiveModel();if(!model.get("isLocked")){this.rpcClient.invoke("sendUnlockedNonce",[model.toJSON()])}};InlineFrame.prototype.receivePaymentMethods=function(err,paymentMethods){var matcher=new RegExp(constants.PAYMENT_METHOD_TYPES.join("|"));var filteredPaymentMethods=_.filter(paymentMethods,function(paymentMethod){return matcher.test(paymentMethod.type)});if(filteredPaymentMethods&&filteredPaymentMethods.length){this.paymentMethodsCollection.reset(filteredPaymentMethods);this.router.navigate("showPaymentMethod")}else{this.router.navigate("addPaymentMethod")}this.inlineFrameView.render()};InlineFrame.prototype.receiveNewPaymentMethod=function(data){var self=this;var route="showPaymentMethod";var isCurrentView=this.router.currentView===route;this.paymentMethodsCollection.add(data);this.router.navigate(route,{silent:isCurrentView});if(!isCurrentView){requestAnimationFrame(function(){self.inlineFrameView.updateHeight()})}};InlineFrame.prototype.receiveSelectedPaymentMethod=function(data){this.paymentMethodsCollection.setActiveModel(data)};module.exports={Manager:InlineFrame}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{120:120,196:196,197:197,200:200,218:218,219:219}],199:[function(require,module,exports){"use strict";var Backbone=require(1);var AddPaymentMethodFormView=require(228);var template=require(231);var HIDDEN_CLASS="hidden";var AddPaymentMethodView=Backbone.View.extend({template:template,className:"add-payment-method-view "+HIDDEN_CLASS,initialize:function(options){this.root=options.root},render:function(){this.$el.html(this.template({paypalEnabled:this.root.hasPaypalEnabled,coinbaseEnabled:this.root.hasCoinbaseEnabled}));this.$formContainer=this.$el.find(".form-container");this.formView=new AddPaymentMethodFormView({root:this.root});this.$formContainer.html(this.formView.render().el);this.show()},handleRequestNonce:function(callback){this.formView.successCallback=callback;this.formView.submit()},hide:function(){this.$el.addClass(HIDDEN_CLASS)},show:function(){this.$el.removeClass(HIDDEN_CLASS)},destroy:function(){this.$el.empty()}});module.exports=AddPaymentMethodView},{1:1,228:228,231:231}],200:[function(require,module,exports){"use strict";var _=require(120);var win=window;var $win=$(win);var $body=$("body");var INITIAL_LOADING_CLASS="is-loading initial-inline-frame-loading";function InlineFrameView(options){this.rpcClient=options.rpcClient;this.rpcServer=options.rpcServer;this.container=options.container;this.initialize()}InlineFrameView.prototype.initialize=function(){this.setEvents()};InlineFrameView.prototype.setEvents=function(){$win.on("resize",_.bind(this.handleViewportUpdate,this));this.rpcServer.define("clearLoadingState",_.bind(this.removeLoadingState,this))};InlineFrameView.prototype.updateHeight=function(){var height=this.container.offsetHeight+2;this.rpcClient.invoke("setInlineFrameHeight",[height])};InlineFrameView.prototype.handleViewportUpdate=_.debounce(function(){this.updateHeight()},160);InlineFrameView.prototype.removeLoadingState=function(){$body.removeClass(INITIAL_LOADING_CLASS)};InlineFrameView.prototype.render=function(){var self=this;_.delay(function(){self.removeLoadingState();requestAnimationFrame(function(){self.updateHeight()})},16)};module.exports=InlineFrameView},{120:120}],201:[function(require,module,exports){"use strict";var _=require(120);var Backbone=require(1);var dropinUtil=require(216);var FormCardModel=require(220);var CvvInputView=require(226);var PostalCodeInputView=require(229);var template=require(232);var HIDDEN_CLASS="hidden";var ShowPaymentMethodView=Backbone.View.extend({template:template,className:"show-payment-method-view "+HIDDEN_CLASS,events:{"click #choose-payment-method":"handleChoosePaymentClick"},fields:{cvv:{challenge:"cvv",container:".cvv-label",constructor:CvvInputView},postalCode:{challenge:"postal_code",container:".postal-code-label",constructor:PostalCodeInputView}},initialize:function(options){this.root=options.root;this.collection=options.root.paymentMethodsCollection;this.fieldViews=[]},setEvents:function(){if(!this.isBoundToCollection){this.isBoundToCollection=true;this.listenTo(this.collection,"change:activeModel",this.render)}},getViewModel:function(){var model=this.model.toJSON();var email=model.details&&model.details.email;if(email){model.details.truncatedEmail=dropinUtil.truncateEmail(email,dropinUtil.getMaxCharLength())}return model},render:function(){var html;this.model=this.collection.getActiveModel();html=this.template({paymentMethod:this.getViewModel()});this.$el.html(html);if(this.model.get("isLocked")){this.setValidations()}this.show();this.setEvents()},setValidations:function(){var self=this;this.formCardModel=new FormCardModel;this.challenges=this.model.get("securityQuestions");if(this.fieldViews.length){this.destroyFieldViews()}_.each(this.fields,function(field){var view;if(!_.contains(self.challenges,field.challenge)){return}view=new field.constructor({el:self.$el.find(field.container),model:self.formCardModel});self.fieldViews.push(view)})},handleChoosePaymentClick:function(event){event.preventDefault();this.root.rpcClient.invoke("selectPaymentMethod",[this.root.paymentMethodsCollection])},isValid:function(){return _.chain(this.fieldViews).filter(function(view){return!view.isValid()}).value().length<1},handleRequestNonce:function(callback){var answers;if(this.isValid()){answers={cvv:this.formCardModel.get("cvv")};if(_.contains(this.challenges,"postal_code")){answers.postal_code=this.formCardModel.get("postalCode")}this.root.apiProxyClient.unlockCreditCard(this.model,answers,function(err,card){callback(card.nonce)})}},hide:function(){this.$el.addClass(HIDDEN_CLASS)},show:function(){this.$el.removeClass(HIDDEN_CLASS)},destroyFieldViews:function(){_.each(this.fieldViews,function(view){view.destroy()});this.fieldViews=[]},destroy:function(){this.destroyFieldViews();this.$el.empty()}});module.exports=ShowPaymentMethodView},{1:1,120:120,216:216,220:220,226:226,229:229,232:232}],202:[function(require,module,exports){"use strict";var Q=require(178);var _=require(120);var BaseRouter=require(222);var CancelPopupView=require(224);var ModalView=require(207);var ListPaymentMethodsView=require(206);var AddPaymentMethodView=require(204);var ModalFrameRouter=BaseRouter.extend({routes:{listPaymentMethods:"listPaymentMethods",addPaymentMethod:"addPaymentMethod"},initialize:function(options){var self=this;var root=options.root;this.viewContainer=new ModalView({root:root});this.views={listPaymentMethods:new ListPaymentMethodsView({root:root}),addPaymentMethod:new AddPaymentMethodView({root:root})};_.each(this.views,function(view){self.viewContainer.$modalBody.append(view.el)});this.setGlobalViews();return this},setGlobalViews:function(){return new CancelPopupView},transitionViews:function(viewKey){var currentView=this.views[this.currentView];var deferred=Q.defer();if(!currentView||!_.isFunction(currentView.renderOut)){deferred.resolve(viewKey)}else{currentView.renderOut().then(function(){deferred.resolve(viewKey)})}return deferred.promise},listPaymentMethods:function(){this.transitionViews("listPaymentMethods").then(_.bind(this.setCurrentView,this))},addPaymentMethod:function(){this.transitionViews("addPaymentMethod").then(_.bind(this.setCurrentView,this))},reset:function(){_.each(this.views,function(view){view.reset()});this.currentView=null}});module.exports=ModalFrameRouter},{120:120,178:178,204:204,206:206,207:207,222:222,224:224}],203:[function(require,module,exports){(function(global){"use strict";var Q=require(178);var _=require(120);var dropinUtil=require(216);var Frame=require(196);var PaymentMethodCollection=require(218);var ModalFrameRouter=require(202);var constants=require(219);var OPEN_CLASS="open";var OUT_CLASS="out";var OUT_SUCCESS_CLASS="out-success";var TRANSITION_END=dropinUtil.getPrefixedTransitionEnd();var $body=$("body");function ModalFrame(settings){Frame.call(this,settings);this.paymentMethods=new PaymentMethodCollection;this.router=new ModalFrameRouter({root:this});$body.on("keyup",_.bind(this.handleKeyup,this));this.$container=$body.find("#container");this.rpcServer.define("open",_.bind(this.open,this));global.braintreeBus.on(constants.MODAL_FRAME_TEARDOWN_EVENT,function(reply){global.destroyPopup();reply()})}ModalFrame.prototype=Object.create(Frame.prototype);ModalFrame.prototype.constructor=ModalFrame;ModalFrame.prototype.initialize=function(){Frame.prototype.initialize.call(this);this.isOpen=false;this.rpcServer.define("selectPaymentMethod",_.bind(this.setSelectPaymentMethodView,this));this.rpcServer.define("modalViewClose",_.bind(this.close,this))};ModalFrame.prototype.completeInitialization=function(clientToken){Frame.prototype.completeInitialization.call(this,clientToken)};ModalFrame.prototype.handleKeyup=function(event){if(event.which===27){this.close({isCancel:true})}};ModalFrame.prototype.setSelectPaymentMethodView=function(cards){this.paymentMethods.reset(cards)};ModalFrame.prototype.open=function(reply){var self=this;this.isOpen=true;requestAnimationFrame(function(){$body.addClass(OPEN_CLASS);reply();_.defer(self.router.navigate,"listPaymentMethods")})};ModalFrame.prototype.afterClose=function(outClass){$body.removeClass(outClass);this.router.reset();this.isOpen=false;this.rpcClient.invoke("closeDropInModal")};ModalFrame.prototype.renderOutInnerContent=function(options){var deferred=Q.defer();$body.addClass(options.className);_.delay(deferred.resolve,options.delay,options);return deferred.promise};ModalFrame.prototype.renderOutModal=function(options){var self=this;function handleModalTransitionEnd(){self.afterClose(options.className)}if(Modernizr.csstransitions){this.$container.one(TRANSITION_END,handleModalTransitionEnd)}else{this.afterClose(options.className)}$body.removeClass(OPEN_CLASS)};ModalFrame.prototype.close=function(options){var isCancel,isCancelDelay,outroSettings;if(!this.isOpen){return}isCancel=options&&options.isCancel;isCancelDelay=Modernizr.csstransitions?600:16;outroSettings={className:isCancel?OUT_CLASS:OUT_SUCCESS_CLASS,delay:isCancel?isCancelDelay:220};this.renderOutInnerContent(outroSettings).then(_.bind(this.renderOutModal,this))};module.exports=ModalFrame}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{120:120,178:178,196:196,202:202,216:216,218:218,219:219}],204:[function(require,module,exports){"use strict";var _=require(120);var Super=require(205);var FormCardModel=require(220);var AddPaymentMethodFormView=require(228);var template=require(233);var ACTIVE_BUTTON_CLASS="is-active";var SUBMIT_BUTTON_SELECTOR=".payment-method-add";var ALTPAY_BUTTON_SELECTORS="button.paypal, button#coinbase-container";var AddPaymentMethodView=Super.extend({template:template,className:"add-payment-method-view modal-frame-view ",events:function(){var evts={"keyup input":"handleInputChange"};evts["click "+SUBMIT_BUTTON_SELECTOR]="triggerFormSubmit";evts["click .use-saved-payment-method-link"]="navigateToListView";return evts},initialize:function(options){this.root=options.root;this.postInitialize()},render:function(){this.$el.html(this.template({paypalEnabled:this.root.hasPaypalEnabled,coinbaseEnabled:this.root.hasCoinbaseEnabled}));this.$formContainer=this.$el.find(".form-container");this.createFormView();this.$formContainer.html(this.formView.render().el);this.setElements();this.show()},createFormView:function(){this.formModel=new FormCardModel;this.formView=new AddPaymentMethodFormView({root:this.root,isModal:true,model:this.formModel,setSubmitButtonState:_.bind(this.setSubmitButtonState,this)})},setElements:function(){this.$submitButton=this.$el.find(SUBMIT_BUTTON_SELECTOR);this.$altpayButtons=this.$el.find(ALTPAY_BUTTON_SELECTORS)},triggerFormSubmit:function(){this.formView.submit()},setSubmitButtonState:function(props){var self=this;_.each(props,function(prop,propName){self.$submitButton.prop(propName,prop)})},handleInputChange:function(){var isEmpty=this.formModel.isEmpty();this.$submitButton.prop("disabled",isEmpty);this.$altpayButtons.toggleClass(ACTIVE_BUTTON_CLASS,isEmpty)},navigateToListView:function(){this.root.router.navigate("listPaymentMethods")},show:function(){var self=this;Super.prototype.show.apply(this,arguments);_.delay(function(){self.formView.setFocusOnFirstInput()},240)}});module.exports=AddPaymentMethodView},{120:120,205:205,220:220,228:228,233:233}],205:[function(require,module,exports){"use strict";var _=require(120);var Q=require(178);var dropinUtil=require(216);var Backbone=require(1);var RENDER_IN_CLASS="render-in-assemble";var RENDER_OUT_CLASS="render-out";var HAS_RENDERED_CLASS="has-rendered";var IS_MODERN=Modernizr.csstransitions;var TRANSITION_END=dropinUtil.getPrefixedAnimationEnd();var BaseModalView=Backbone.View.extend({constructor:function(){Backbone.View.apply(this,arguments)},postInitialize:function(){if(!IS_MODERN){this.$el.fadeOut(0)}},show:function(){var self=this;function renderIn(){self.$el.addClass(RENDER_IN_CLASS)}if(IS_MODERN){_.delay(renderIn,240)}else{this.$el.delay(200).fadeIn(200)}},hide:function(){var self=this;if(IS_MODERN){this.renderOutModalView().then(function(){self.$el.removeClass(RENDER_OUT_CLASS).addClass(HAS_RENDERED_CLASS);self.promise.resolve()})}else if(this.promise){this.$el.fadeOut(200,function(){self.promise.resolve()})}},getAnimationBatchSize:function(){var children=this.$el.children();return _.filter(children,function(child){return getComputedStyle(child).display!=="none"}).length||children.length},renderOutModalView:function(){var $el=this.$el;var deferred=Q.defer();var count=0;var batch=this.getAnimationBatchSize();function resolve(){count++;if(count===batch){$el.off(TRANSITION_END,resolve);deferred.resolve();return}}$el.on(TRANSITION_END,resolve).addClass(RENDER_OUT_CLASS);return deferred.promise},renderOut:function(){this.promise=Q.defer();this.hide();return this.promise.promise},destroy:function(){this.$el.empty()},reset:function(){this.destroy();this.$el.removeClass(function(){return[RENDER_IN_CLASS,RENDER_OUT_CLASS,HAS_RENDERED_CLASS].join(" ")})}});module.exports=BaseModalView},{1:1,120:120,178:178,216:216}],206:[function(require,module,exports){"use strict";var _=require(120);var Super=require(205);var PaymentMethodItemView=require(208);var template=require(234);var ListPaymentMethodsView=Super.extend({template:template,className:"list-payment-methods-view modal-frame-view",events:{"click .add-payment-method-link":"handleAddPaymentMethod"},initialize:function(options){this.root=options.root;this.collection=options.root.paymentMethods;this.postInitialize()},render:function(){this.$el.html(this.template);this.renderItems(this.collection.models,this.$el.find(".payment-methods-list"));this.show()},renderItems:function(models,$container){var self=this;var paymentMethods=_.map(models,function(model){return new PaymentMethodItemView({root:self.root,model:model}).render().el});$container.append(paymentMethods)},handleAddPaymentMethod:function(event){event.preventDefault();this.root.router.navigate("addPaymentMethod")}});module.exports=ListPaymentMethodsView},{120:120,205:205,208:208,234:234}],207:[function(require,module,exports){"use strict";var Backbone=require(1);var template=require(235);var ModalView=Backbone.View.extend({template:template,className:"modal",events:{"click .cancel-button":"handleCancelClick"},initialize:function(options){this.root=options.root;this.render()},render:function(){this.$el.html(this.template());$(".modal-wrap").append(this.el);this.$modalBody=this.$el.find(".modal-container")},handleCancelClick:function(event){event.preventDefault();this.root.close({isCancel:true})}});module.exports=ModalView},{1:1,235:235}],208:[function(require,module,exports){"use strict";var Backbone=require(1);var dropinUtil=require(216);var template=require(236);var PaymentMethodItemView=Backbone.View.extend({template:template,events:{click:"selectPaymentMethod"},initialize:function(options){this.root=options.root;this.rpcClient=options.root.rpcClient;this.render()},getViewModel:function(){var model=this.model.toJSON();var email=model.details&&model.details.email;if(email){model.details.truncatedEmail=dropinUtil.truncateEmail(email,dropinUtil.getMaxCharLength(180))}return model},render:function(){this.$el.html(this.template(this.getViewModel()));return this},selectPaymentMethod:function(){var model=this.model.toJSON();if(!this.model.get("isLocked")){this.rpcClient.invoke("sendUnlockedNonce",[model])}else{this.rpcClient.invoke("clearNonce")}this.rpcClient.invoke("sendUsedPaymentMethod",[model]);this.root.close()}});module.exports=PaymentMethodItemView},{1:1,216:216,236:236}],209:[function(require,module,exports){"use strict";function Cookie(){}Cookie.prototype.set=function(key,val){document.cookie=key+"="+val+"; path=/; expires=Fri, 31 Dec 9999 23:59:59 GMT;"};Cookie.prototype.get=function(key){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(key).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null};module.exports=Cookie},{}],210:[function(require,module,exports){(function(global){"use strict";var STORAGE_KEY="__hls__";var HAS_LOCAL_STORAGE=function(){try{global.localStorage.setItem(STORAGE_KEY,true);return true}catch(e){return false}}();function LocalStorage(){if(HAS_LOCAL_STORAGE){global.localStorage.removeItem(STORAGE_KEY)}}LocalStorage.prototype.set=function(key,value){if(HAS_LOCAL_STORAGE){global.localStorage.setItem(key,value)}};LocalStorage.prototype.get=function(key){return HAS_LOCAL_STORAGE?global.localStorage.getItem(key):null};module.exports=LocalStorage}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],211:[function(require,module,exports){"use strict";var SharedCustomerIdentificationStore=require(212);function SharedCustomerIdentificationService(){var sharedCustomerIdentifier;this.sharedCustomerIdentificationStore=new SharedCustomerIdentificationStore;this._sharedCustomerIdentifier=null;sharedCustomerIdentifier=this.sharedCustomerIdentificationStore.get();if(sharedCustomerIdentifier){this._handleIdentifier(sharedCustomerIdentifier)}}SharedCustomerIdentificationService.prototype._handleIdentifier=function(identifier){this.sharedCustomerIdentificationStore.set(identifier);this._sharedCustomerIdentifier=identifier};SharedCustomerIdentificationService.prototype.getIdentifier=function(){return this._sharedCustomerIdentifier};SharedCustomerIdentificationService.prototype.hasIdentifier=function(){return Boolean(this.getIdentifier())};SharedCustomerIdentificationService.prototype.fetchIdentifier=function(callback){var sharedCustomerIdentifier;var self=this;if(this.hasIdentifier()){callback(this._sharedCustomerIdentifier)}sharedCustomerIdentifier=this.sharedCustomerIdentificationStore.get();if(sharedCustomerIdentifier){this._handleIdentifier(sharedCustomerIdentifier);callback(this._sharedCustomerIdentifier)}else{this.triggerPopup(function(){sharedCustomerIdentifier=self.sharedCustomerIdentificationStore.get();self._handleIdentifier(sharedCustomerIdentifier);callback(self._sharedCustomerIdentifier)})}};SharedCustomerIdentificationService.prototype.triggerPopup=function(callback){var poll;var self=this;window.open("/web/popup","braintree.dropinPopup");poll=setInterval(function(){var identifier=self.sharedCustomerIdentificationStore.get();if(identifier){self._handleIdentifier(identifier);callback();clearInterval(poll)}},100)};module.exports=SharedCustomerIdentificationService},{212:212}],212:[function(require,module,exports){"use strict";var Cookie=require(209);var LocalStorage=require(210);function SharedCustomerIdentificationStore(){this.COOKIE_NAME="venmotouch";this.cookie=new Cookie;this.localStorage=new LocalStorage}SharedCustomerIdentificationStore.prototype.set=function(val){this.cookie.set(this.COOKIE_NAME,val);this.localStorage.set(this.COOKIE_NAME,val)};SharedCustomerIdentificationStore.prototype.get=function(){return this.localStorage.get(this.COOKIE_NAME)||this.cookie.get(this.COOKIE_NAME)||null};module.exports=SharedCustomerIdentificationStore},{209:209,210:210}],213:[function(require,module,exports){"use strict";var _=require(120);var Handlebars=require(109);var paypalButton=require(238);var coinbaseButton=require(237);var helpers={ifEqual:function(arg1,arg2,options){if(arg1===arg2){return options.fn(this)}return options.inverse(this)},ifOr:function(arg1,arg2,options){if(arg1||arg2){return options.fn(this)}},ifContains:function(array,val,options){return _.contains(array,val)?options.fn(this):""}};_.each(helpers,function(fn,helper){Handlebars.registerHelper(helper,fn)});Handlebars.registerPartial("paypalButton",paypalButton);Handlebars.registerPartial("coinbaseButton",coinbaseButton);module.exports=helpers},{109:109,120:120,237:237,238:238}],214:[function(require,module,exports){"use strict";function parseDate(value){var month,len;value=value.replace(/\s+/g,"");if(value.match("/")){value=value.split("/");return{month:value[0],year:value[1].substr(0,4)}}len=value[0]==="0"||value.length>5||value.length===4?2:1;month=value.substr(0,len);return{month:month,year:value.substr(month.length,4)}}module.exports={parseDate:parseDate}},{}],215:[function(require,module,exports){(function(global){"use strict";var device;var ua=global.navigator.userAgent;var MIN_ANDROID_VERSION_FOR_FORMATTING="4.4";function isAndroid(){return Modernizr.touch&&ua.match(/Android/i)}function getAndroidVersion(){var match=ua.match(/Android\s([0-9\.]*)/i);if(match&&match[1]){return match[1]}}function isFirefox(){return ua.match("Firefox")}device={isTouch:Modernizr.touch,shouldAutoTab:function(){return isAndroid()&&!isFirefox()},shouldFormat:function(){if(isAndroid()){if(isFirefox()||getAndroidVersion()<MIN_ANDROID_VERSION_FOR_FORMATTING){return false}}return true}};module.exports=device}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],216:[function(require,module,exports){"use strict";var _=require(120);function getMaxCharLength(width){var max;var ranges=[{min:0,max:180,chars:7},{min:181,max:620,chars:14},{min:621,max:960,chars:22}];width=width||$(window).width();_.each(ranges,function(range){if(width>=range.min&&width<=range.max){max=range.chars}});return max||60}function truncateEmail(email,maxLength){var address,domain;if(email.indexOf("@")===-1){return email}email=email.split("@");address=email[0];domain=email[1];if(address.length>maxLength){address=address.slice(0,maxLength)+"..."}if(domain.length>maxLength){domain="..."+domain.slice(-maxLength)}return address+"@"+domain}function getPrefixedTransitionEnd(){var transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",transition:"transitionend"};return transEndEventNames[Modernizr.prefixed("transition")]}function getPrefixedAnimationEnd(){var animationEndEventNames={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",animation:"animationend"};return animationEndEventNames[Modernizr.prefixed("animation")]}(function(){var rAf,cAf,x;var lastTime=0;var vendors=["ms","moz","webkit","o"];for(x=0;x<vendors.length&&!window.requestAnimationFrame;++x){window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(callback){var currTime=(new Date).getTime();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);lastTime=currTime+timeToCall;return id}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(id){clearTimeout(id)}}rAf=window.requestAnimationFrame;cAf=window.cancelAnimationFrame;window.requestAnimationFrame=function(cb,ctx){return rAf(function(){cb.call(ctx,null)})};window.cancelAnimationFrame=function(cb,ctx){return cAf(function(){cb.call(ctx,null)})}})();module.exports={getMaxCharLength:getMaxCharLength,getPrefixedAnimationEnd:getPrefixedAnimationEnd,getPrefixedTransitionEnd:getPrefixedTransitionEnd,truncateEmail:truncateEmail}},{120:120}],217:[function(require,module,exports){"use strict";var Formatter=require(100);var device=require(215);function FakeFormatter(){this.resetPattern=function(){}}module.exports=device.shouldFormat()?Formatter:FakeFormatter},{100:100,215:215}],218:[function(require,module,exports){"use strict";var Backbone=require(1);var PaymentMethodModel=require(221);var PaymentMethodCollection=Backbone.Collection.extend({model:PaymentMethodModel,initialize:function(){var self=this;this.on("add",function(model){self.setActiveModel(model.toJSON())});this.once("reset",this.bootstrap)},bootstrap:function(){var model=this.findWhere({lastUsedByCurrentMerchant:true})||this.at(0);this.setActiveModel(model.toJSON())},setActiveModel:function(data){var nonce=data?data.nonce:this.at(0).get("nonce");this.each(function(model){model.set("isActive",model.get("nonce")===nonce)});this.trigger("change:activeModel",this.findWhere({isActive:true}))},getActiveModel:function(){return this.findWhere({isActive:true})||this.at(0)},getActiveModelAttr:function(attr){return this.getActiveModel().get(attr)}});module.exports=PaymentMethodCollection},{1:1,221:221}],219:[function(require,module,exports){module.exports={PAYPAL_INTEGRATION_NAME:"PayPal",INLINE_FRAME_NAME:"braintree-dropin-frame",MODAL_FRAME_NAME:"braintree-dropin-modal-frame",PAYMENT_METHOD_TYPES:["CoinbaseAccount","PayPalAccount","CreditCard"],cssClassMap:{"American Express":"american-express","Diners Club":"diners-club",DinersClub:"diners-club",Discover:"discover",JCB:"jcb",Maestro:"maestro",MasterCard:"master-card",Solo:"solo",Switch:"switch",UKMaestro:"maestro",UnionPay:"unionpay",Visa:"visa"},INLINE_FRAME_TEARDOWN_EVENT:"dropin:TEARDOWN_INLINE_FRAME",MODAL_FRAME_TEARDOWN_EVENT:"dropin:TEARDOWN_MODAL_FRAME"}},{}],220:[function(require,module,exports){"use strict";var _=require(120);var includes=require(115);var Backbone=require(1);var dateManager=require(214);var isFormatted=require(215).shouldFormat();var STANDARD_FORMAT={pattern:"{{9999}} {{9999}} {{9999}} {{9999}}",maxLength:19};var NO_FORMAT={pattern:"{{9999999999999999999}}",maxLength:19};var FORMATS={"american-express":{pattern:"{{9999}} {{999999}} {{99999}}",maxLength:17},maestro:NO_FORMAT,visa:STANDARD_FORMAT,"master-card":STANDARD_FORMAT,jcb:STANDARD_FORMAT,discover:STANDARD_FORMAT};var FormCardModel=Backbone.Model.extend({defaults:{cardType:"",cardClass:"",cardNumber:"",cardNumberMaxLength:19,cardPattern:NO_FORMAT.pattern,challenges:["cvv"],cvv:"",cvvAndZip:false,cvvOnly:false,cvvPatterns:{nonAmex:{attrs:{maxlength:"3",placeholder:"CVV"},pattern:"{{999}}",id:"cvv-icon",labelText:"CVV (3 digits)"},amex:{attrs:{maxlength:"4",placeholder:"CID"},pattern:"{{9999}}",id:"cid-icon",labelText:"CID (4 digits)"}},expirationDate:"",expirationDateMaxLengths:isFormatted?[7,8,9]:[4,5,6],expirationPatterns:[{"^[2-9]/?":"0{{9}} / {{9999}}"},{"*":"{{99}} / {{9999}}"}],postalCode:"",postalCodeMaxLength:8,postalCodePattern:{pattern:"{{********}}"},share:false,crossMerchantSharing:false,zipOnly:false},initialize:function(){this.on("change:cardType",this.setFormatForCardType)},setFormatForCardType:function(){var format=FORMATS[this.get("cardType").type]||NO_FORMAT;this.set({cardPattern:format.pattern,cardNumberMaxLength:format.maxLength})},splitExpirationDate:function(){var value=this.get("expirationDate").replace(/\s+|\//g,"");var date=dateManager.parseDate(value);this.set({expirationMonth:date.month,expirationYear:date.year})},getCardParams:function(){var params;this.splitExpirationDate();params={number:this.get("cardNumber"),expirationMonth:this.get("expirationMonth"),expirationYear:this.get("expirationYear"),cvv:this.get("cvv"),share:this.get("share")};if(includes(this.get("challenges"),"postal_code")){params.billingAddress={postalCode:this.get("postalCode")}}return params},isEmpty:function(keys){var self=this;keys=keys||["cardNumber","expirationDate","cvv","postalCode"];return _.map(keys,function(attr){return self.get(attr)}).reduce(function(l,n){return l+n}).length<1}});module.exports=FormCardModel},{1:1,115:115,120:120,214:214,215:215}],221:[function(require,module,exports){"use strict";var Backbone=require(1);var cssClassMap=require(219).cssClassMap;var PaymentMethodModel=Backbone.Model.extend({idAttribute:"nonce",initialize:function(){this.setClass()},setClass:function(){var type,cardClass;if(this.get("type")==="CreditCard"){type=this.get("details").cardType;if(type&&type.type){cardClass=type.type}else{cardClass=cssClassMap[type]||""}this.set("cardTypeClass",cardClass)}else if(this.get("type")==="CoinbaseAccount"){this.set("cardTypeClass","coinbase");this.set("label","Coinbase")}else{this.set("cardTypeClass","paypal");this.set("label","PayPal");this.normalizePayPalModel()}},normalizePayPalModel:function(){this.set("type","PayPalAccount");if(!this.get("details")){this.set("details",{email:this.get("email")});this.unset("email")}}});module.exports=PaymentMethodModel},{1:1,219:219}],222:[function(require,module,exports){"use strict";var Backbone=require(1);var BaseRouter=Backbone.Router.extend({views:{},navigate:function(fragment,options){if(options&&options.silent){this.currentView=fragment}else{Backbone.history.loadUrl(fragment)}},setCurrentView:function(newView,options){if(this.currentView){this.views[this.currentView].destroy()}this.currentView=newView;this.views[this.currentView].render(options)}});Backbone.$=window.$;module.exports=BaseRouter},{1:1}],223:[function(require,module,exports){"use strict";var Backbone=require(1);var _=require(120);var device=require(215);var ACTIVE_CLASS="active";var SHOW_LABEL_CLASS="show-label";var INVALID_CLASS="invalid";var LABEL_SPAN_SELECTOR=".field-name";var DEBOUNCE_DELAY=200;var BaseInputView=Backbone.View.extend({isActive:false,constructor:function(){this.showLabelSpan=showLabelSpanFactory(this);this.hideLabelSpan=hideLabelSpanFactory(this);Backbone.View.apply(this,arguments)},events:{"focus input":"handleFocus","blur input":"handleBlur"},postInitialize:function(options){this.$input=this.$input||$(this.input);this.HAS_TRANSITIONS=Modernizr.csstransitions;this.HAS_PLACEHOLDERS=this.$input.length&&Modernizr.placeholder;if(!this.HAS_PLACEHOLDERS){this.$input.val(this.$input.attr("placeholder"))}if(!this.HAS_TRANSITIONS){this.hideLabelSpan()}this.fieldIndex=_.isObject(options)&&_.has(options,"fieldIndex")?options.fieldIndex:999},toggleActive:function(){this.isActive=!this.isActive;this.$el.toggleClass(ACTIVE_CLASS,this.isActive)},handleFocus:function(){if(!this.HAS_PLACEHOLDERS){if(this.$input.val()===this.$input.attr("placeholder")){this.$input.val("");this.showLabelSpan()}}this.$el.addClass(ACTIVE_CLASS)},autoFocus:function(options){var shouldFocus=options&&options.force?options.force:!device.isTouch;if(shouldFocus){this.$input.focus()}},handleBlur:function(){if(!this.$input.val().length){this.hideLabelSpan();if(!this.HAS_PLACEHOLDERS){this.$input.val(this.$input.attr("placeholder"))}}this.$el.removeClass(ACTIVE_CLASS)},toggleLabelSpan:function(value){if(value.length||!this.HAS_PLACEHOLDERS){this.showLabelSpan()}else{this.hideLabelSpan()}},isEmpty:function(){var value=this.$input.val();var isEmptyString=value==="";if(!this.HAS_PLACEHOLDERS){return isEmptyString||value===this.$input.attr("placeholder")}return isEmptyString},isValid:function(options){var isValid=this.validator?this.validator.isValid(options):true;if(isValid){this.renderValidState()}else{this.renderInvalidState()}return isValid},renderInvalidState:function(){this.$el.addClass(INVALID_CLASS)},renderValidState:function(){this.$el.removeClass(INVALID_CLASS)},autoAdvanceTab:function(){if(device.shouldAutoTab()){Backbone.trigger("ui:autoTab",{fieldIndex:this.fieldIndex})}},inputIsComplete:function(defaultMatcher){var self=this;return function(matcher){matcher=defaultMatcher||matcher;return parseInt(matcher,10)===self.$input.val().length}},destroy:function(){this.remove()}});function showLabelSpanFactory(context){return _.debounce(function(){if(context.HAS_TRANSITIONS){context.$el.addClass(SHOW_LABEL_CLASS)}else{context.$el.find(LABEL_SPAN_SELECTOR).animate({top:14,opacity:1},140)}},DEBOUNCE_DELAY,true)}function hideLabelSpanFactory(context){return _.debounce(function(duration){if(context.HAS_TRANSITIONS){context.$el.removeClass(SHOW_LABEL_CLASS)}else{context.$el.find(LABEL_SPAN_SELECTOR).animate({top:20,opacity:0},duration||0)}},DEBOUNCE_DELAY,true)}module.exports=BaseInputView},{1:1,120:120,215:215}],224:[function(require,module,exports){(function(global){"use strict";var bind=require(117);var Backbone=require(1);var busEvents=require(179).events;var DISABLED_CLASS="ui-disabled";var $body=$("body");var CancelPopupView=Backbone.View.extend({el:".cancel-popup",events:{"click .cancel-popup-button":"destroyPopup"},initialize:function(){this.currentPopupSource=null;this.setElements();this.setEvents();global.destroyPopup=bind(this.destroyPopup,this)},setElements:function(){if(this.el){this.button=this.el.querySelector("button")}},setEvents:function(){global.braintreeBus.on(busEvents.UI_POPUP_DID_OPEN,bind(this.handleOpenPopup,this));global.braintreeBus.on(busEvents.UI_POPUP_DID_CLOSE,bind(this.handleClosePopup,this))},handleOpenPopup:function(payload){var source=payload.source;this.currentPopupSource=/Coinbase|PayPal/.test(source)?source:null;this.renderAndDisable()},handleClosePopup:function(){this.enableUI();this.currentPopupSource=null},renderAndDisable:function(){this.button.innerHTML="Cancel "+(this.currentPopupSource||"")+" Login";this.disableUI()},enableUI:function(){$body.removeClass(DISABLED_CLASS)},disableUI:function(){$body.addClass(DISABLED_CLASS)},handleCancelClick:function(){this.destroyPopup()},destroyPopup:function(){if(this.currentPopupSource){global.braintreeBus.emit(busEvents.UI_POPUP_FORCE_CLOSE,{target:this.currentPopupSource})}}});module.exports=CancelPopupView}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{1:1,117:117,179:179}],225:[function(require,module,exports){"use strict";var _=require(120);var Formatter=require(217);var Super=require(223);var validators=require(84);var Input=require(195);var getCardTypes=require(93);var CreditCardInputView=Super.extend({fieldKey:"number",config:{errorMessage:"Invalid Credit Card Number!",validatorRules:[validators.number]},events:function(){return _.chain(Super.prototype.events).clone().extend({"change input":"formatInput","blur input":"handleBlur","keyup input":"formatInput","keydown input":"handleKeydown","keypress input":"noop","paste input":"formatInput"}).value()},initialize:function(options){this.setElements();this.setEvents();this.isComplete=Super.prototype.inputIsComplete.call(this);this.postInitialize(options)},setElements:function(){this.input=this.$el.find("input").get(0);this.$cardHint=this.$el.find(".payment-method-icon");this.validator=new Input(this);this.inputFormatter=new Formatter(this.input,{pattern:this.model.get("cardPattern")})},setEvents:function(){this.listenTo(this.model,"change:cardType",this.updateCreditCardType);this.listenTo(this.model,"change:cardPattern",this.setCreditCardNumberFormatterPattern)},formatInput:function(event){var value=event.target.value;var possibleCardTypes,cardType;this.toggleLabelSpan(value);possibleCardTypes=getCardTypes(value.replace(/\s/g,""));if(possibleCardTypes.length===1){cardType=possibleCardTypes[0]}else{cardType={}}this.model.set({cardType:cardType,cardNumber:value});if(this.isComplete(this.model.get("cardNumberMaxLength"))&&this.isValid()){this.autoAdvanceTab()}},handleBlur:function(event){this.formatInput(event);this.setCreditCardNumberFormatterPattern();Super.prototype.handleBlur.apply(this,arguments)},handleKeydown:function(){if(!this.isComplete(this.model.get("cardNumberMaxLength"))){this.renderValidState()}},updateCreditCardType:function(){var newClass=this.model.get("cardType").type;var oldClass=this.model.get("cardClass");this.model.set("cardClass",newClass);this.$cardHint.removeClass(oldClass).addClass(newClass)},setCreditCardNumberFormatterPattern:function(){var pattern=this.model.get("cardPattern");this.inputFormatter.resetPattern(pattern)}});module.exports=CreditCardInputView},{120:120,195:195,217:217,223:223,84:84,93:93}],226:[function(require,module,exports){"use strict";var _=require(120);var Formatter=require(217);var Super=require(223);var validators=require(84);var Input=require(195);var CvvInputView=Super.extend({fieldKey:"cvv",config:{errorMessage:"Invalid CVV!",validatorRules:[function(value){var cvvLength=3;try{cvvLength=this.model.get("cardType").code.size}catch(e){}return validators.cvv(value,cvvLength)}]},events:function(){return _.chain(Super.prototype.events).clone().extend({"keyup input":"formatInput","keydown input":"handleKeydown","focus input":"handleInstanceFocus","blur input":"handleInstanceBlur","paste input":"formatInput"}).value()},initialize:function(options){this.setElements();this.setEvents();this.updateCvvForCardType();this.isComplete=Super.prototype.inputIsComplete.call(this);this.postInitialize(options)},setElements:function(){this.$input=this.$el.find("input");this.input=this.$input.get(0);this.label=this.$el.find(".field-name").get(0);this.cardHint=this.$el.find(".payment-method-icon").get(0);this.validator=new Input(this);this.inputFormatter=new Formatter(this.input,this.model.get("cvvPatterns").nonAmex)},setEvents:function(){this.listenTo(this.model,"change:cardType",this.updateCvvForCardType)},updateCvvForCardType:function(){var cvvData=this.model.get("cvvPatterns");this.formatData=this.model.get("cardType").type==="american-express"?cvvData.amex:cvvData.nonAmex;this.inputFormatter.resetPattern(this.formatData.pattern);this.updateCardHint();this.label.innerHTML=this.formatData.labelText;this.$input.attr(this.formatData.attrs);if(this.$input.length&&!Modernizr.placeholder){if(!this.$input.val().length){this.$input.val(this.$input.attr("placeholder"))}}},formatInput:function(event){var value=event.target.value;this.toggleLabelSpan(value);this.model.set("cvv",value);if(this.isComplete(this.formatData.attrs.maxlength)&&this.isValid()){this.autoAdvanceTab()}},handleKeydown:function(){this.renderValidState()},updateCardHint:function(id){this.cardHint.id=id},handleInstanceFocus:function(){this.updateCardHint(this.formatData.id);Super.prototype.handleFocus.apply(this,arguments)},handleInstanceBlur:function(){this.updateCardHint();Super.prototype.handleBlur.apply(this,arguments)}});module.exports=CvvInputView},{120:120,195:195,217:217,223:223,84:84}],227:[function(require,module,exports){"use strict";var _=require(120);var Formatter=require(217);var Super=require(223);var validators=require(84);var Input=require(195);var ExpirationInputView=Super.extend({fieldKey:"expiration",isActive:false,config:{errorMessage:"Invalid expiration date!",validatorRules:[validators.expirationDate]},events:function(){return _.chain(Super.prototype.events).clone().extend({"change input":"formatInput","keyup input":"formatInput","keydown input":"handleKeydown","paste input":"formatInput"}).value()},initialize:function(options){this.setElements();this.postInitialize(options)},setElements:function(){this.input=this.$el.find("input").get(0);this.validator=new Input(this);this.inputFormatter=new Formatter(this.input,{patterns:this.model.get("expirationPatterns")})},formatInput:function(event){var value=event.target.value;var completionStatus=this.isComplete(value);this.toggleLabelSpan(value);this.model.set("expirationDate",value);if(completionStatus.shouldValidate&&this.isValid({partial:true})){this.renderValidState();if(completionStatus.shouldAdvance){this.autoAdvanceTab()}}},handleKeydown:function(event){if(!this.isComplete(event.target.value)){this.renderValidState()}},isComplete:function(value){var maxes=this.model.get("expirationDateMaxLengths");var valLen=value.length;return{shouldValidate:valLen>=maxes[0],shouldAdvance:!/20/.test(value)||valLen===_.last(maxes)}}});module.exports=ExpirationInputView},{120:120,195:195,217:217,223:223,84:84}],228:[function(require,module,exports){(function(global){"use strict";var _=require(120);var Backbone=require(1);var bus=require(179);var CreditCardInputView=require(225);var ExpirationInputView=require(227);var CvvInputView=require(226);var PostalCodeInputView=require(229);var SaveCheckboxView=require(230);var FormCardModel=require(220);var device=require(215);var template=require(239);var HIDDEN_CLASS="hidden";var LOADING_CLASS="is-loading";var SERVER_ERROR_CLASS="show-server-error";var $body=$("body");var AddPaymentMethodFormView=Backbone.View.extend({className:"add-payment-method-form-view",template:template,fields:{creditCard:{container:".credit-card-number-label",constructor:CreditCardInputView},expiration:{container:".expiration-label",constructor:ExpirationInputView},cvv:{challenge:"cvv",container:".cvv-label",constructor:CvvInputView},postalCode:{challenge:"postal_code",container:".postal-code-label",constructor:PostalCodeInputView},saveCheckbox:{container:".checkbox-label",constructor:SaveCheckboxView}},events:{submit:"submit","click .error-retry":"handleRetry"},initialize:function(options){this.root=options.root;this.model=options.model||new FormCardModel;this.setSubmitButtonState=options.setSubmitButtonState||null;this.isModal=options.isModal||false;if(device.isTouch){this.listenTo(Backbone,"ui:autoTab",this.handleAutoTab)}},render:function(){var challenges;var viewData={isModal:this.isModal};if(this.root.clientToken&&this.root.clientToken.challenges){this.model.set("challenges",this.root.clientToken.challenges)}if(this.root.clientToken&&this.root.clientToken.crossMerchantSharing){this.model.set("crossMerchantSharing",this.root.clientToken.crossMerchantSharing)}challenges=this.model.get("challenges");this.model.set("cvvOnly",_.contains(challenges,"cvv")&&challenges.length===1);this.model.set("zipOnly",_.contains(challenges,"postal_code")&&challenges.length===1);this.model.set("cvvAndZip",_.contains(challenges,"postal_code")&&_.contains(challenges,"cvv"));this.$el.html(this.template(_.extend(viewData,this.model.toJSON())));this.setupFields();return this},setupFields:function(){var challenges=this.model.get("challenges");var index=0;var self=this;this.fieldViews=[];_.each(this.fields,function(field,key){var view;if(field.challenge&&!_.contains(challenges,field.challenge)){return}if(key==="saveCheckbox"&&!self.model.get("crossMerchantSharing")){return}view=new field.constructor({el:self.$el.find(field.container),model:self.model,fieldIndex:index});self.fieldViews.push(view);index++})},submit:function(){var invalidViews=_.chain(this.fieldViews).filter(function(view){return!view.isValid()}).value();if(invalidViews.length>0){_.first(invalidViews).autoFocus();global.braintreeBus.emit(bus.events.ERROR,{type:"VALIDATION",message:"Some payment method input fields are invalid.",details:{invalidFields:_.map(invalidViews,function(view){return{fieldKey:view.fieldKey,isEmpty:view.isEmpty()}})}})}else{this.savePaymentMethod()}return false},savePaymentMethod:function(){var card=this.model.getCardParams();var self=this;$body.addClass(LOADING_CLASS);requestAnimationFrame(function(){if(self.isModal){global.braintreeBus.emit(bus.events.SEND_ANALYTICS_EVENTS,"modal.add-card.start")}else{global.braintreeBus.emit(bus.events.SEND_ANALYTICS_EVENTS,"inline.add-card.start")}self.root.apiClient.addCreditCard(card,_.bind(self.handlePaymentMethodAdd,self))})},handlePaymentMethodAdd:function(err,addedPaymentMethod){var self=this;if(err){if(this.isModal){global.braintreeBus.emit(bus.events.SEND_ANALYTICS_EVENTS,"modal.add-card.fail");this.renderErrorStateFromServer()}else{global.braintreeBus.emit(bus.events.SEND_ANALYTICS_EVENTS,"inline.add-card.fail");this.renderErrorStateFromServer()}}else if(this.isModal){setTimeout(function(){$body.removeClass(LOADING_CLASS);requestAnimationFrame(function(){global.braintreeBus.emit(bus.events.SEND_ANALYTICS_EVENTS,"modal.add-card.success",function(){self.root.rpcClient.invoke("sendAddedPaymentMethod",[addedPaymentMethod]);self.root.close()})})},300)}else{global.braintreeBus.emit(bus.events.SEND_ANALYTICS_EVENTS,"inline.add-card.success",function(){self.successCallback(addedPaymentMethod)})}},renderErrorStateFromServer:function(){var self=this;this.$el.blur();$body.removeClass(LOADING_CLASS);requestAnimationFrame(function(){if(self.setSubmitButtonState){self.setSubmitButtonState({disabled:true})}$body.addClass(SERVER_ERROR_CLASS)})},handleRetry:function(event){event.preventDefault();$body.removeClass(SERVER_ERROR_CLASS);if(this.setSubmitButtonState){this.setSubmitButtonState({disabled:false})}},setFocusOnFirstInput:function(){this.fieldViews[0].autoFocus()},handleAutoTab:function(payload){var index=payload.fieldIndex;var isLastInput=index>this.fieldViews.length-2;if(!isLastInput){this.fieldViews[payload.fieldIndex+1].autoFocus({force:true})}},hide:function(){this.$el.addClass(HIDDEN_CLASS)},show:function(){this.$el.removeClass(HIDDEN_CLASS)},destroy:function(){this.$el.empty()}});module.exports=AddPaymentMethodFormView}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{1:1,120:120,179:179,215:215,220:220,225:225,226:226,227:227,229:229,230:230,239:239}],229:[function(require,module,exports){"use strict";var _=require(120);var Formatter=require(217);var Super=require(223);var validators=require(84);var Input=require(195);var PostalCodeInputView=Super.extend({fieldKey:"postalCode",config:{errorMessage:"Invalid Postal Code",validatorRules:[validators.postalCode]},events:function(){return _.chain(Super.prototype.events).clone().extend({"keyup input":"formatInput","keydown input":"handleKeydown","paste input":"formatInput"}).value()},initialize:function(options){this.setElements();this.isComplete=Super.prototype.inputIsComplete.call(this,this.model.get("postalCodeMaxLength"));this.postInitialize(options)},setElements:function(){this.input=this.$el.find("input").get(0);this.validator=new Input(this);this.inputFormatter=new Formatter(this.input,this.model.get("postalCodePattern"))},formatInput:function(event){var value=event.target.value;this.toggleLabelSpan(value);this.model.set("postalCode",value);if(this.isComplete()){this.autoAdvanceTab()}},handleKeydown:function(){this.renderValidState()}});module.exports=PostalCodeInputView},{120:120,195:195,217:217,223:223,84:84}],230:[function(require,module,exports){"use strict";var Super=require(223);var SaveCheckboxView=Super.extend({events:{'change [name="save"]':"setSave"},initialize:function(){this.setElements();this.isValid=true;this.setSave()},setElements:function(){this.$checkbox=this.$el.find('[name="save"]')},setSave:function(){this.model.set("share",this.$checkbox.prop("checked"))}});module.exports=SaveCheckboxView},{223:223}],231:[function(require,module,exports){var HandlebarsCompiler=require(109);module.exports=HandlebarsCompiler.template({compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1,buffer='<div class="payment-container">\n  <div class="payment-method-options">\n';stack1=this.invokePartial(partials.paypalButton,"  ","paypalButton",depth0,undefined,helpers,partials,data);if(stack1!=null){buffer+=stack1}stack1=this.invokePartial(partials.coinbaseButton,"  ","coinbaseButton",depth0,undefined,helpers,partials,data);if(stack1!=null){buffer+=stack1}return buffer+'  </div>\n  <div class="form-container"></div>\n\n</div>\n'},usePartial:true,useData:true})},{109:109}],232:[function(require,module,exports){var HandlebarsCompiler=require(109);module.exports=HandlebarsCompiler.template({1:function(depth0,helpers,partials,data){var stack1,lambda=this.lambda,escapeExpression=this.escapeExpression;return'  <span class="payment-method-type">'+escapeExpression(lambda((stack1=(stack1=depth0!=null?depth0.paymentMethod:depth0)!=null?stack1.details:stack1)!=null?stack1.cardType:stack1,depth0))+'</span>\n  <span class="payment-method-description">ending in '+escapeExpression(lambda((stack1=(stack1=depth0!=null?depth0.paymentMethod:depth0)!=null?stack1.details:stack1)!=null?stack1.lastTwo:stack1,depth0))+"</span>\n"},3:function(depth0,helpers,partials,data){var stack1,lambda=this.lambda,escapeExpression=this.escapeExpression;return'  <span class="payment-method-type">'+escapeExpression(lambda((stack1=depth0!=null?depth0.paymentMethod:depth0)!=null?stack1.label:stack1,depth0))+'</span>\n  <span class="payment-method-description">'+escapeExpression(lambda((stack1=(stack1=depth0!=null?depth0.paymentMethod:depth0)!=null?stack1.details:stack1)!=null?stack1.truncatedEmail:stack1,depth0))+"</span>\n"},5:function(depth0,helpers,partials,data){var stack1,helperMissing=helpers.helperMissing,buffer='<div>\n  <form>\n    <div class="grid">\n      <div class="row">\n        <div class="column ';stack1=(helpers.ifContains||depth0&&depth0.ifContains||helperMissing).call(depth0,(stack1=depth0!=null?depth0.paymentMethod:depth0)!=null?stack1.securityQuestions:stack1,"postal_code",{name:"ifContains",hash:{},fn:this.program(6,data),inverse:this.noop,data:data});if(stack1!=null){buffer+=stack1}buffer+='">\n          <label class="card-label cvv-label" for="cvv">\n            <span class="field-name">CVV</span>\n            <input id="cvv" name="cvv" class="cvv card-field" maxlength="3" type="tel" inputmode="numeric" placeholder="CVV" autocomplete="off">\n            <span class="payment-method-icon"></span>\n          </label>\n        </div>\n\n';stack1=(helpers.ifContains||depth0&&depth0.ifContains||helperMissing).call(depth0,(stack1=depth0!=null?depth0.paymentMethod:depth0)!=null?stack1.securityQuestions:stack1,"postal_code",{name:"ifContains",hash:{},fn:this.program(8,data),inverse:this.noop,data:data});if(stack1!=null){buffer+=stack1}return buffer+"      </div>\n    </div>\n  </form>\n</div>\n"},6:function(depth0,helpers,partials,data){return"half"},8:function(depth0,helpers,partials,data){return'        <div class="column half">\n          <label class="card-label postal-code-label" for="postal-code">\n            <span class="field-name">Postal Code</span>\n            <input id="postal-code" name="postal-code" class="postal-code card-field" autocomplete="off" maxlength="8" placeholder="Postal Code" autofill="off" autocomplete="off">\n          </label>\n        </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1,lambda=this.lambda,escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing,buffer='<div class="payment-method-item card-label">\n  <span class="payment-method-icon stick-left '+escapeExpression(lambda((stack1=depth0!=null?depth0.paymentMethod:depth0)!=null?stack1.cardTypeClass:stack1,depth0))+'"></span>\n';stack1=(helpers.ifEqual||depth0&&depth0.ifEqual||helperMissing).call(depth0,(stack1=depth0!=null?depth0.paymentMethod:depth0)!=null?stack1.type:stack1,"CreditCard",{name:"ifEqual",hash:{},fn:this.program(1,data),inverse:this.program(3,data),data:data});if(stack1!=null){buffer+=stack1}buffer+='</div>\n<div class="payment-method-action">\n  <button class="link link-small" id="choose-payment-method">Change payment method</button>\n</div>\n\n';stack1=helpers["if"].call(depth0,(stack1=depth0!=null?depth0.paymentMethod:depth0)!=null?stack1.isLocked:stack1,{name:"if",hash:{},fn:this.program(5,data),inverse:this.noop,data:data});if(stack1!=null){buffer+=stack1}return buffer},useData:true})},{109:109}],233:[function(require,module,exports){var HandlebarsCompiler=require(109);module.exports=HandlebarsCompiler.template({compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1,buffer='<div class="modal-header">\n  <h3>Add new payment method</h3>\n</div>\n<div class="modal-body-content">\n  <div class="payment-method-options">\n';stack1=this.invokePartial(partials.paypalButton,"  ","paypalButton",depth0,undefined,helpers,partials,data);if(stack1!=null){buffer+=stack1}stack1=this.invokePartial(partials.coinbaseButton,"  ","coinbaseButton",depth0,undefined,helpers,partials,data);if(stack1!=null){buffer+=stack1}return buffer+'  </div>\n  <div class="form-container"></div>\n</div>\n<div class="modal-footer">\n  <button class="payment-method-add" disabled>Add new payment method</button>\n  <div class="use-saved-payment-method">\n    <button class="link use-saved-payment-method-link">Use saved payment method</button>\n  </div>\n  <div class="cancel">\n    <a href="#" class="cancel-button">Cancel</a>\n  </div>\n</div>\n'},usePartial:true,useData:true})},{109:109}],234:[function(require,module,exports){var HandlebarsCompiler=require(109);module.exports=HandlebarsCompiler.template({compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){return'<div class="modal-header">\n  <h3>Select payment method</h3>\n</div>\n<div class="modal-body-content">\n  <div class="payment-methods-list"></div>\n  <div class="add-payment-method-item">\n    <span class="add-payment-method-link">Add Payment Method</span>\n  </div>\n</div>\n<div class="modal-footer">\n  <div class="cancel">\n    <a href="#" class="cancel-button">Cancel</a>\n  </div>\n</div>\n'},useData:true})},{109:109}],235:[function(require,module,exports){var HandlebarsCompiler=require(109);module.exports=HandlebarsCompiler.template({compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){return'<div class="modal-body">\n\n  <div class="modal-container"></div>\n\n  <div class="loader">\n    <div class="loader-background"></div>\n    <div class="indicator">\n      <svg id="loader-svg-icon" width="14px" height="16px" viewBox="0 0 28 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n        <g id="New-Customer" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n          <g id="Loading" sketch:type="MSArtboardGroup" transform="translate(-526.000000, -915.000000)" fill="#FFFFFF">\n            <g id="Loading-Indicator" sketch:type="MSLayerGroup" transform="translate(468.000000, 862.000000)">\n              <g id="Secure" transform="translate(58.000000, 53.000000)" sketch:type="MSShapeGroup">\n                <path d="M6,10 L6,7.9998866 C6,3.57774184 9.581722,0 14,0 C18.4092877,0 22,3.58167123 22,7.9998866 L22,10 L18,10 L18,7.9947834 C18,5.78852545 16.2046438,4 14,4 C11.790861,4 10,5.79171562 10,7.9947834 L10,10 L6,10 Z M0.996534824,14 C0.446163838,14 0,14.4449463 0,14.9933977 L0,31.0066023 C0,31.5552407 0.439813137,32 0.996534824,32 L27.0034652,32 C27.5538362,32 28,31.5550537 28,31.0066023 L28,14.9933977 C28,14.4447593 27.5601869,14 27.0034652,14 L0.996534824,14 Z" id="Rectangle-520"></path>\n              </g>\n            </g>\n          </g>\n        </g>\n      </svg>\n    </div>\n    <div class="loader-message">Authenticating...</div>\n  </div>\n\n  <div class="cancel-popup">\n    <button class="cancel-popup-button"></button>\n  </div>\n</div>\n'},useData:true})},{109:109}],236:[function(require,module,exports){var HandlebarsCompiler=require(109);module.exports=HandlebarsCompiler.template({1:function(depth0,helpers,partials,data){var stack1,lambda=this.lambda,escapeExpression=this.escapeExpression;return'  <span class="payment-method-type">'+escapeExpression(lambda((stack1=depth0!=null?depth0.details:depth0)!=null?stack1.cardType:stack1,depth0))+'</span>\n  <span class="payment-method-description">ending in '+escapeExpression(lambda((stack1=depth0!=null?depth0.details:depth0)!=null?stack1.lastTwo:stack1,depth0))+"</span>\n"},3:function(depth0,helpers,partials,data){var stack1,helper,functionType="function",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,lambda=this.lambda;return'  <span class="payment-method-type">'+escapeExpression((helper=(helper=helpers.label||(depth0!=null?depth0.label:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"label",hash:{},data:data}):helper))+'</span>\n  <span class="payment-method-description">'+escapeExpression(lambda((stack1=depth0!=null?depth0.details:depth0)!=null?stack1.truncatedEmail:stack1,depth0))+"</span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1,helper,functionType="function",helperMissing=helpers.helperMissing,escapeExpression=this.escapeExpression,buffer='<div class="payment-method-item card-label">\n  <span class="payment-method-icon stick-left '+escapeExpression((helper=(helper=helpers.cardTypeClass||(depth0!=null?depth0.cardTypeClass:depth0))!=null?helper:helperMissing,typeof helper===functionType?helper.call(depth0,{name:"cardTypeClass",hash:{},data:data}):helper))+'"></span>\n';stack1=(helpers.ifEqual||depth0&&depth0.ifEqual||helperMissing).call(depth0,depth0!=null?depth0.type:depth0,"CreditCard",{name:"ifEqual",hash:{},fn:this.program(1,data),inverse:this.program(3,data),data:data});if(stack1!=null){buffer+=stack1}return buffer+"</div>\n"},useData:true})},{109:109}],237:[function(require,module,exports){var HandlebarsCompiler=require(109);module.exports=HandlebarsCompiler.template({1:function(depth0,helpers,partials,data){return'  <button id="coinbase-container" class="is-active">\n    <span class="coinbase-button-logo">Coinbase</span>\n  </button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1,buffer="";stack1=helpers["if"].call(depth0,depth0!=null?depth0.coinbaseEnabled:depth0,{name:"if",hash:{},fn:this.program(1,data),inverse:this.noop,data:data});if(stack1!=null){buffer+=stack1}return buffer},useData:true})},{109:109}],238:[function(require,module,exports){var HandlebarsCompiler=require(109);module.exports=HandlebarsCompiler.template({1:function(depth0,helpers,partials,data){return'  <button id="braintree-paypal-button" class="paypal is-active" title="Pay with PayPal"><span class="paypal-button-logo"></span></button>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1,buffer="";stack1=helpers["if"].call(depth0,depth0!=null?depth0.paypalEnabled:depth0,{name:"if",hash:{},fn:this.program(1,data),inverse:this.noop,data:data});if(stack1!=null){buffer+=stack1}return buffer},useData:true})},{109:109}],239:[function(require,module,exports){var HandlebarsCompiler=require(109);module.exports=HandlebarsCompiler.template({1:function(depth0,helpers,partials,data){return"half"},3:function(depth0,helpers,partials,data){return"right-border"},5:function(depth0,helpers,partials,data){return'    <div class="column half">\n      <label class="card-label cvv-label" for="cvv">\n        <span class="field-name">CVV</span>\n        <input id="cvv" name="cvv" class="cvv card-field" maxlength="3" type="tel" inputmode="numeric" placeholder="CVV" autocomplete="off" autocapitalize="off">\n        <span class="payment-method-icon"></span>\n        <div class="invalid-bottom-bar"></div>\n      </label>\n    </div>\n'},7:function(depth0,helpers,partials,data){return'    <div class="column half">\n      <label class="card-label postal-code-label" for="postal-code">\n        <span class="field-name">Postal Code</span>\n        <input id="postal-code" name="postal-code" class="postal-code card-field" autocomplete="off" maxlength="8" placeholder="Postal Code" autofill="off" autocapitalize="off">\n        <div class="invalid-bottom-bar"></div>\n      </label>\n    </div>\n'},9:function(depth0,helpers,partials,data){return'  <div class="row">\n    <div class="column">\n      <label class="card-label postal-code-label" for="postal-code">\n        <span class="field-name">Postal Code</span>\n        <input id="postal-code" name="postal-code" class="postal-code card-field" autocomplete="off" maxlength="8" placeholder="Postal Code" autofill="off" autocapitalize="off">\n        <div class="invalid-bottom-bar"></div>\n      </label>\n    </div>\n  </div>\n'},11:function(depth0,helpers,partials,data){return'  <label class="checkbox-label">\n    <input name="save" type="checkbox" class="checkbox-save" value="save" checked="checked" />\n    <div class="checkbox-text">\n      Save with Paypal for use on other sites\n    </div>\n    <p class="terms">By saving information you agree to the <a href="#">Paypal Touch</a> <a href="#">Terms of Service</a></p>\n  </label>\n'},13:function(depth0,helpers,partials,data){return'  <input type="submit" value="">\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(depth0,helpers,partials,data){var stack1,helper,options,helperMissing=helpers.helperMissing,functionType="function",blockHelperMissing=helpers.blockHelperMissing,buffer='<form action="#" method="post" class="grid card-form">\n  <label class="card-label credit-card-number-label" for="credit-card-number">\n    <span class="field-name">Card Number</span>\n    <input id="credit-card-number" name="credit-card-number" class="card-field" type="tel" inputmode="numeric" placeholder="Card Number" autocomplete="off">\n    <span class="payment-method-icon"></span>\n    <div class="invalid-bottom-bar"></div>\n  </label>\n\n  <div class="row">\n    <div class="column ';stack1=helpers["if"].call(depth0,depth0!=null?depth0.challenges:depth0,{name:"if",hash:{},fn:this.program(1,data),inverse:this.noop,data:data});if(stack1!=null){buffer+=stack1}buffer+='">\n      <label class="card-label expiration-label ';stack1=helpers["if"].call(depth0,depth0!=null?depth0.challenges:depth0,{name:"if",hash:{},fn:this.program(3,data),inverse:this.noop,data:data});if(stack1!=null){buffer+=stack1}buffer+='" for="expiration">\n        <span class="field-name">MM / YY</span>\n        <input id="expiration" name="expiration" class="expiration card-field" type="tel" inputmode="numeric" placeholder="Expiration Date" autocomplete="off">\n        <div class="invalid-bottom-bar"></div>\n      </label>\n    </div>\n';stack1=(helpers.ifOr||depth0&&depth0.ifOr||helperMissing).call(depth0,depth0!=null?depth0.cvvOnly:depth0,depth0!=null?depth0.cvvAndZip:depth0,{name:"ifOr",hash:{},fn:this.program(5,data),inverse:this.noop,data:data});if(stack1!=null){buffer+=stack1}stack1=helpers["if"].call(depth0,depth0!=null?depth0.zipOnly:depth0,{name:"if",hash:{},fn:this.program(7,data),inverse:this.noop,data:data});if(stack1!=null){buffer+=stack1}buffer+="  </div>\n\n";stack1=(helper=(helper=helpers.cvvAndZip||(depth0!=null?depth0.cvvAndZip:depth0))!=null?helper:helperMissing,options={name:"cvvAndZip",hash:{},fn:this.program(9,data),inverse:this.noop,data:data},typeof helper===functionType?helper.call(depth0,options):helper);if(!helpers.cvvAndZip){stack1=blockHelperMissing.call(depth0,stack1,options)}if(stack1!=null){buffer+=stack1}buffer+="\n";stack1=(helper=(helper=helpers.crossMerchantSharing||(depth0!=null?depth0.crossMerchantSharing:depth0))!=null?helper:helperMissing,options={name:"crossMerchantSharing",hash:{},fn:this.program(11,data),inverse:this.noop,data:data},typeof helper===functionType?helper.call(depth0,options):helper);if(!helpers.crossMerchantSharing){stack1=blockHelperMissing.call(depth0,stack1,options)}if(stack1!=null){buffer+=stack1}buffer+="\n";stack1=(helper=(helper=helpers.isModal||(depth0!=null?depth0.isModal:depth0))!=null?helper:helperMissing,options={name:"isModal",hash:{},fn:this.program(13,data),inverse:this.noop,data:data},typeof helper===functionType?helper.call(depth0,options):helper);if(!helpers.isModal){stack1=blockHelperMissing.call(depth0,stack1,options)}if(stack1!=null){buffer+=stack1}return buffer+'</form>\n\n<div class="server-error">\n  <div class="server-error-message-container">\n    <div class="server-error-message">\n      <span class="error-icon"></span>There was an error processing your request. <a href="#" class="error-retry">Try again</a>\n    </div>\n  </div>\n</div>\n'},useData:true})},{109:109}],240:[function(require,module,exports){"use strict";module.exports=require(242)},{242:242}],241:[function(require,module,exports){(function(global){"use strict";var braintreeUtil=require(82);var bind=require(117);var isFunction=require(166);var Destructor=require(94);var Bus=require(179);var AppView=require(244);var LoggedInView=require(246);var LoggedOutView=require(247);var OverlayView=require(250);var MerchantPageView=require(248);var PaymentMethodNonceInputFieldView=require(251);var BridgeIframeView=require(245);var browser=require(261);var constants=require(253);var util=require(263);var bindAll=require(118);function Client(clientToken,options,channel){options=options||{};this._clientToken=clientToken;this._clientOptions=options;this._clientToken.correlationId=util.generateUid();this.destructor=new Destructor;this.channel=channel;this.bus=new Bus({merchantUrl:global.location.href,channel:this.channel});this.container=braintreeUtil.normalizeElement(options.container||document.body);this.paymentMethodNonceInputField=options.paymentMethodNonceInputField;this.insertFrameFunction=options.insertFrame;this.onSuccess=options.onSuccess;this.onCancelled=options.onCancelled;this.loggedInView=null;this.loggedOutView=null;this.appView=null;this.merchantPageView=null;this.paymentMethodNonceInputFieldView=null;this.overlayView=null;this.bridgeIframeView=null;this.headless=options.headless;this.isDropin=options.isDropin;bindAll(this,["initAuthFlow","closeAuthFlow"])}Client.prototype.initialize=function(){var clickLoginHandler=bind(this._handleClickLogin,this);this._createViews();this.bus.on(constants.events.GET_CLIENT_TOKEN,bind(this._handleGetClientToken,this));this.bus.on(constants.events.GET_CLIENT_OPTIONS,bind(this._handleGetClientOptions,this));this.bus.on(Bus.events.PAYMENT_METHOD_CANCELLED,bind(this._handlePaymentMethodCancelled,this));if(!this.isDropin){this.bus.on(Bus.events.PAYMENT_METHOD_GENERATED,bind(this._handlePaymentMethodGenerated,this))}braintreeUtil.addEventListener(document.body,"click",clickLoginHandler);this.destructor.registerFunctionForTeardown(function(){braintreeUtil.removeEventListener(document.body,"click",clickLoginHandler)})};Client.prototype._createViews=function(){var i;var views=[];var self=this;if(browser.isBridgeIframeRequired()){this.bridgeIframeView=new BridgeIframeView({container:this.container,paypalAssetsUrl:sanitizeUrl(this._clientToken.paypal.assetsUrl),channel:this.channel});views.push(this.bridgeIframeView)}this.appView=new AppView({insertFrameFunction:this.insertFrameFunction,paypalAssetsUrl:sanitizeUrl(this._clientToken.paypal.assetsUrl),isHermes:util.isHermesConfiguration(this._clientToken,this._clientOptions),isDropin:this.isDropin,channel:this.channel});views.push(this.appView);if(!this.isDropin){this.merchantPageView=new MerchantPageView({channel:this.channel});views.push(this.merchantPageView);if(browser.isPopupSupported()&&browser.isOverlaySupported()){this.overlayView=new OverlayView({paypalAssetsUrl:sanitizeUrl(this._clientToken.paypal.assetsUrl),onFocus:function(){self.bus.emit(constants.events.FOCUS_APP)},onClose:function(){self.bus.emit(constants.events.CLOSE_APP)},locale:this._clientOptions.locale,channel:this.channel});views.push(this.overlayView)}}if(!(this.isDropin||this.headless)){this.paymentMethodNonceInputFieldView=new PaymentMethodNonceInputFieldView({container:this.container,el:this.paymentMethodNonceInputField,channel:this.channel});views.push(this.paymentMethodNonceInputFieldView);this.loggedInView=new LoggedInView({paypalAssetsUrl:sanitizeUrl(this._clientToken.paypal.assetsUrl),container:this.container,locale:this._clientOptions.locale,channel:this.channel});views.push(this.loggedInView);this.loggedOutView=new LoggedOutView({paypalAssetsUrl:sanitizeUrl(this._clientToken.paypal.assetsUrl),container:this.container,enablePayPalButton:util.isOnetimeHermesConfiguration(this._clientToken,this._clientOptions),locale:this._clientOptions.locale,channel:this.channel});views.push(this.loggedOutView)}this.destructor.registerFunctionForTeardown(function(){for(i=0;i<views.length;i++){views[i].teardown()}})};Client.prototype._handleClickLogin=function(event){var target=event.target||event.srcElement;while(true){if(target==null){return}if(target===event.currentTarget){return}if(this._isButton(target)){break}target=target.parentNode}util.preventDefault(event);this.initAuthFlow()};Client.prototype.initAuthFlow=function(){this.appView.open()};Client.prototype.closeAuthFlow=function(){this.appView.close()};Client.prototype._isButton=function(node){var isPayPalButton=node.id==="braintree-paypal-button";var isHermesButton=util.isOnetimeHermesConfiguration(this._clientToken,this._clientOptions)&&node.className.match(/paypal-button(?!-widget)/);return isPayPalButton||isHermesButton};Client.prototype._handlePaymentMethodGenerated=function(bundle){if(bundle.type===constants.NONCE_TYPE&&isFunction(this.onSuccess)){this.onSuccess(bundle)}};Client.prototype._handlePaymentMethodCancelled=function(payload){if(payload.source===constants.PAYPAL_INTEGRATION_NAME&&isFunction(this.onCancelled)){this.onCancelled()}};Client.prototype._clientTokenData=function(){return{analyticsUrl:this._clientToken.analytics?sanitizeUrl(this._clientToken.analytics.url):null,authorizationFingerprint:this._clientToken.authorizationFingerprint,clientApiUrl:sanitizeUrl(this._clientToken.clientApiUrl),displayName:this._clientOptions.displayName||this._clientToken.paypal.displayName,paypalAssetsUrl:sanitizeUrl(this._clientToken.paypal.assetsUrl),paypalClientId:this._clientToken.paypal.clientId,paypalPrivacyUrl:this._clientToken.paypal.privacyUrl,paypalUserAgreementUrl:this._clientToken.paypal.userAgreementUrl,billingAgreementsEnabled:this._clientToken.paypal.billingAgreementsEnabled,unvettedMerchant:this._clientToken.paypal.unvettedMerchant,payeeEmail:this._clientToken.paypal.payeeEmail,correlationId:this._clientToken.correlationId,offline:this._clientOptions.offline||this._clientToken.paypal.environmentNoNetwork,sdkVersion:this._clientToken.sdkVersion,merchantAppId:this._clientToken.merchantAppId}};Client.prototype._handleGetClientToken=function(callback){callback(this._clientTokenData())};Client.prototype._clientOptionsData=function(){return{locale:this._clientOptions.locale||"en_us",onetime:this._clientOptions.singleUse||false,integration:this._clientOptions.integration||"paypal",enableShippingAddress:this._clientOptions.enableShippingAddress||false,enableBillingAddress:this._clientOptions.enableBillingAddress||false,enableHermes:util.isHermesConfiguration(this._clientToken,this._clientOptions),amount:this._clientOptions.amount||null,currency:this._clientOptions.currency||null,shippingAddressOverride:this._clientOptions.shippingAddressOverride||null,enableCORS:this._clientOptions.enableCORS}};Client.prototype._handleGetClientOptions=function(callback){callback(this._clientOptionsData())};Client.prototype.teardown=function(){var self=this;this.destructor.teardown(function(){self.bus.teardown()})};module.exports=Client}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{117:117,118:118,166:166,179:179,244:244,245:245,246:246,247:247,248:248,250:250,251:251,253:253,261:261,263:263,82:82,94:94}],242:[function(require,module,exports){"use strict";var Client=require(241);var browser=require(261);var constants=require(253);var getLocale=require(255);var isHermesConfiguration=require(263).isHermesConfiguration;var isOnetimeHermesConfiguration=require(263).isOnetimeHermesConfiguration;var VERSION="2.15.7";var braintreeUtil=require(82);var braintreeApi=require(15);function create(clientToken,options,channel){var client,onUnsupported;options=options||{};onUnsupported=options.onUnsupported;if(typeof onUnsupported!=="function"){onUnsupported=function(error){try{console.log(error)}catch(e){}}}if(!clientToken){onUnsupported(new Error('Parameter "clientToken" cannot be null'));return null}clientToken=braintreeApi.parseClientToken(clientToken);if(!clientToken.paypalEnabled){onUnsupported(new Error("PayPal is not enabled"));return null}if(!browser.detectedPostMessage()){onUnsupported(new Error("unsupported browser detected"));return null}if(!options.container&&!options.headless){onUnsupported(new Error("Please supply a container for the PayPal button to be appended to"));return null}if(!isBrowserSecure(clientToken,options)){onUnsupported(new Error("unsupported protocol detected"));return null}if(isMisconfiguredUnvettedMerchant(clientToken,options)){onUnsupported(new Error("Unvetted merchant client token does not include a payee email"));return null}if(isHermesConfiguration(clientToken,options)){if(!isHermesSupportedCountry(options.locale)){onUnsupported(new Error("This PayPal integration does not support this country"));return null}}if(isOnetimeHermesConfiguration(clientToken,options)){if(!isHermesSupportedCurrency(options.currency)){onUnsupported(new Error("This PayPal integration does not support this currency"));return null}if(!isValidAmount(options.amount)){onUnsupported(new Error("Amount must be a number"));return null}}client=new Client(clientToken,options,channel);client.initialize();return client}function isSupportedOption(option,supported){var i;var supportedLength=supported.length;var isSupported=false;for(i=0;i<supportedLength;i++){if(option.toLowerCase()===supported[i].toLowerCase()){isSupported=true}}return isSupported}function isHermesSupportedCurrency(currency){return isSupportedOption(currency,constants.HERMES_SUPPORTED_CURRENCIES)}function isHermesSupportedCountry(locale){return isSupportedOption(getLocale(locale).split("_")[1],constants.HERMES_SUPPORTED_COUNTRIES)}function isValidAmount(amount){amount=parseFloat(amount);return typeof amount==="number"&&!isNaN(amount)&&amount>=0}function isMisconfiguredUnvettedMerchant(clientToken,options){return clientToken.paypal.unvettedMerchant&&(!isHermesConfiguration(clientToken,options)||!clientToken.paypal.payeeEmail)}function isBrowserSecure(clientToken,options){if(clientToken.paypal.allowHttp){return true}if(browser.isPopupSupported()){return true}if("merchantHttps"in options){return options.merchantHttps}return braintreeUtil.isBrowserHttps()}module.exports={create:create,VERSION:VERSION}},{15:15,241:241,253:253,255:255,261:261,263:263,82:82}],243:[function(require,module,exports){module.exports={en_us:{cancel:"Cancel",overlay_text:"Don't see the secure PayPal browser? We'll help you re-launch the window to complete your purchase.",continue_link:"Continue"},en_uk:{cancel:"Cancel",overlay_text:"Don't see the secure PayPal browser? We'll help you re-launch the window to complete your purchase.",continue_link:"Continue"},en_au:{cancel:"Cancel",overlay_text:"Don't see the secure PayPal browser? We'll help you re-launch the window to complete your purchase.",continue_link:"Continue"},sv_se:{cancel:"Avbryt",overlay_text:"Ser du inte den säkra PayPal-webbl&auml;saren? Vi hj&auml;lper dig att starta om f&ouml;nstret f&ouml;r att slutf&ouml;ra k&ouml;pet.",continue_link:"Forts&auml;tt"},de_de:{cancel:"Abbrechen",overlay_text:"Sie sehen das sichere Browserfenster von PayPal nicht? Das Fenster wird neu ge&ouml;ffnet, damit Sie Ihren Einkauf abschlie&szlig;en k&ouml;nnen.",continue_link:"Weiter"},fr_fr:{cancel:"Annuler",overlay_text:"Vous ne voyez pas le navigateur s&eacute;curis&eacute; PayPal ? Nous allons vous aider &agrave; relancer la fen&ecirc;tre pour effectuer votre achat.",continue_link:"Continuer"},en_ca:{cancel:"Cancel",overlay_text:"Don't see the secure PayPal browser? We'll help you re-launch the window to complete your purchase.",continue_link:"Continue"},fr_ca:{cancel:"Annuler",overlay_text:"Vous ne voyez pas le navigateur s&eacute;curis&eacute; de PayPal ? Nous vous aiderons &agrave; relancer la fen&ecirc;tre afin d'effectuer votre achat.",continue_link:"Continuer"},es_es:{cancel:"Cancelar",overlay_text:"&iquest;No ves el s&iacute;mbolo de navegaci&oacute;n segura de PayPal? Te ayudaremos a abrir de nuevo la ventana para completar la compra.",continue_link:"Continuar"},es_xc:{cancel:"Cancelar",overlay_text:"&iquest;No ve el s&iacute;mbolo de navegaci&oacute;n segura de PayPal? Abriremos la ventana nuevamente para que pueda completar su compra.",continue_link:"Continuar"},fr_xc:{cancel:"Annuler",overlay_text:"Le navigateur s&eacute;curis&eacute; de PayPal n'appara&icirc;t pas ? Nous allons vous aider &agrave; rouvrir la fen&ecirc;tre pour finaliser votre achat.",continue_link:"Continuer"},nl_nl:{cancel:"Annuleren",overlay_text:"Ziet u de beveiligde PayPal-browser niet? We helpen u het venster opnieuw te openen zodat u uw aankoop kunt voltooien.",continue_link:"Doorgaan"},pt_pt:{cancel:"Cancelar",overlay_text:"N&atilde;o est&aacute; a ver a indica&ccedil;&atilde;o de liga&ccedil;&atilde;o segura PayPal no browser? Vamos ent&atilde;o voltar a abrir a janela para concluir a sua compra.",continue_link:"Continuar"},ru_ru:{cancel:"Отмена",overlay_text:"Не отображается безопасная страница PayPal в браузере? Мы поможем вам повторно загрузить окно, чтобы завершить покупку.",continue_link:"Продолжить"},da_dk:{cancel:"Annuller",overlay_text:"Kan du ikke se PayPals sikre browser? Vi hj&aelig;lper dig med at &aring;bne vinduet igen, s&aring; du kan betale.",continue_link:"Forts&aelig;t"},it_it:{cancel:"Annulla",overlay_text:"Non vedi il browser sicuro di PayPal? Ti aiuteremo a riavviare la pagina per completare l'acquisto.",continue_link:"Continua"},no_no:{cancel:"Avbryt",overlay_text:"Ser du ikke den sikre PayPal-nettleseren? Vi hjelper deg med &aring; &aring;pne vinduet p&aring; nytt s&aring; du kan fullf&oslash;re kj&oslash;pet.",continue_link:"Fortsett"},pl_pl:{cancel:"Anuluj",overlay_text:"Nie widzisz bezpiecznej przeglądarki PayPal? Pomożemy Ci ponownie uruchomić to okno w celu dokonania zakupu.",continue_link:"Kontynuuj"},tr_tr:{cancel:"İptal",overlay_text:"G&uuml;venli PayPal tarayıcısını g&ouml;rm&uuml;yor musunuz? Alışverişinizi tamamlamak i&ccedil;in pencereyi yeniden başlatmanıza yardımcı olacağız.",continue_link:"Devam"},zh_xc:{cancel:"取消",overlay_text:"没有看到安全的PayPal浏览器？我们将帮助您重启窗口以完成购物。",continue_link:"继续"},en_hk:{cancel:"Cancel",overlay_text:"Don't see the secure PayPal browser? We'll help you re-launch the window to complete your purchase.",continue_link:"Continue"},zh_hk:{cancel:"取消",overlay_text:"看不到安全的 PayPal 瀏覽器視窗？我們會助你重新啟動視窗，以完成購物。",continue_link:"繼續"},en_my:{cancel:"Cancel",overlay_text:"Don't see the secure PayPal browser? We'll help you re-launch the window to complete your purchase.",continue_link:"Continue"},en_nz:{cancel:"Cancel",overlay_text:"Don't see the secure PayPal browser? We'll help you re-launch the window to complete your purchase.",continue_link:"Continue"},en_sg:{cancel:"Cancel",overlay_text:"Don't see the secure PayPal browser? We'll help you re-launch the window to complete your purchase.",continue_link:"Continue"}}},{}],244:[function(require,module,exports){(function(global){"use strict";var bind=require(117);var isFunction=require(166);var browser=require(261);var Destructor=require(94);var Bus=require(179);var constants=require(253);var PopupView=require(252);var ModalView=require(249);function AppView(options){var self=this;this.options=options||{};this.destructor=new Destructor;this.bus=new Bus({merchantUrl:global.location.href,channel:this.options.channel});this.destructor.registerFunctionForTeardown(function(){self.bus.teardown()});this._initialize()}AppView.prototype._initialize=function(){var self=this;if(browser.isPopupSupported()){this.app=new PopupView({src:this._buildUrl(),isHermes:this.options.isHermes,channel:this.options.channel})}else{this.app=new ModalView({src:this._buildUrl(),isDropin:this.options.isDropin,isHermes:this.options.isHermes,insertFrameFunction:this.options.insertFrameFunction,channel:this.options.channel})}this.destructor.registerFunctionForTeardown(function(){self.app.teardown()});this.bus.on(constants.events.CLOSE_APP,bind(this.close,this));this.bus.on(constants.events.FOCUS_APP,bind(this.focus,this));this.bus.on(Bus.events.PAYMENT_METHOD_GENERATED,bind(this._handlePaymentMethodGenerated,this));this.bus.on(Bus.events.UI_POPUP_FORCE_CLOSE,bind(this._handleForceClose,this))};AppView.prototype._buildUrl=function(){var url=this.options.paypalAssetsUrl;url+="/pwpp/";url+=constants.VERSION;url+="/html/braintree-frame.html";url+="#"+this.options.channel;return url};AppView.prototype.open=function(){this.focus();this.app.open();this.poll()};AppView.prototype._handleForceClose=function(event){if(event.target===constants.PAYPAL_INTEGRATION_NAME){this.close()}};AppView.prototype.close=function(){this.app.close()};AppView.prototype.focus=function(){if(isFunction(this.app.focus)){this.app.focus()}};AppView.prototype.isClosed=function(){return this.app.isClosed()};AppView.prototype.stopPolling=function(){clearInterval(this.pollId)};AppView.prototype.poll=function(){var self=this;this.pollId=setInterval(function(){if(self.isClosed()){self._handleClosed()}},100)};AppView.prototype._handlePaymentMethodGenerated=function(bundle){if(bundle.type===constants.NONCE_TYPE){this.close()}};AppView.prototype._handleClosed=function(){this.stopPolling();this.close();if(browser.isPopupSupported()){this.app.el=null}};AppView.prototype.teardown=function(){this.destructor.teardown()};module.exports=AppView}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{117:117,166:166,179:179,249:249,252:252,253:253,261:261,94:94}],245:[function(require,module,exports){"use strict";var constants=require(253);var iframer=require(110);function BridgeIframeView(options){this.options=options||{};this.el=iframer({src:this._buildUrl(),name:constants.BRIDGE_FRAME_NAME,height:1,width:1,style:{position:"static",top:0,left:0,bottom:0,padding:0,margin:0,border:0,outline:"none",background:"transparent"}});this.options.container.appendChild(this.el)}BridgeIframeView.prototype._buildUrl=function(){var url=this.options.paypalAssetsUrl;url+="/pwpp/";url+=constants.VERSION;url+="/html/bridge-frame.html";url+="#"+this.options.channel;return url};BridgeIframeView.prototype.teardown=function(){this.options.container.removeChild(this.el)};module.exports=BridgeIframeView},{110:110,253:253}],246:[function(require,module,exports){(function(global){"use strict";var braintreeUtil=require(82);var bind=require(117);var Destructor=require(94);var Bus=require(179);var util=require(263);var dom=require(262);var constants=require(253);var getLocalizationData=require(256);var translations=require(243);function LoggedInView(options){var localizationData;this.options=options||{};this.wrapper=this.options.container||document.body;this.destructor=new Destructor;this.bus=new Bus({merchantUrl:global.location.href,channel:options.channel});localizationData=getLocalizationData(this.options.locale,translations);this.translation=localizationData.translation;this._initialize()}LoggedInView.prototype._initialize=function(){var self=this;var clickLogoutHandler=bind(this._handleClickLogout,this);this._createViewContainer();this._createPayPalName();this._createEmailNode();this._createLogoutNode();braintreeUtil.addEventListener(this.logoutNode,"click",clickLogoutHandler);this.destructor.registerFunctionForTeardown(function(){braintreeUtil.removeEventListener(self.logoutNode,"click",clickLogoutHandler)});this.bus.on(Bus.events.PAYMENT_METHOD_GENERATED,bind(this._handlePaymentMethodGenerated,this));this.bus.on(Bus.events.PAYMENT_METHOD_CANCELLED,bind(this._handlePaymentMethodCancelled,this))};LoggedInView.prototype._createViewContainer=function(){var cssStyles=["display: none","max-width: 500px","overflow: hidden","padding: 16px","background-image: url("+this.options.paypalAssetsUrl+"/pwpp/"+constants.VERSION+"/images/paypal-small.png)","background-image: url("+this.options.paypalAssetsUrl+"/pwpp/"+constants.VERSION+"/images/paypal-small.svg), none","background-position: 20px 50%","background-repeat: no-repeat","background-size: 13px 15px","border-top: 1px solid #d1d4d6","border-bottom: 1px solid #d1d4d6"].join(";");this.container=document.createElement("div");this.container.id="braintree-paypal-loggedin";this.container.style.cssText=cssStyles;this.wrapper.appendChild(this.container)};LoggedInView.prototype._createPayPalName=function(){var cssStyles=["color: #283036","font-size: 13px","font-weight: 800",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"margin-left: 36px","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");this.payPalName=document.createElement("span");this.payPalName.id="bt-pp-name";this.payPalName.innerHTML="PayPal";this.payPalName.style.cssText=cssStyles;return this.container.appendChild(this.payPalName)};LoggedInView.prototype._createEmailNode=function(){var cssStyles=["color: #6e787f","font-size: 13px",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"margin-left: 5px","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");this.emailNode=document.createElement("span");this.emailNode.id="bt-pp-email";this.emailNode.style.cssText=cssStyles;this.container.appendChild(this.emailNode)};LoggedInView.prototype._createLogoutNode=function(){var cssStyles=["color: #3d95ce","font-size: 11px",'font-family: "Helvetica Neue", Helvetica, Arial, sans-serif',"line-height: 20px","margin: 0 0 0 25px","padding: 0","background-color: transparent","border: 0","cursor: pointer","text-decoration: underline","float: right","-webkit-font-smoothing: antialiased","-moz-font-smoothing: antialiased","-ms-font-smoothing: antialiased","font-smoothing: antialiased"].join(";");this.logoutNode=document.createElement("button");this.logoutNode.id="bt-pp-cancel";this.logoutNode.innerHTML=this.translation.cancel;this.logoutNode.style.cssText=cssStyles;this.container.appendChild(this.logoutNode)};LoggedInView.prototype.show=function(email){this.container.style.display="block";dom.setTextContent(this.emailNode,email)};LoggedInView.prototype.hide=function(){this.container.style.display="none"};LoggedInView.prototype._handleClickLogout=function(event){util.preventDefault(event);this.bus.emit(Bus.events.PAYMENT_METHOD_CANCELLED,{source:constants.PAYPAL_INTEGRATION_NAME})};LoggedInView.prototype._handlePaymentMethodGenerated=function(bundle){var email;if(bundle.type===constants.NONCE_TYPE){email=bundle&&bundle.details&&bundle.details.email?bundle.details.email:"";this.show(email)}};LoggedInView.prototype._handlePaymentMethodCancelled=function(event){if(event.source===constants.PAYPAL_INTEGRATION_NAME){this.hide()}};LoggedInView.prototype.teardown=function(){this.wrapper.removeChild(this.container);this.destructor.teardown();this.bus.teardown()};module.exports=LoggedInView}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{117:117,179:179,243:243,253:253,256:256,262:262,263:263,82:82,94:94}],247:[function(require,module,exports){(function(global){"use strict";var bind=require(117);var Bus=require(179);var constants=require(253);var getLocale=require(255);function LoggedOutView(options){this.options=options;this.wrapper=this.options.container||document.body;this.bus=new Bus({merchantUrl:global.location.href,channel:options.channel});this._initialize()}LoggedOutView.prototype._initialize=function(){this.createViewContainer();if(this.options.enablePayPalButton){this.createCheckoutWithPayPalButton()}else{this.createPayWithPayPalButton()}this.bus.on(Bus.events.PAYMENT_METHOD_GENERATED,bind(this._handlePaymentMethodGenerated,this));this.bus.on(Bus.events.PAYMENT_METHOD_CANCELLED,bind(this._handlePaymentMethodCancelled,this))};LoggedOutView.prototype.createViewContainer=function(){this.container=document.createElement("div");this.container.id="braintree-paypal-loggedout";this.wrapper.appendChild(this.container);this.loginNode=this.container};LoggedOutView.prototype.createPayWithPayPalButton=function(){var element=document.createElement("a");var image=new Image;var imageCssText=["max-width: 100%","display: block","width: 100%","height: 100%","outline: none","border: 0"].join(";");var cssStyles=["display: block","width: 115px","height: 44px","overflow: hidden"].join(";");element.id="braintree-paypal-button";element.href="#";element.style.cssText=cssStyles;image.src=this.options.paypalAssetsUrl+"/pwpp/"+constants.VERSION+"/images/pay-with-paypal.png";image.setAttribute("alt","Pay with PayPal");image.style.cssText=imageCssText;element.appendChild(image);this.container.appendChild(element)};LoggedOutView.prototype.createCheckoutWithPayPalButton=function(){var script=document.createElement("script");var attr;var scriptAttrs={"data-merchant":"merchant-id","data-button":"checkout","data-type":"button","data-color":"blue","data-lc":getLocale(this.options.locale)};script.src="//www.paypalobjects.com/api/button.js";script.async=true;for(attr in scriptAttrs){if(scriptAttrs.hasOwnProperty(attr)){script.setAttribute(attr,scriptAttrs[attr])}}this.container.appendChild(script)};LoggedOutView.prototype.show=function(){this.container.style.display="block"};LoggedOutView.prototype.hide=function(){this.container.style.display="none"};LoggedOutView.prototype._handlePaymentMethodGenerated=function(bundle){if(bundle.type===constants.NONCE_TYPE){this.hide()}};LoggedOutView.prototype._handlePaymentMethodCancelled=function(event){if(event.source===constants.PAYPAL_INTEGRATION_NAME){this.show()}};LoggedOutView.prototype.teardown=function(){this.wrapper.removeChild(this.container);this.bus.teardown()};module.exports=LoggedOutView}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{117:117,179:179,253:253,255:255}],248:[function(require,module,exports){(function(global){"use strict";var Bus=require(179);var bind=require(117);var constants=require(253);function MerchantPageView(options){this.options=options;this.bus=new Bus({merchantUrl:global.location.href,channel:options.channel});this.bus.on(constants.events.UI_MODAL_DID_OPEN,bind(this.lockWindowSize,this));this.bus.on(constants.events.UI_MODAL_DID_CLOSE,bind(this.unlockWindowSize,this))}MerchantPageView.prototype.lockWindowSize=function(){this.defaultStyles=getMerchantPageDefaultStyles();document.documentElement.style.height="100%";document.documentElement.style.overflow="hidden";document.body.style.height="100%";document.body.style.overflow="hidden"};MerchantPageView.prototype.unlockWindowSize=function(){if(this.defaultStyles){document.documentElement.style.height=this.defaultStyles.html.styles.height;document.documentElement.style.overflow=this.defaultStyles.html.styles.overflow;document.body.style.height=this.defaultStyles.body.styles.height;document.body.style.overflow=this.defaultStyles.body.styles.overflow;delete this.defaultStyles}};MerchantPageView.prototype._handleUIModalDidOpen=function(event){if(event.source===constants.PAYPAL_INTEGRATION_NAME){this.lockWindowSize()}};MerchantPageView.prototype._handleUIModalDidClose=function(event){if(event.source===constants.PAYPAL_INTEGRATION_NAME){this.unlockWindowSize()}};MerchantPageView.prototype.teardown=function(){this.unlockWindowSize();this.bus.teardown()};function getStyles(element){var computedStyles=window.getComputedStyle?getComputedStyle(element):element.currentStyle;return{overflow:computedStyles.overflow||"",height:element.style.height||""}}function getMerchantPageDefaultStyles(){return{html:{node:document.documentElement,styles:getStyles(document.documentElement)},body:{node:document.body,styles:getStyles(document.body)}}}module.exports=MerchantPageView}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{117:117,179:179,253:253}],249:[function(require,module,exports){(function(global){"use strict";var bind=require(117);var isFunction=require(166);var browser=require(261);var constants=require(253);var Bus=require(179);var iframer=require(110);function ModalView(options){this.options=options||{};this.container=document.body;this.bus=new Bus({merchantUrl:global.location.href,channel:options.channel});if(this.options.isDropin){this._open=this._openHeadless}else{this._attachBusEvents()}this._initialize()}ModalView.prototype._attachBusEvents=function(){this.bus.on(constants.events.OPEN_MODAL,bind(this.open,this))};ModalView.prototype._initialize=function(){var name=this.options.isHermes?constants.HERMES_FRAME_NAME:constants.FRAME_NAME;this.el=iframer({src:this.options.src,name:name,height:this.options.height||"100%",width:this.options.width||"100%",style:{position:browser.isMobile()?"absolute":"fixed",top:0,left:0,bottom:0,padding:0,margin:0,border:0,outline:"none",zIndex:20001,background:"#FFFFFF"}})};ModalView.prototype.isClosed=function(){return!this.container.contains(this.el)};ModalView.prototype._openHeadless=function(){this.bus.emit(constants.events.OPEN_MODAL)};ModalView.prototype._open=function(){if(isFunction(this.options.insertFrameFunction)){this.options.insertFrameFunction(this.el.src)}else{this.container.appendChild(this.el)}this.bus.emit(constants.events.UI_MODAL_DID_OPEN,{source:constants.PAYPAL_INTEGRATION_NAME})};ModalView.prototype.open=function(){if(this.isClosed()){this._open()}};ModalView.prototype.close=function(){if(!this.isClosed()){this.container.removeChild(this.el);this.bus.emit(constants.events.UI_MODAL_DID_CLOSE,{source:constants.PAYPAL_INTEGRATION_NAME})}};ModalView.prototype.teardown=function(){this.close();this.bus.teardown()};module.exports=ModalView}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{110:110,117:117,166:166,179:179,253:253,261:261}],250:[function(require,module,exports){(function(global){"use strict";var braintreeUtil=require(82);var bind=require(117);var isFunction=require(166);var Destructor=require(94);var Bus=require(179);var constants=require(253);var getLocalizationData=require(256);var translations=require(243);function OverlayView(options){var localizationData;this.options=options;this.spriteSrc=this.options.paypalAssetsUrl+"/pwpp/"+constants.VERSION+"/images/pp_overlay_sprite.png";this.bus=new Bus({merchantUrl:global.location.href,channel:options.channel});this.destructor=new Destructor;localizationData=getLocalizationData(this.options.locale,translations);this.translation=localizationData.translation;this._create();this._setupEvents();this.bus.on(Bus.events.UI_POPUP_DID_OPEN,bind(this._handleUIPopupDidOpen,this));this.bus.on(Bus.events.UI_POPUP_DID_CLOSE,bind(this._handleUIPopupDidClose,this))}OverlayView.prototype.open=function(){if(document.body.contains(this.el)){return}document.body.appendChild(this.el)};OverlayView.prototype.close=function(){if(document.body.contains(this.el)){document.body.removeChild(this.el)}};OverlayView.prototype._handleUIPopupDidClose=function(event){if(event.source===constants.PAYPAL_INTEGRATION_NAME){this.close()}};OverlayView.prototype._handleUIPopupDidOpen=function(event){if(event.source===constants.PAYPAL_INTEGRATION_NAME){this.open()}};OverlayView.prototype._create=function(){this.el=document.createElement("div");this.el.className="bt-overlay";this._setStyles(this.el,["z-index: 20001","position: fixed","top: 0","left: 0","height: 100%","width: 100%","text-align: center","background: #000","background: rgba(0,0,0,0.7)",'-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=52)"']);this.el.appendChild(this._createCloseIcon());this.el.appendChild(this._createMessage())};OverlayView.prototype._createCloseIcon=function(){this.closeIcon=document.createElement("div");this.closeIcon.className="bt-close-overlay";this._setStyles(this.closeIcon,["position: absolute","top: 10px","right: 10px","cursor: pointer","background: url("+this.spriteSrc+") no-repeat 0 -67px","height: 14px","width: 14px"]);return this.closeIcon};OverlayView.prototype._createMessage=function(){var message=document.createElement("div");this._setStyles(message,["position: relative","top: 50%","max-width: 350px",'font-family: "HelveticaNeue", "HelveticaNeue-Light", "Helvetica Neue Light", helvetica, arial, sans-serif',"font-size: 14px","line-height: 20px","margin: -70px auto 0"]);message.appendChild(this._createLogo());message.appendChild(this._createExplanation());message.appendChild(this._createFocusLink());return message};OverlayView.prototype._createExplanation=function(){this.explanation=document.createElement("div");this._setStyles(this.explanation,["color: #FFF","margin-bottom: 20px"]);this.explanation.innerHTML=this.translation.overlay_text;return this.explanation};OverlayView.prototype._createLogo=function(){var logo=document.createElement("div");this._setStyles(logo,["background: url("+this.spriteSrc+") no-repeat 0 0","width: 94px","height: 25px","margin: 0 auto 26px auto"]);return logo};OverlayView.prototype._createFocusLink=function(){this.focusLink=document.createElement("a");this._setStyles(this.focusLink,["color: #009be1","cursor: pointer"]);this.focusLink.innerHTML=this.translation.continue_link;return this.focusLink};OverlayView.prototype._setStyles=function(el,styles){var cssStyles=styles.join(";");el.style.cssText=cssStyles};OverlayView.prototype._setupEvents=function(){var self=this;var clickCloseHandler=bind(this._handleClose,this);var clickFocusHandler=bind(this._handleFocus,this);braintreeUtil.addEventListener(this.closeIcon,"click",clickCloseHandler);braintreeUtil.addEventListener(this.focusLink,"click",clickFocusHandler);this.destructor.registerFunctionForTeardown(function(){braintreeUtil.removeEventListener(self.closeIcon,"click",clickCloseHandler);braintreeUtil.removeEventListener(self.focusLink,"click",clickFocusHandler)})};OverlayView.prototype._handleClose=function(event){event.preventDefault();this.close();if(isFunction(this.options.onClose)){this.options.onClose()}};OverlayView.prototype._handleFocus=function(event){event.preventDefault();if(isFunction(this.options.onFocus)){this.options.onFocus()}};OverlayView.prototype.teardown=function(){this.bus.teardown();this.destructor.teardown();this.close()};module.exports=OverlayView}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{117:117,166:166,179:179,243:243,253:253,256:256,82:82,94:94}],251:[function(require,module,exports){(function(global){"use strict";var braintreeUtil=require(82);var bind=require(117);var isFunction=require(166);var Destructor=require(94);var Bus=require(179);var constants=require(253);function PaymentMethodNonceInputFieldView(options){this.options=options||{};this.container=this.options.container||document.body;this.el=this.options.el;this.destructor=new Destructor;this.bus=new Bus({merchantUrl:global.location.href,channel:options.channel});this._initialize()}PaymentMethodNonceInputFieldView.prototype._initialize=function(){var self=this;if(!isFunction(this.el)){if(this.el!=null){this.el=braintreeUtil.normalizeElement(this.el);this.destructor.registerFunctionForTeardown(function(){self.clear()})}else{this.el=this.create()}}this.bus.on(Bus.events.PAYMENT_METHOD_GENERATED,bind(this._handlePaymentMethodGenerated,this));this.bus.on(Bus.events.PAYMENT_METHOD_CANCELLED,bind(this._handlePaymentMethodCancelled,this))};PaymentMethodNonceInputFieldView.prototype.create=function(){var self=this;var input=document.createElement("input");input.name="payment_method_nonce";input.type="hidden";this.container.appendChild(input);this.destructor.registerFunctionForTeardown(function(){self.container.removeChild(input)});return input};PaymentMethodNonceInputFieldView.prototype.value=function(value){if(isFunction(this.el)){this.el(value)}else{this.el.value=value}};PaymentMethodNonceInputFieldView.prototype.clear=function(){this.value("")};PaymentMethodNonceInputFieldView.prototype._handlePaymentMethodCancelled=function(event){if(event.source===constants.PAYPAL_INTEGRATION_NAME){this.clear()}};PaymentMethodNonceInputFieldView.prototype._handlePaymentMethodGenerated=function(bundle){if(bundle.type===constants.NONCE_TYPE){this.value(bundle.nonce)}};PaymentMethodNonceInputFieldView.prototype.teardown=function(){this.destructor.teardown();this.bus.teardown()};module.exports=PaymentMethodNonceInputFieldView}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{117:117,166:166,179:179,253:253,82:82,94:94}],252:[function(require,module,exports){(function(global){"use strict";var constants=require(253);var Bus=require(179);var browser=require(257);function PopupView(options){this.options=options;this.bus=new Bus({merchantUrl:global.location.href,channel:this.options.channel});if(options.isHermes){this.name=constants.HERMES_POPUP_NAME;this.popupHeight=constants.HERMES_POPUP_HEIGHT;this.popupWidth=constants.HERMES_POPUP_WIDTH}else{this.name=constants.POPUP_NAME;this.popupHeight=constants.POPUP_HEIGHT;this.popupWidth=constants.POPUP_WIDTH}}PopupView.prototype._getPopupOptions=function(){return["height="+this.popupHeight,"width="+this.popupWidth,"top="+this._getTopPosition(),"left="+this._getLeftPosition(),constants.POPUP_OPTIONS].join(",")};PopupView.prototype._centerPosition=function(windowMetric,popupMetric,offset){return(windowMetric-popupMetric)/2+offset};PopupView.prototype._getTopPosition=function(){var windowHeight=window.outerHeight||document.documentElement.clientHeight;var windowTop=typeof window.screenY==="undefined"?window.screenTop:window.screenY;return this._centerPosition(windowHeight,this.popupHeight,windowTop)};PopupView.prototype._getLeftPosition=function(){var windowWidth=window.outerWidth||document.documentElement.clientWidth;var windowLeft=typeof window.screenX==="undefined"?window.screenLeft:window.screenX;return this._centerPosition(windowWidth,this.popupWidth,windowLeft)};PopupView.prototype.isClosed=function(){if(this.el){return this.el.closed}};PopupView.prototype.open=function(){if(!this.el){this.el=window.open(this.options.src,this.name,this._getPopupOptions());this.focus();this.bus.emit(Bus.events.UI_POPUP_DID_OPEN,{source:constants.PAYPAL_INTEGRATION_NAME})}};PopupView.prototype.close=function(){if(this.el){if(browser.isIE8()&&!this.isClosed()||!browser.isIE8()){this.el.close()}this.bus.emit(Bus.events.UI_POPUP_DID_CLOSE,{source:constants.PAYPAL_INTEGRATION_NAME})}};PopupView.prototype.focus=function(){if(this.el){this.el.focus()}};PopupView.prototype.teardown=function(){this.close();this.bus.teardown()};module.exports=PopupView}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{179:179,253:253,257:257}],253:[function(require,module,exports){"use strict";var i;var version="2.15.7";var events=["GET_CLIENT_TOKEN","GET_CLIENT_OPTIONS","OPEN_MODAL","CLOSE_APP","FOCUS_APP","UI_MODAL_DID_OPEN","UI_MODAL_DID_CLOSE"];var configurationTypes={LEGACY_ONETIME:"Legacy Onetime",HERMES_ONETIME:"Hermes Onetime",LEGACY_FUTURE_PAYMENTS:"Legacy Future Payments",HERMES_BILLING_AGREEMENTS:"Hermes Billing Agreements"};exports.VERSION=version;exports.POPUP_NAME="braintree_paypal_popup";exports.HERMES_POPUP_NAME="PPFrameRedirect";exports.FRAME_NAME="braintree-paypal-frame";exports.HERMES_FRAME_NAME="PPFrameRedirect";exports.POPUP_PATH="/pwpp/"+version+"/html/braintree-frame.html";exports.POPUP_OPTIONS="resizable,scrollbars";exports.POPUP_HEIGHT=470;exports.POPUP_WIDTH=410;exports.HERMES_POPUP_HEIGHT=535;exports.HERMES_POPUP_WIDTH=450;exports.BRIDGE_FRAME_NAME="bt-proxy-frame";exports.HERMES_SUPPORTED_CURRENCIES=["USD","GBP","EUR","AUD","CAD","DKK","NOK","PLN","SEK","CHF","TRY","BRL"];exports.HERMES_SUPPORTED_COUNTRIES=["US","GB","AU","CA","ES","FR","DE","IT","NL","NO","PL","CH","TR","DK","BE","AT"];exports.NONCE_TYPE="PayPalAccount";exports.PAYPAL_INTEGRATION_NAME="PayPal";exports.ILLEGAL_XHR_ERROR="Illegal XHR request attempted";exports.CONFIGURATION_TYPES=configurationTypes;exports.events={};for(i=0;i<events.length;i++){exports.events[events[i]]="paypal:"+events[i]}},{}],254:[function(require,module,exports){"use strict";module.exports={us:"en_us",gb:"en_uk",uk:"en_uk",de:"de_de",fr:"fr_fr",it:"it_it",es:"es_es",ca:"en_ca",au:"en_au",at:"de_de",be:"en_us",ch:"de_de",dk:"da_dk",nl:"nl_nl",no:"no_no",pl:"pl_pl",se:"sv_se",tr:"tr_tr",bg:"en_us",cy:"en_us",hr:"en_us",is:"en_us",kh:"en_us",mt:"en_us",my:"en_us",ru:"ru_ru"}},{}],255:[function(require,module,exports){"use strict";var countryCodeLookupTable=require(254);function isFormatted(code){return code.indexOf("_")!==-1&&code.length===5}function queryTable(code){var key,match;for(key in countryCodeLookupTable){if(countryCodeLookupTable.hasOwnProperty(key)){if(key===code){match=countryCodeLookupTable[key]}else if(countryCodeLookupTable[key]===code){match=countryCodeLookupTable[key]}}}return match}function getLocale(code){var match,pieces;code=code?code.toLowerCase():"us";code=code.replace(/-/g,"_");match=isFormatted(code)?code:queryTable(code);if(match){pieces=match.split("_");return[pieces[0],pieces[1].toUpperCase()].join("_")}return"en_US"}module.exports=getLocale},{254:254}],256:[function(require,module,exports){"use strict";var countryCodeLookupTable=require(254);var getLocale=require(255);function getCountry(code){var country=code?code.toLowerCase().replace(/-/g,"_"):"us";if(country.indexOf("_")!==-1){country=country.split("_")[1]}country=countryCodeLookupTable[country]?country:"us";if(country==="uk"){country="gb"}return country}function getTranslation(locale,translations){locale=locale.toLowerCase();return translations[locale]?translations[locale]:translations.en_us}function getLocalizationData(code,translations){var country=getCountry(code);var locale=getLocale(code);var translation=getTranslation(locale,translations);return{country:country,locale:locale,translation:translation}}module.exports=getLocalizationData},{254:254,255:255}],257:[function(require,module,exports){"use strict";var userAgent=require(260);var platform=require(259);function isAndroid(){return userAgent.matchUserAgent("Android")&&!isChrome()}function isChrome(){return userAgent.matchUserAgent("Chrome")||userAgent.matchUserAgent("CriOS")}function isFirefox(){return userAgent.matchUserAgent("Firefox")}function isIE(){return userAgent.matchUserAgent("Trident")||userAgent.matchUserAgent("MSIE")}function isIE8(){return userAgent.matchUserAgent(/MSIE 8\.0/)}function isOpera(){return userAgent.matchUserAgent("Opera")||userAgent.matchUserAgent("OPR")}function isOperaMini(){return isOpera()&&Object.prototype.toString.call(window.operamini)==="[object OperaMini]"}function isSafari(){return userAgent.matchUserAgent("Safari")&&!isChrome()&&!isAndroid()}function isIosWebView(){return platform.isIos()&&!isChrome()&&!isSafari()}function isAndroidWebView(){var androidWebviewRegExp=/Version\/[\w\.]+ Chrome\/[\w\.]+ Mobile/;return platform.isAndroid()&&userAgent.matchUserAgent(androidWebviewRegExp)}module.exports={isAndroid:isAndroid,isChrome:isChrome,isFirefox:isFirefox,isIE:isIE,isIE8:isIE8,isOpera:isOpera,isOperaMini:isOperaMini,isSafari:isSafari,isIosWebView:isIosWebView,isAndroidWebView:isAndroidWebView}},{259:259,260:260}],258:[function(require,module,exports){"use strict";var userAgent=require(260);var platform=require(259);function isMobile(){return!isTablet()&&(platform.isAndroid()||platform.isIpod()||platform.isIphone()||userAgent.matchUserAgent("IEMobile"))}function isTablet(){return platform.isIpad()||platform.isAndroid()&&!userAgent.matchUserAgent("Mobile")}function isDesktop(){return!isMobile()&&!isTablet()}module.exports={isMobile:isMobile,isTablet:isTablet,isDesktop:isDesktop}},{259:259,260:260}],259:[function(require,module,exports){"use strict";var userAgent=require(260);function isAndroid(){return userAgent.matchUserAgent("Android")}function isIpad(){return userAgent.matchUserAgent("iPad")}function isIpod(){return userAgent.matchUserAgent("iPod")}function isIphone(){return userAgent.matchUserAgent("iPhone")&&!isIpod()}function isIos(){return isIpad()||isIpod()||isIphone()}module.exports={isAndroid:isAndroid,isIpad:isIpad,isIpod:isIpod,isIphone:isIphone,isIos:isIos}},{260:260}],260:[function(require,module,exports){"use strict";var nativeUserAgent=window.navigator.userAgent;function getNativeUserAgent(){return nativeUserAgent}function matchUserAgent(pattern){var userAgent=exports.getNativeUserAgent();var matches=userAgent.match(pattern);if(matches){return true}return false}exports.getNativeUserAgent=getNativeUserAgent;exports.matchUserAgent=matchUserAgent},{}],261:[function(require,module,exports){"use strict";var browser=require(257);var device=require(258);var platform=require(259);var userAgent=require(260);var uaString=window.navigator.userAgent;var mobileRe=/[Mm]obi|tablet|iOS|Android|IEMobile|Windows\sPhone/;function isMobile(){return isMobileDevice()&&window.outerWidth<600}function isMobileDevice(){return mobileRe.test(uaString)}function detectedPostMessage(){return Boolean(window.postMessage)}function isPopupSupported(){if(browser.isOperaMini()){return false}if(device.isDesktop()){return true}if(device.isMobile()||device.isTablet()){if(browser.isIE()){return false}if(platform.isAndroid()){if(browser.isAndroidWebView()){return false}return true}if(platform.isIos()){if(browser.isChrome()){return false}if(browser.isSafari()&&userAgent.matchUserAgent(/OS (?:8_1|8_0|8)(?!_\d)/i)){return false}if(browser.isIosWebView()){return false}return true}}return false}function isOverlaySupported(){if(browser.isIE8()){return false}try{return window.self===window.top}catch(e){return false}}function isBridgeIframeRequired(){return browser.isIE()}function isMetroBrowser(){var supported=null;var errorName="";try{new ActiveXObject("")}catch(e){errorName=e.name}try{supported=Boolean(new ActiveXObject("htmlfile"))}catch(e){supported=false}if(errorName!=="ReferenceError"&&supported===false){supported=false}else{supported=true}return!supported}module.exports={isMobile:isMobile,isMobileDevice:isMobileDevice,detectedPostMessage:detectedPostMessage,isPopupSupported:isPopupSupported,isOverlaySupported:isOverlaySupported,isBridgeIframeRequired:isBridgeIframeRequired,isMetroBrowser:isMetroBrowser}},{257:257,258:258,259:259,260:260}],262:[function(require,module,exports){"use strict";function setTextContent(element,content){var property="innerText";if(document&&document.body){if("textContent"in document.body){property="textContent"}}element[property]=content}module.exports={setTextContent:setTextContent}},{}],263:[function(require,module,exports){"use strict";var constants=require(253);var trim=typeof String.prototype.trim==="function"?function(str){return str.trim()}:function(str){return str.replace(/^\s+|\s+$/,"")};var b2a=typeof window.btoa==="function"?function(str){return window.btoa(str)}:function(str){var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;while(i<str.length){chr1=str.charCodeAt(i++);chr2=str.charCodeAt(i++);chr3=str.charCodeAt(i++);enc1=chr1>>2;enc2=(chr1&3)<<4|chr2>>4;enc3=(chr2&15)<<2|chr3>>6;enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}output=output+keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4)}return output};function generateUid(){var i,r;var uid="";for(i=0;i<32;i++){r=Math.floor(Math.random()*16);uid+=r.toString(16)}return uid}function castToBoolean(value){return/^(true|1)$/i.test(value)}function htmlEscape(str){return str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;")}function parseUrlParams(url){var arr,i,n,parts,index,key,value,encodedValue;var startIndex=url.indexOf("?");var values={};if(startIndex>=0){url=url.substr(startIndex+1)}if(url.length===0){return null}arr=url.split("&");for(i=0,n=arr.length;i<n;i++){parts=arr[i];index=parts.indexOf("=");key=parts.substr(0,index);encodedValue=parts.substr(index+1);value=decodeURIComponent(encodedValue);value=value.replace(/</g,"&lt;").replace(/>/g,"&gt;");if(value==="false"){value=false}if(value==null||value==="true"){value=true}values[key]=value}return values}function preventDefault(event){if(event.preventDefault){event.preventDefault()}else{event.returnValue=false}}function getOnetimeConfigurationType(merchantConfiguration){var configurationType;if(Boolean(merchantConfiguration.amount)&&Boolean(merchantConfiguration.currency)){configurationType=constants.CONFIGURATION_TYPES.HERMES_ONETIME}else{configurationType=constants.CONFIGURATION_TYPES.LEGACY_ONETIME}return configurationType}function getFuturePaymentsConfigurationType(gatewayConfiguration){var configurationType;if(gatewayConfiguration.paypal.billingAgreementsEnabled){configurationType=constants.CONFIGURATION_TYPES.HERMES_BILLING_AGREEMENTS}else{configurationType=constants.CONFIGURATION_TYPES.LEGACY_FUTURE_PAYMENTS}return configurationType}function getConfigurationType(gatewayConfiguration,merchantConfiguration){var configurationType;if(merchantConfiguration.singleUse){configurationType=getOnetimeConfigurationType(merchantConfiguration)}else{configurationType=getFuturePaymentsConfigurationType(gatewayConfiguration)}return configurationType}function isHermesConfiguration(gatewayConfiguration,merchantConfiguration){var configurationType=getConfigurationType(gatewayConfiguration,merchantConfiguration);return configurationType===constants.CONFIGURATION_TYPES.HERMES_ONETIME||configurationType===constants.CONFIGURATION_TYPES.HERMES_BILLING_AGREEMENTS}function isOnetimeHermesConfiguration(gatewayConfiguration,merchantConfiguration){var configurationType=getConfigurationType(gatewayConfiguration,merchantConfiguration);return configurationType===constants.CONFIGURATION_TYPES.HERMES_ONETIME}module.exports={trim:trim,btoa:b2a,generateUid:generateUid,castToBoolean:castToBoolean,htmlEscape:htmlEscape,parseUrlParams:parseUrlParams,preventDefault:preventDefault,isHermesConfiguration:isHermesConfiguration,isOnetimeHermesConfiguration:isOnetimeHermesConfiguration,getConfigurationType:getConfigurationType}},{253:253}]},{},[194])(194)});